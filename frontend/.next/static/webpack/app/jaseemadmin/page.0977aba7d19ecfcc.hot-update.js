"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/jaseemadmin/page",{

/***/ "(app-pages-browser)/./src/utils/bidirectionalSync.ts":
/*!****************************************!*\
  !*** ./src/utils/bidirectionalSync.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bidirectionalSync: () => (/* binding */ bidirectionalSync)\n/* harmony export */ });\n/* harmony import */ var _quizDataManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./quizDataManager */ \"(app-pages-browser)/./src/utils/quizDataManager.ts\");\n/* harmony import */ var _rewardDataManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rewardDataManager */ \"(app-pages-browser)/./src/utils/rewardDataManager.ts\");\n/* harmony import */ var _settingsDataManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./settingsDataManager */ \"(app-pages-browser)/./src/utils/settingsDataManager.ts\");\n// Bidirectional Data Synchronization System for TechKwiz Admin Dashboard\n\n\n\nclass BidirectionalSyncService {\n    static getInstance() {\n        if (!BidirectionalSyncService.instance) {\n            BidirectionalSyncService.instance = new BidirectionalSyncService();\n        }\n        return BidirectionalSyncService.instance;\n    }\n    // Get current admin configuration data\n    getAdminConfigData() {\n        const now = Date.now();\n        return {\n            quiz: {\n                questions: _quizDataManager__WEBPACK_IMPORTED_MODULE_0__.quizDataManager.getQuestions() || [],\n                categories: _quizDataManager__WEBPACK_IMPORTED_MODULE_0__.quizDataManager.getCategories() || [],\n                settings: _quizDataManager__WEBPACK_IMPORTED_MODULE_0__.quizDataManager.getSettings() || {},\n                lastModified: parseInt(localStorage.getItem('admin_quiz_questions_updated') || now.toString()),\n                version: this.generateVersion('quiz')\n            },\n            rewards: {\n                achievements: _rewardDataManager__WEBPACK_IMPORTED_MODULE_1__.rewardDataManager.getAchievements() || [],\n                popupSettings: _rewardDataManager__WEBPACK_IMPORTED_MODULE_1__.rewardDataManager.getRewardConfig().popupSettings || {},\n                coinMultipliers: _rewardDataManager__WEBPACK_IMPORTED_MODULE_1__.rewardDataManager.getRewardConfig().coinValues || {},\n                lastModified: parseInt(localStorage.getItem('admin_reward_config_updated') || now.toString()),\n                version: this.generateVersion('rewards')\n            },\n            systemSettings: {\n                featureFlags: _settingsDataManager__WEBPACK_IMPORTED_MODULE_2__.settingsDataManager.getSystemSettings().featureFlags || {},\n                configValues: _settingsDataManager__WEBPACK_IMPORTED_MODULE_2__.settingsDataManager.getSystemSettings() || {},\n                adsConfig: _settingsDataManager__WEBPACK_IMPORTED_MODULE_2__.settingsDataManager.getIntegrationSettings().adsense || {},\n                lastModified: parseInt(localStorage.getItem('admin_settings_updated') || now.toString()),\n                version: this.generateVersion('systemSettings')\n            }\n        };\n    }\n    // Get current frontend configuration data\n    getFrontendConfigData() {\n        const now = Date.now();\n        try {\n            return {\n                quiz: {\n                    questions: JSON.parse(localStorage.getItem('game_quiz_data') || '[]'),\n                    categories: JSON.parse(localStorage.getItem('game_categories') || '[]'),\n                    settings: JSON.parse(localStorage.getItem('game_quiz_settings') || '{}'),\n                    lastModified: parseInt(localStorage.getItem('game_last_sync') || now.toString()),\n                    version: localStorage.getItem('game_quiz_version') || '1.0.0'\n                },\n                rewards: {\n                    achievements: JSON.parse(localStorage.getItem('game_reward_data') || '[]'),\n                    popupSettings: JSON.parse(localStorage.getItem('game_popup_settings') || '{}'),\n                    coinMultipliers: JSON.parse(localStorage.getItem('game_coin_multipliers') || '{}'),\n                    lastModified: parseInt(localStorage.getItem('game_rewards_sync') || now.toString()),\n                    version: localStorage.getItem('game_rewards_version') || '1.0.0'\n                },\n                systemSettings: {\n                    featureFlags: JSON.parse(localStorage.getItem('game_feature_flags') || '{}'),\n                    configValues: JSON.parse(localStorage.getItem('game_settings_data') || '{}'),\n                    adsConfig: JSON.parse(localStorage.getItem('game_ads_config') || '{}'),\n                    lastModified: parseInt(localStorage.getItem('game_settings_sync') || now.toString()),\n                    version: localStorage.getItem('game_settings_version') || '1.0.0'\n                }\n            };\n        } catch (error) {\n            console.error('Error reading frontend config data:', error);\n            return this.getDefaultConfigData();\n        }\n    }\n    // Generate version string based on data hash\n    generateVersion(category) {\n        const timestamp = Date.now();\n        const hash = Math.random().toString(36).substring(2, 8);\n        return \"\".concat(category, \"-\").concat(timestamp, \"-\").concat(hash);\n    }\n    // Get default configuration data\n    getDefaultConfigData() {\n        const now = Date.now();\n        return {\n            quiz: {\n                questions: [],\n                categories: [],\n                settings: {},\n                lastModified: now,\n                version: '1.0.0'\n            },\n            rewards: {\n                achievements: [],\n                popupSettings: {},\n                coinMultipliers: {},\n                lastModified: now,\n                version: '1.0.0'\n            },\n            systemSettings: {\n                featureFlags: {},\n                configValues: {},\n                adsConfig: {},\n                lastModified: now,\n                version: '1.0.0'\n            }\n        };\n    }\n    // Detect changes between admin and frontend data\n    detectChanges(adminData, frontendData) {\n        const changes = [];\n        // Compare quiz data\n        changes.push(...this.compareQuizData(adminData.quiz, frontendData.quiz));\n        // Compare rewards data\n        changes.push(...this.compareRewardsData(adminData.rewards, frontendData.rewards));\n        // Compare system settings\n        changes.push(...this.compareSystemSettings(adminData.systemSettings, frontendData.systemSettings));\n        return changes;\n    }\n    // Compare quiz data with detailed question-level analysis\n    compareQuizData(admin, frontend) {\n        const changes = [];\n        // Detailed question comparison\n        const questionChanges = this.compareQuestions(admin.questions || [], frontend.questions || []);\n        changes.push(...questionChanges);\n        // Compare categories\n        if (JSON.stringify(admin.categories) !== JSON.stringify(frontend.categories)) {\n            changes.push({\n                category: 'quiz',\n                field: 'categories',\n                action: 'modify',\n                oldValue: frontend.categories,\n                newValue: admin.categories,\n                riskLevel: 'safe',\n                impact: \"Categories: \".concat(frontend.categories.length, \" â†’ \").concat(admin.categories.length),\n                details: {\n                    added: admin.categories.filter((cat)=>!frontend.categories.includes(cat)),\n                    removed: frontend.categories.filter((cat)=>!admin.categories.includes(cat))\n                }\n            });\n        }\n        // Compare settings\n        if (JSON.stringify(admin.settings) !== JSON.stringify(frontend.settings)) {\n            changes.push({\n                category: 'quiz',\n                field: 'settings',\n                action: 'modify',\n                oldValue: frontend.settings,\n                newValue: admin.settings,\n                riskLevel: 'caution',\n                impact: 'Quiz settings configuration updated',\n                details: {\n                    settingsChanged: this.getSettingsChanges(frontend.settings, admin.settings)\n                }\n            });\n        }\n        return changes;\n    }\n    // Detailed question comparison at individual question level\n    compareQuestions(adminQuestions, frontendQuestions) {\n        const changes = [];\n        // Create maps for efficient lookup\n        const adminMap = new Map(adminQuestions.map((q)=>[\n                q.id,\n                q\n            ]));\n        const frontendMap = new Map(frontendQuestions.map((q)=>[\n                q.id,\n                q\n            ]));\n        // Find added questions (in admin but not in frontend)\n        const addedQuestions = adminQuestions.filter((q)=>!frontendMap.has(q.id));\n        if (addedQuestions.length > 0) {\n            changes.push({\n                category: 'quiz',\n                field: 'questions',\n                action: 'add',\n                oldValue: null,\n                newValue: addedQuestions,\n                riskLevel: 'safe',\n                impact: \"Adding \".concat(addedQuestions.length, \" new question\").concat(addedQuestions.length > 1 ? 's' : ''),\n                details: {\n                    questions: addedQuestions.map((q)=>({\n                            id: q.id,\n                            question: q.question,\n                            category: q.category,\n                            difficulty: q.difficulty,\n                            type: q.type,\n                            options: q.options,\n                            correctAnswer: q.correctAnswer,\n                            funFact: q.funFact,\n                            tags: q.tags\n                        }))\n                }\n            });\n        }\n        // Find removed questions (in frontend but not in admin)\n        const removedQuestions = frontendQuestions.filter((q)=>!adminMap.has(q.id));\n        if (removedQuestions.length > 0) {\n            changes.push({\n                category: 'quiz',\n                field: 'questions',\n                action: 'remove',\n                oldValue: removedQuestions,\n                newValue: null,\n                riskLevel: 'destructive',\n                impact: \"Removing \".concat(removedQuestions.length, \" question\").concat(removedQuestions.length > 1 ? 's' : ''),\n                details: {\n                    questions: removedQuestions.map((q)=>({\n                            id: q.id,\n                            question: q.question,\n                            category: q.category,\n                            difficulty: q.difficulty,\n                            type: q.type,\n                            options: q.options,\n                            correctAnswer: q.correctAnswer,\n                            funFact: q.funFact,\n                            tags: q.tags\n                        }))\n                }\n            });\n        }\n        // Find modified questions (same ID but different content)\n        const modifiedQuestions = [];\n        for (const adminQ of adminQuestions){\n            const frontendQ = frontendMap.get(adminQ.id);\n            if (frontendQ && JSON.stringify(adminQ) !== JSON.stringify(frontendQ)) {\n                const questionDiff = this.getQuestionDiff(frontendQ, adminQ);\n                modifiedQuestions.push({\n                    id: adminQ.id,\n                    oldQuestion: frontendQ,\n                    newQuestion: adminQ,\n                    changes: questionDiff\n                });\n            }\n        }\n        if (modifiedQuestions.length > 0) {\n            changes.push({\n                category: 'quiz',\n                field: 'questions',\n                action: 'modify',\n                oldValue: modifiedQuestions.map((m)=>m.oldQuestion),\n                newValue: modifiedQuestions.map((m)=>m.newQuestion),\n                riskLevel: 'caution',\n                impact: \"Modifying \".concat(modifiedQuestions.length, \" question\").concat(modifiedQuestions.length > 1 ? 's' : ''),\n                details: {\n                    questions: modifiedQuestions\n                }\n            });\n        }\n        return changes;\n    }\n    // Get detailed diff for a single question\n    getQuestionDiff(oldQuestion, newQuestion) {\n        const diff = {};\n        if (oldQuestion.question !== newQuestion.question) {\n            diff.question = {\n                old: oldQuestion.question,\n                new: newQuestion.question\n            };\n        }\n        if (JSON.stringify(oldQuestion.options) !== JSON.stringify(newQuestion.options)) {\n            diff.options = {\n                old: oldQuestion.options,\n                new: newQuestion.options\n            };\n        }\n        if (oldQuestion.correctAnswer !== newQuestion.correctAnswer) {\n            diff.correctAnswer = {\n                old: {\n                    index: oldQuestion.correctAnswer,\n                    text: oldQuestion.options[oldQuestion.correctAnswer]\n                },\n                new: {\n                    index: newQuestion.correctAnswer,\n                    text: newQuestion.options[newQuestion.correctAnswer]\n                }\n            };\n        }\n        if (oldQuestion.category !== newQuestion.category) {\n            diff.category = {\n                old: oldQuestion.category,\n                new: newQuestion.category\n            };\n        }\n        if (oldQuestion.difficulty !== newQuestion.difficulty) {\n            diff.difficulty = {\n                old: oldQuestion.difficulty,\n                new: newQuestion.difficulty\n            };\n        }\n        if (oldQuestion.type !== newQuestion.type) {\n            diff.type = {\n                old: oldQuestion.type,\n                new: newQuestion.type\n            };\n        }\n        if (oldQuestion.funFact !== newQuestion.funFact) {\n            diff.funFact = {\n                old: oldQuestion.funFact,\n                new: newQuestion.funFact\n            };\n        }\n        if (JSON.stringify(oldQuestion.tags) !== JSON.stringify(newQuestion.tags)) {\n            diff.tags = {\n                old: oldQuestion.tags || [],\n                new: newQuestion.tags || []\n            };\n        }\n        return diff;\n    }\n    // Get settings changes\n    getSettingsChanges(oldSettings, newSettings) {\n        const changes = {};\n        for(const key in newSettings){\n            if (JSON.stringify(oldSettings[key]) !== JSON.stringify(newSettings[key])) {\n                changes[key] = {\n                    old: oldSettings[key],\n                    new: newSettings[key]\n                };\n            }\n        }\n        return changes;\n    }\n    // Compare rewards data\n    compareRewardsData(admin, frontend) {\n        const changes = [];\n        // Compare achievements\n        if (JSON.stringify(admin.achievements) !== JSON.stringify(frontend.achievements)) {\n            changes.push({\n                category: 'rewards',\n                field: 'achievements',\n                action: 'modify',\n                oldValue: frontend.achievements,\n                newValue: admin.achievements,\n                riskLevel: 'safe',\n                impact: \"Achievements: \".concat(frontend.achievements.length, \" â†’ \").concat(admin.achievements.length)\n            });\n        }\n        // Compare popup settings\n        if (JSON.stringify(admin.popupSettings) !== JSON.stringify(frontend.popupSettings)) {\n            changes.push({\n                category: 'rewards',\n                field: 'popupSettings',\n                action: 'modify',\n                oldValue: frontend.popupSettings,\n                newValue: admin.popupSettings,\n                riskLevel: 'caution',\n                impact: 'Reward popup configuration updated'\n            });\n        }\n        // Compare coin multipliers\n        if (JSON.stringify(admin.coinMultipliers) !== JSON.stringify(frontend.coinMultipliers)) {\n            changes.push({\n                category: 'rewards',\n                field: 'coinMultipliers',\n                action: 'modify',\n                oldValue: frontend.coinMultipliers,\n                newValue: admin.coinMultipliers,\n                riskLevel: 'caution',\n                impact: 'Coin multiplier settings updated'\n            });\n        }\n        return changes;\n    }\n    // Compare system settings\n    compareSystemSettings(admin, frontend) {\n        const changes = [];\n        // Compare feature flags\n        if (JSON.stringify(admin.featureFlags) !== JSON.stringify(frontend.featureFlags)) {\n            changes.push({\n                category: 'systemSettings',\n                field: 'featureFlags',\n                action: 'modify',\n                oldValue: frontend.featureFlags,\n                newValue: admin.featureFlags,\n                riskLevel: 'caution',\n                impact: 'Feature flags configuration updated'\n            });\n        }\n        // Compare config values\n        if (JSON.stringify(admin.configValues) !== JSON.stringify(frontend.configValues)) {\n            changes.push({\n                category: 'systemSettings',\n                field: 'configValues',\n                action: 'modify',\n                oldValue: frontend.configValues,\n                newValue: admin.configValues,\n                riskLevel: 'caution',\n                impact: 'System configuration values updated'\n            });\n        }\n        // Compare ads config\n        if (JSON.stringify(admin.adsConfig) !== JSON.stringify(frontend.adsConfig)) {\n            changes.push({\n                category: 'systemSettings',\n                field: 'adsConfig',\n                action: 'modify',\n                oldValue: frontend.adsConfig,\n                newValue: admin.adsConfig,\n                riskLevel: 'safe',\n                impact: 'Ads configuration updated'\n            });\n        }\n        return changes;\n    }\n    // Detect conflicts between admin and frontend data\n    detectConflicts(adminData, frontendData) {\n        const conflicts = [];\n        // Check for timestamp conflicts\n        Object.keys(adminData).forEach((category)=>{\n            const adminCat = adminData[category];\n            const frontendCat = frontendData[category];\n            if (adminCat.lastModified > 0 && frontendCat.lastModified > 0) {\n                const timeDiff = Math.abs(adminCat.lastModified - frontendCat.lastModified);\n                // If both were modified within 5 minutes of each other, it's a potential conflict\n                if (timeDiff < 300000 && adminCat.version !== frontendCat.version) {\n                    conflicts.push({\n                        field: \"\".concat(category, \".version\"),\n                        adminValue: adminCat.version,\n                        frontendValue: frontendCat.version,\n                        adminTimestamp: adminCat.lastModified,\n                        frontendTimestamp: frontendCat.lastModified,\n                        resolution: adminCat.lastModified > frontendCat.lastModified ? 'use-admin' : 'use-frontend'\n                    });\n                }\n            }\n        });\n        return conflicts;\n    }\n    // Assess data freshness\n    assessDataFreshness(timestamp) {\n        const now = Date.now();\n        const age = now - timestamp;\n        if (age < 300000) return 'fresh' // < 5 minutes\n        ;\n        if (age < 1800000) return 'stale' // < 30 minutes\n        ;\n        return 'outdated' // > 30 minutes\n        ;\n    }\n    // Generate sync preview\n    async generateSyncPreview(operation) {\n        const startTime = performance.now();\n        console.log(\"\\uD83D\\uDD04 Generating sync preview for operation: \".concat(operation));\n        const adminData = this.getAdminConfigData();\n        const frontendData = this.getFrontendConfigData();\n        let changes = [];\n        let direction = 'bidirectional';\n        switch(operation){\n            case 'pull':\n                changes = this.detectChanges(frontendData, adminData);\n                direction = 'frontend-to-admin';\n                break;\n            case 'push':\n                changes = this.detectChanges(adminData, frontendData);\n                direction = 'admin-to-frontend';\n                break;\n            case 'smart':\n                changes = this.detectChanges(adminData, frontendData);\n                direction = 'bidirectional';\n                break;\n            case 'reset':\n                changes = this.detectChanges(adminData, frontendData);\n                direction = 'admin-to-frontend';\n                break;\n        }\n        const conflicts = this.detectConflicts(adminData, frontendData);\n        const syncOperation = {\n            id: \"sync-\".concat(Date.now(), \"-\").concat(Math.random().toString(36).substring(2, 8)),\n            type: operation,\n            direction,\n            timestamp: Date.now(),\n            changes,\n            status: 'pending',\n            riskLevel: this.calculateOverallRiskLevel(changes),\n            performanceMetrics: {\n                duration: performance.now() - startTime,\n                dataSize: JSON.stringify({\n                    adminData,\n                    frontendData\n                }).length,\n                conflictsResolved: conflicts.length\n            }\n        };\n        const preview = {\n            operation: syncOperation,\n            conflicts,\n            summary: {\n                totalChanges: changes.length,\n                safeChanges: changes.filter((c)=>c.riskLevel === 'safe').length,\n                cautionChanges: changes.filter((c)=>c.riskLevel === 'caution').length,\n                destructiveChanges: changes.filter((c)=>c.riskLevel === 'destructive').length,\n                estimatedDuration: this.estimateSyncDuration(changes)\n            },\n            dataFreshness: {\n                admin: this.assessDataFreshness(Math.max(adminData.quiz.lastModified, adminData.rewards.lastModified, adminData.systemSettings.lastModified)),\n                frontend: this.assessDataFreshness(Math.max(frontendData.quiz.lastModified, frontendData.rewards.lastModified, frontendData.systemSettings.lastModified))\n            }\n        };\n        console.log(\"\\uD83D\\uDD04 Sync preview generated in \".concat(preview.operation.performanceMetrics.duration.toFixed(2), \"ms\"));\n        return preview;\n    }\n    // Calculate overall risk level\n    calculateOverallRiskLevel(changes) {\n        if (changes.some((c)=>c.riskLevel === 'destructive')) return 'destructive';\n        if (changes.some((c)=>c.riskLevel === 'caution')) return 'caution';\n        return 'safe';\n    }\n    // Estimate sync duration\n    estimateSyncDuration(changes) {\n        // Base time + time per change\n        return 100 + changes.length * 50 // milliseconds\n        ;\n    }\n    // Setup storage listeners for real-time updates\n    setupStorageListeners() {\n        if (false) {}\n        window.addEventListener('storage', (e)=>{\n            var _e_key, _e_key1;\n            if (((_e_key = e.key) === null || _e_key === void 0 ? void 0 : _e_key.startsWith('admin_')) || ((_e_key1 = e.key) === null || _e_key1 === void 0 ? void 0 : _e_key1.startsWith('game_'))) {\n                console.log('ðŸ”„ Storage change detected, updating sync preview:', e.key);\n                this.notifyListeners();\n            }\n        });\n    }\n    // Load sync history from localStorage\n    loadSyncHistory() {\n        try {\n            const history = localStorage.getItem('bidirectional_sync_history');\n            if (history) {\n                this.syncHistory = JSON.parse(history);\n            }\n        } catch (error) {\n            console.error('Error loading sync history:', error);\n            this.syncHistory = {\n                operations: [],\n                rollbackPoints: []\n            };\n        }\n    }\n    // Save sync history to localStorage\n    saveSyncHistory() {\n        try {\n            localStorage.setItem('bidirectional_sync_history', JSON.stringify(this.syncHistory));\n        } catch (error) {\n            console.error('Error saving sync history:', error);\n        }\n    }\n    // Add sync listener\n    addSyncListener(callback) {\n        this.listeners.push(callback);\n    }\n    // Remove sync listener\n    removeSyncListener(callback) {\n        const index = this.listeners.indexOf(callback);\n        if (index > -1) {\n            this.listeners.splice(index, 1);\n        }\n    }\n    // Notify all listeners\n    async notifyListeners() {\n        if (this.listeners.length > 0) {\n            try {\n                const preview = await this.generateSyncPreview('smart');\n                this.listeners.forEach((callback)=>{\n                    try {\n                        callback(preview);\n                    } catch (error) {\n                        console.error('Error in sync listener:', error);\n                    }\n                });\n            } catch (error) {\n                console.error('Error generating preview for listeners:', error);\n            }\n        }\n    }\n    // Get sync history\n    getSyncHistory() {\n        return {\n            ...this.syncHistory\n        };\n    }\n    // Execute sync operation\n    async executeSyncOperation(preview) {\n        if (this.isOperationInProgress) {\n            return {\n                success: false,\n                message: 'Another sync operation is in progress',\n                operation: preview.operation\n            };\n        }\n        this.isOperationInProgress = true;\n        const startTime = performance.now();\n        try {\n            console.log(\"\\uD83D\\uDD04 Executing sync operation: \".concat(preview.operation.type));\n            // Create rollback point\n            await this.createRollbackPoint(\"Before \".concat(preview.operation.type, \" operation\"));\n            // Apply changes based on operation type\n            switch(preview.operation.type){\n                case 'pull':\n                    await this.syncFromFrontend(preview.operation.changes);\n                    break;\n                case 'push':\n                    await this.syncToFrontend(preview.operation.changes);\n                    break;\n                case 'smart':\n                    await this.smartSync(preview.operation.changes, preview.conflicts);\n                    break;\n                case 'reset':\n                    await this.resetFrontend();\n                    break;\n            }\n            // Update operation status\n            preview.operation.status = 'completed';\n            preview.operation.performanceMetrics.duration = performance.now() - startTime;\n            // Add to history\n            this.syncHistory.operations.push(preview.operation);\n            this.saveSyncHistory();\n            console.log(\"\\uD83D\\uDD04 Sync operation completed in \".concat(preview.operation.performanceMetrics.duration.toFixed(2), \"ms\"));\n            return {\n                success: true,\n                message: \"\".concat(preview.operation.type, \" operation completed successfully\"),\n                operation: preview.operation\n            };\n        } catch (error) {\n            console.error('ðŸ”„ Sync operation failed:', error);\n            // Mark operation as failed\n            preview.operation.status = 'failed';\n            preview.operation.performanceMetrics.duration = performance.now() - startTime;\n            // Add to history\n            this.syncHistory.operations.push(preview.operation);\n            this.saveSyncHistory();\n            return {\n                success: false,\n                message: error instanceof Error ? error.message : 'Sync operation failed',\n                operation: preview.operation\n            };\n        } finally{\n            this.isOperationInProgress = false;\n        }\n    }\n    // Sync from frontend to admin\n    async syncFromFrontend(changes) {\n        const frontendData = this.getFrontendConfigData();\n        for (const change of changes){\n            switch(change.category){\n                case 'quiz':\n                    await this.applyQuizChanges(change, frontendData.quiz);\n                    break;\n                case 'rewards':\n                    await this.applyRewardChanges(change, frontendData.rewards);\n                    break;\n                case 'systemSettings':\n                    await this.applySystemSettingsChanges(change, frontendData.systemSettings);\n                    break;\n            }\n        }\n        // Update admin timestamps\n        localStorage.setItem('admin_last_sync_from_frontend', Date.now().toString());\n    }\n    // Sync from admin to frontend\n    async syncToFrontend(changes) {\n        const adminData = this.getAdminConfigData();\n        for (const change of changes){\n            switch(change.category){\n                case 'quiz':\n                    await this.pushQuizToFrontend(adminData.quiz);\n                    break;\n                case 'rewards':\n                    await this.pushRewardsToFrontend(adminData.rewards);\n                    break;\n                case 'systemSettings':\n                    await this.pushSystemSettingsToFrontend(adminData.systemSettings);\n                    break;\n            }\n        }\n        // Update frontend timestamps\n        localStorage.setItem('game_last_sync', Date.now().toString());\n    }\n    // Smart sync with conflict resolution\n    async smartSync(changes, conflicts) {\n        // Resolve conflicts first\n        for (const conflict of conflicts){\n            await this.resolveConflict(conflict);\n        }\n        // Apply non-conflicting changes\n        const nonConflictingChanges = changes.filter((change)=>!conflicts.some((conflict)=>conflict.field.includes(change.field)));\n        await this.syncToFrontend(nonConflictingChanges);\n    }\n    // Reset frontend with admin data\n    async resetFrontend() {\n        const adminData = this.getAdminConfigData();\n        // Push all admin data to frontend\n        await this.pushQuizToFrontend(adminData.quiz);\n        await this.pushRewardsToFrontend(adminData.rewards);\n        await this.pushSystemSettingsToFrontend(adminData.systemSettings);\n        // Update timestamps\n        localStorage.setItem('game_last_sync', Date.now().toString());\n        localStorage.setItem('game_reset_timestamp', Date.now().toString());\n    }\n    // Apply quiz changes to admin\n    async applyQuizChanges(change, frontendQuizData) {\n        switch(change.field){\n            case 'questions':\n                // Update admin questions with frontend data\n                localStorage.setItem('admin_quiz_questions', JSON.stringify(frontendQuizData.questions));\n                break;\n            case 'categories':\n                localStorage.setItem('admin_quiz_categories', JSON.stringify(frontendQuizData.categories));\n                break;\n            case 'settings':\n                localStorage.setItem('admin_quiz_settings', JSON.stringify(frontendQuizData.settings));\n                break;\n        }\n        localStorage.setItem('admin_quiz_questions_updated', Date.now().toString());\n    }\n    // Apply reward changes to admin\n    async applyRewardChanges(change, frontendRewardData) {\n        switch(change.field){\n            case 'achievements':\n                localStorage.setItem('admin_reward_achievements', JSON.stringify(frontendRewardData.achievements));\n                break;\n            case 'popupSettings':\n                localStorage.setItem('admin_reward_popup_settings', JSON.stringify(frontendRewardData.popupSettings));\n                break;\n            case 'coinMultipliers':\n                localStorage.setItem('admin_reward_coin_multipliers', JSON.stringify(frontendRewardData.coinMultipliers));\n                break;\n        }\n        localStorage.setItem('admin_reward_config_updated', Date.now().toString());\n    }\n    // Apply system settings changes to admin\n    async applySystemSettingsChanges(change, frontendSettingsData) {\n        switch(change.field){\n            case 'featureFlags':\n                localStorage.setItem('admin_feature_flags', JSON.stringify(frontendSettingsData.featureFlags));\n                break;\n            case 'configValues':\n                localStorage.setItem('admin_system_settings', JSON.stringify(frontendSettingsData.configValues));\n                break;\n            case 'adsConfig':\n                localStorage.setItem('admin_ads_config', JSON.stringify(frontendSettingsData.adsConfig));\n                break;\n        }\n        localStorage.setItem('admin_settings_updated', Date.now().toString());\n    }\n    // Push quiz data to frontend\n    async pushQuizToFrontend(adminQuizData) {\n        localStorage.setItem('game_quiz_data', JSON.stringify(adminQuizData.questions));\n        localStorage.setItem('game_categories', JSON.stringify(adminQuizData.categories));\n        localStorage.setItem('game_quiz_settings', JSON.stringify(adminQuizData.settings));\n        localStorage.setItem('game_quiz_version', adminQuizData.version);\n    }\n    // Push rewards data to frontend\n    async pushRewardsToFrontend(adminRewardData) {\n        localStorage.setItem('game_reward_data', JSON.stringify(adminRewardData.achievements));\n        localStorage.setItem('game_popup_settings', JSON.stringify(adminRewardData.popupSettings));\n        localStorage.setItem('game_coin_multipliers', JSON.stringify(adminRewardData.coinMultipliers));\n        localStorage.setItem('game_rewards_version', adminRewardData.version);\n        localStorage.setItem('game_rewards_sync', Date.now().toString());\n    }\n    // Push system settings to frontend\n    async pushSystemSettingsToFrontend(adminSettingsData) {\n        localStorage.setItem('game_feature_flags', JSON.stringify(adminSettingsData.featureFlags));\n        localStorage.setItem('game_settings_data', JSON.stringify(adminSettingsData.configValues));\n        localStorage.setItem('game_ads_config', JSON.stringify(adminSettingsData.adsConfig));\n        localStorage.setItem('game_settings_version', adminSettingsData.version);\n        localStorage.setItem('game_settings_sync', Date.now().toString());\n    }\n    // Resolve conflict\n    async resolveConflict(conflict) {\n        console.log(\"\\uD83D\\uDD04 Resolving conflict for \".concat(conflict.field, \": \").concat(conflict.resolution));\n        switch(conflict.resolution){\n            case 'use-admin':\n                break;\n            case 'use-frontend':\n                break;\n            case 'merge':\n                // Use merged value if available\n                if (conflict.mergedValue) {\n                // Apply merged value to both admin and frontend\n                }\n                break;\n            case 'manual':\n                // Manual resolution required - throw error to prompt user\n                throw new Error(\"Manual resolution required for \".concat(conflict.field));\n        }\n    }\n    // Create rollback point\n    async createRollbackPoint(description) {\n        const configSnapshot = this.getAdminConfigData();\n        const rollbackPoint = {\n            id: \"rollback-\".concat(Date.now(), \"-\").concat(Math.random().toString(36).substring(2, 8)),\n            timestamp: Date.now(),\n            description,\n            configSnapshot\n        };\n        this.syncHistory.rollbackPoints.push(rollbackPoint);\n        // Keep only last 10 rollback points\n        if (this.syncHistory.rollbackPoints.length > 10) {\n            this.syncHistory.rollbackPoints = this.syncHistory.rollbackPoints.slice(-10);\n        }\n        this.saveSyncHistory();\n        console.log(\"\\uD83D\\uDD04 Rollback point created: \".concat(description));\n    }\n    // Rollback to specific point\n    async rollbackToPoint(rollbackId) {\n        try {\n            const rollbackPoint = this.syncHistory.rollbackPoints.find((rp)=>rp.id === rollbackId);\n            if (!rollbackPoint) {\n                return {\n                    success: false,\n                    message: 'Rollback point not found'\n                };\n            }\n            console.log(\"\\uD83D\\uDD04 Rolling back to: \".concat(rollbackPoint.description));\n            // Restore admin configuration\n            const config = rollbackPoint.configSnapshot;\n            // Restore quiz data\n            localStorage.setItem('admin_quiz_questions', JSON.stringify(config.quiz.questions));\n            localStorage.setItem('admin_quiz_categories', JSON.stringify(config.quiz.categories));\n            localStorage.setItem('admin_quiz_settings', JSON.stringify(config.quiz.settings));\n            // Restore reward data\n            localStorage.setItem('admin_reward_achievements', JSON.stringify(config.rewards.achievements));\n            localStorage.setItem('admin_reward_popup_settings', JSON.stringify(config.rewards.popupSettings));\n            localStorage.setItem('admin_reward_coin_multipliers', JSON.stringify(config.rewards.coinMultipliers));\n            // Restore system settings\n            localStorage.setItem('admin_feature_flags', JSON.stringify(config.systemSettings.featureFlags));\n            localStorage.setItem('admin_system_settings', JSON.stringify(config.systemSettings.configValues));\n            localStorage.setItem('admin_ads_config', JSON.stringify(config.systemSettings.adsConfig));\n            // Update timestamps\n            localStorage.setItem('admin_rollback_timestamp', Date.now().toString());\n            // Create operation record\n            const rollbackOperation = {\n                id: \"rollback-op-\".concat(Date.now()),\n                type: 'push',\n                direction: 'admin-to-frontend',\n                timestamp: Date.now(),\n                changes: [],\n                status: 'completed',\n                riskLevel: 'caution',\n                performanceMetrics: {\n                    duration: 0,\n                    dataSize: JSON.stringify(config).length,\n                    conflictsResolved: 0\n                }\n            };\n            this.syncHistory.operations.push(rollbackOperation);\n            this.saveSyncHistory();\n            return {\n                success: true,\n                message: \"Successfully rolled back to: \".concat(rollbackPoint.description)\n            };\n        } catch (error) {\n            console.error('ðŸ”„ Rollback failed:', error);\n            return {\n                success: false,\n                message: error instanceof Error ? error.message : 'Rollback failed'\n            };\n        }\n    }\n    // Get last operation\n    getLastOperation() {\n        return this.syncHistory.operations.length > 0 ? this.syncHistory.operations[this.syncHistory.operations.length - 1] : null;\n    }\n    // Undo last sync\n    async undoLastSync() {\n        const lastOperation = this.getLastOperation();\n        if (!lastOperation) {\n            return {\n                success: false,\n                message: 'No sync operations to undo'\n            };\n        }\n        if (lastOperation.status === 'rolled-back') {\n            return {\n                success: false,\n                message: 'Last operation was already rolled back'\n            };\n        }\n        // Find the rollback point before the last operation\n        const rollbackPoint = this.syncHistory.rollbackPoints.filter((rp)=>rp.timestamp < lastOperation.timestamp).sort((a, b)=>b.timestamp - a.timestamp)[0];\n        if (!rollbackPoint) {\n            return {\n                success: false,\n                message: 'No rollback point available before last operation'\n            };\n        }\n        const result = await this.rollbackToPoint(rollbackPoint.id);\n        if (result.success) {\n            // Mark last operation as rolled back\n            lastOperation.status = 'rolled-back';\n            this.saveSyncHistory();\n        }\n        return result;\n    }\n    // Check if operation is in progress\n    isOperationInProgress() {\n        return this.isOperationInProgress;\n    }\n    constructor(){\n        this.syncHistory = {\n            operations: [],\n            rollbackPoints: []\n        };\n        this.listeners = [];\n        this.isOperationInProgress = false;\n        if (true) {\n            this.loadSyncHistory();\n            this.setupStorageListeners();\n        }\n    }\n}\n// Export singleton instance\nconst bidirectionalSync = BidirectionalSyncService.getInstance();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy91dGlscy9iaWRpcmVjdGlvbmFsU3luYy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEseUVBQXlFO0FBQ3RCO0FBQ0k7QUFDSTtBQThGM0QsTUFBTUc7SUFNSixPQUFPQyxjQUF3QztRQUM3QyxJQUFJLENBQUNELHlCQUF5QkUsUUFBUSxFQUFFO1lBQ3RDRix5QkFBeUJFLFFBQVEsR0FBRyxJQUFJRjtRQUMxQztRQUNBLE9BQU9BLHlCQUF5QkUsUUFBUTtJQUMxQztJQVNBLHVDQUF1QztJQUMvQkMscUJBQWlDO1FBQ3ZDLE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7UUFFcEIsT0FBTztZQUNMRSxNQUFNO2dCQUNKQyxXQUFXViw2REFBZUEsQ0FBQ1csWUFBWSxNQUFNLEVBQUU7Z0JBQy9DQyxZQUFZWiw2REFBZUEsQ0FBQ2EsYUFBYSxNQUFNLEVBQUU7Z0JBQ2pEQyxVQUFVZCw2REFBZUEsQ0FBQ2UsV0FBVyxNQUFNLENBQUM7Z0JBQzVDQyxjQUFjQyxTQUFTQyxhQUFhQyxPQUFPLENBQUMsbUNBQW1DWixJQUFJYSxRQUFRO2dCQUMzRkMsU0FBUyxJQUFJLENBQUNDLGVBQWUsQ0FBQztZQUNoQztZQUNBQyxTQUFTO2dCQUNQQyxjQUFjdkIsaUVBQWlCQSxDQUFDd0IsZUFBZSxNQUFNLEVBQUU7Z0JBQ3ZEQyxlQUFlekIsaUVBQWlCQSxDQUFDMEIsZUFBZSxHQUFHRCxhQUFhLElBQUksQ0FBQztnQkFDckVFLGlCQUFpQjNCLGlFQUFpQkEsQ0FBQzBCLGVBQWUsR0FBR0UsVUFBVSxJQUFJLENBQUM7Z0JBQ3BFYixjQUFjQyxTQUFTQyxhQUFhQyxPQUFPLENBQUMsa0NBQWtDWixJQUFJYSxRQUFRO2dCQUMxRkMsU0FBUyxJQUFJLENBQUNDLGVBQWUsQ0FBQztZQUNoQztZQUNBUSxnQkFBZ0I7Z0JBQ2RDLGNBQWM3QixxRUFBbUJBLENBQUM4QixpQkFBaUIsR0FBR0QsWUFBWSxJQUFJLENBQUM7Z0JBQ3ZFRSxjQUFjL0Is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QyxJQUFNQSxFQUFFNUssU0FBUyxHQUFHMkssRUFBRTNLLFNBQVMsQ0FBQyxDQUFDLEVBQUU7UUFFL0MsSUFBSSxDQUFDK0osZUFBZTtZQUNsQixPQUFPO2dCQUFFM0IsU0FBUztnQkFBT0MsU0FBUztZQUFvRDtRQUN4RjtRQUVBLE1BQU13QyxTQUFTLE1BQU0sSUFBSSxDQUFDWixlQUFlLENBQUNGLGNBQWN4SCxFQUFFO1FBRTFELElBQUlzSSxPQUFPekMsT0FBTyxFQUFFO1lBQ2xCLHFDQUFxQztZQUNyQ3FDLGNBQWM5RSxNQUFNLEdBQUc7WUFDdkIsSUFBSSxDQUFDOEIsZUFBZTtRQUN0QjtRQUVBLE9BQU9vRDtJQUNUO0lBRUEsb0NBQW9DO0lBQ3BDMUMsd0JBQWlDO1FBQy9CLE9BQU8sSUFBSSxDQUFDQSxxQkFBcUI7SUFDbkM7SUF0OEJBLGFBQWM7YUFYTmIsY0FBMkI7WUFBRUMsWUFBWSxFQUFFO1lBQUVDLGdCQUFnQixFQUFFO1FBQUM7YUFDaEVLLFlBQWdELEVBQUU7YUFDbERNLHdCQUF3QjtRQVU5QixJQUFJLElBQTZCLEVBQUU7WUFDakMsSUFBSSxDQUFDZixlQUFlO1lBQ3BCLElBQUksQ0FBQ04scUJBQXFCO1FBQzVCO0lBQ0Y7QUFrOEJGO0FBRUEsNEJBQTRCO0FBQ3JCLE1BQU1nRSxvQkFBb0J2Tix5QkFBeUJDLFdBQVcsR0FBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2phc2VlbS9Eb2N1bWVudHMvR2l0SHViL1RlY2hrd2l6LXY3L2Zyb250ZW5kL3NyYy91dGlscy9iaWRpcmVjdGlvbmFsU3luYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBCaWRpcmVjdGlvbmFsIERhdGEgU3luY2hyb25pemF0aW9uIFN5c3RlbSBmb3IgVGVjaEt3aXogQWRtaW4gRGFzaGJvYXJkXG5pbXBvcnQgeyBxdWl6RGF0YU1hbmFnZXIgfSBmcm9tICcuL3F1aXpEYXRhTWFuYWdlcidcbmltcG9ydCB7IHJld2FyZERhdGFNYW5hZ2VyIH0gZnJvbSAnLi9yZXdhcmREYXRhTWFuYWdlcidcbmltcG9ydCB7IHNldHRpbmdzRGF0YU1hbmFnZXIgfSBmcm9tICcuL3NldHRpbmdzRGF0YU1hbmFnZXInXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlnRGF0YSB7XG4gIHF1aXo6IHtcbiAgICBxdWVzdGlvbnM6IGFueVtdXG4gICAgY2F0ZWdvcmllczogYW55W11cbiAgICBzZXR0aW5nczogYW55XG4gICAgbGFzdE1vZGlmaWVkOiBudW1iZXJcbiAgICB2ZXJzaW9uOiBzdHJpbmdcbiAgfVxuICByZXdhcmRzOiB7XG4gICAgYWNoaWV2ZW1lbnRzOiBhbnlbXVxuICAgIHBvcHVwU2V0dGluZ3M6IGFueVxuICAgIGNvaW5NdWx0aXBsaWVyczogYW55XG4gICAgbGFzdE1vZGlmaWVkOiBudW1iZXJcbiAgICB2ZXJzaW9uOiBzdHJpbmdcbiAgfVxuICBzeXN0ZW1TZXR0aW5nczoge1xuICAgIGZlYXR1cmVGbGFnczogYW55XG4gICAgY29uZmlnVmFsdWVzOiBhbnlcbiAgICBhZHNDb25maWc6IGFueVxuICAgIGxhc3RNb2RpZmllZDogbnVtYmVyXG4gICAgdmVyc2lvbjogc3RyaW5nXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTeW5jT3BlcmF0aW9uIHtcbiAgaWQ6IHN0cmluZ1xuICB0eXBlOiAncHVsbCcgfCAncHVzaCcgfCAnc21hcnQnIHwgJ3Jlc2V0J1xuICBkaXJlY3Rpb246ICdhZG1pbi10by1mcm9udGVuZCcgfCAnZnJvbnRlbmQtdG8tYWRtaW4nIHwgJ2JpZGlyZWN0aW9uYWwnXG4gIHRpbWVzdGFtcDogbnVtYmVyXG4gIGNoYW5nZXM6IENoYW5nZUl0ZW1bXVxuICBzdGF0dXM6ICdwZW5kaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCcgfCAncm9sbGVkLWJhY2snXG4gIHJpc2tMZXZlbDogJ3NhZmUnIHwgJ2NhdXRpb24nIHwgJ2Rlc3RydWN0aXZlJ1xuICBwZXJmb3JtYW5jZU1ldHJpY3M6IHtcbiAgICBkdXJhdGlvbjogbnVtYmVyXG4gICAgZGF0YVNpemU6IG51bWJlclxuICAgIGNvbmZsaWN0c1Jlc29sdmVkOiBudW1iZXJcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYW5nZUl0ZW0ge1xuICBjYXRlZ29yeTogJ3F1aXonIHwgJ3Jld2FyZHMnIHwgJ3N5c3RlbVNldHRpbmdzJ1xuICBmaWVsZDogc3RyaW5nXG4gIGFjdGlvbjogJ2FkZCcgfCAnbW9kaWZ5JyB8ICdkZWxldGUnIHwgJ3JlbW92ZSdcbiAgb2xkVmFsdWU6IGFueVxuICBuZXdWYWx1ZTogYW55XG4gIHJpc2tMZXZlbDogJ3NhZmUnIHwgJ2NhdXRpb24nIHwgJ2Rlc3RydWN0aXZlJ1xuICBpbXBhY3Q6IHN0cmluZ1xuICBkZXRhaWxzPzoge1xuICAgIHF1ZXN0aW9ucz86IGFueVtdXG4gICAgYWRkZWQ/OiBhbnlbXVxuICAgIHJlbW92ZWQ/OiBhbnlbXVxuICAgIHNldHRpbmdzQ2hhbmdlZD86IGFueVxuICAgIFtrZXk6IHN0cmluZ106IGFueVxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmxpY3RSZXNvbHV0aW9uIHtcbiAgZmllbGQ6IHN0cmluZ1xuICBhZG1pblZhbHVlOiBhbnlcbiAgZnJvbnRlbmRWYWx1ZTogYW55XG4gIGFkbWluVGltZXN0YW1wOiBudW1iZXJcbiAgZnJvbnRlbmRUaW1lc3RhbXA6IG51bWJlclxuICByZXNvbHV0aW9uOiAndXNlLWFkbWluJyB8ICd1c2UtZnJvbnRlbmQnIHwgJ21lcmdlJyB8ICdtYW51YWwnXG4gIG1lcmdlZFZhbHVlPzogYW55XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3luY1ByZXZpZXcge1xuICBvcGVyYXRpb246IFN5bmNPcGVyYXRpb25cbiAgY29uZmxpY3RzOiBDb25mbGljdFJlc29sdXRpb25bXVxuICBzdW1tYXJ5OiB7XG4gICAgdG90YWxDaGFuZ2VzOiBudW1iZXJcbiAgICBzYWZlQ2hhbmdlczogbnVtYmVyXG4gICAgY2F1dGlvbkNoYW5nZXM6IG51bWJlclxuICAgIGRlc3RydWN0aXZlQ2hhbmdlczogbnVtYmVyXG4gICAgZXN0aW1hdGVkRHVyYXRpb246IG51bWJlclxuICB9XG4gIGRhdGFGcmVzaG5lc3M6IHtcbiAgICBhZG1pbjogJ2ZyZXNoJyB8ICdzdGFsZScgfCAnb3V0ZGF0ZWQnXG4gICAgZnJvbnRlbmQ6ICdmcmVzaCcgfCAnc3RhbGUnIHwgJ291dGRhdGVkJ1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3luY0hpc3Rvcnkge1xuICBvcGVyYXRpb25zOiBTeW5jT3BlcmF0aW9uW11cbiAgcm9sbGJhY2tQb2ludHM6IEFycmF5PHtcbiAgICBpZDogc3RyaW5nXG4gICAgdGltZXN0YW1wOiBudW1iZXJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gICAgY29uZmlnU25hcHNob3Q6IENvbmZpZ0RhdGFcbiAgfT5cbn1cblxuY2xhc3MgQmlkaXJlY3Rpb25hbFN5bmNTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEJpZGlyZWN0aW9uYWxTeW5jU2VydmljZVxuICBwcml2YXRlIHN5bmNIaXN0b3J5OiBTeW5jSGlzdG9yeSA9IHsgb3BlcmF0aW9uczogW10sIHJvbGxiYWNrUG9pbnRzOiBbXSB9XG4gIHByaXZhdGUgbGlzdGVuZXJzOiAoKHByZXZpZXc6IFN5bmNQcmV2aWV3KSA9PiB2b2lkKVtdID0gW11cbiAgcHJpdmF0ZSBpc09wZXJhdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZVxuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBCaWRpcmVjdGlvbmFsU3luY1NlcnZpY2Uge1xuICAgIGlmICghQmlkaXJlY3Rpb25hbFN5bmNTZXJ2aWNlLmluc3RhbmNlKSB7XG4gICAgICBCaWRpcmVjdGlvbmFsU3luY1NlcnZpY2UuaW5zdGFuY2UgPSBuZXcgQmlkaXJlY3Rpb25hbFN5bmNTZXJ2aWNlKClcbiAgICB9XG4gICAgcmV0dXJuIEJpZGlyZWN0aW9uYWxTeW5jU2VydmljZS5pbnN0YW5jZVxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmxvYWRTeW5jSGlzdG9yeSgpXG4gICAgICB0aGlzLnNldHVwU3RvcmFnZUxpc3RlbmVycygpXG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGN1cnJlbnQgYWRtaW4gY29uZmlndXJhdGlvbiBkYXRhXG4gIHByaXZhdGUgZ2V0QWRtaW5Db25maWdEYXRhKCk6IENvbmZpZ0RhdGEge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcXVpejoge1xuICAgICAgICBxdWVzdGlvbnM6IHF1aXpEYXRhTWFuYWdlci5nZXRRdWVzdGlvbnMoKSB8fCBbXSxcbiAgICAgICAgY2F0ZWdvcmllczogcXVpekRhdGFNYW5hZ2VyLmdldENhdGVnb3JpZXMoKSB8fCBbXSxcbiAgICAgICAgc2V0dGluZ3M6IHF1aXpEYXRhTWFuYWdlci5nZXRTZXR0aW5ncygpIHx8IHt9LFxuICAgICAgICBsYXN0TW9kaWZpZWQ6IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhZG1pbl9xdWl6X3F1ZXN0aW9uc191cGRhdGVkJykgfHwgbm93LnRvU3RyaW5nKCkpLFxuICAgICAgICB2ZXJzaW9uOiB0aGlzLmdlbmVyYXRlVmVyc2lvbigncXVpeicpXG4gICAgICB9LFxuICAgICAgcmV3YXJkczoge1xuICAgICAgICBhY2hpZXZlbWVudHM6IHJld2FyZERhdGFNYW5hZ2VyLmdldEFjaGlldmVtZW50cygpIHx8IFtdLFxuICAgICAgICBwb3B1cFNldHRpbmdzOiByZXdhcmREYXRhTWFuYWdlci5nZXRSZXdhcmRDb25maWcoKS5wb3B1cFNldHRpbmdzIHx8IHt9LFxuICAgICAgICBjb2luTXVsdGlwbGllcnM6IHJld2FyZERhdGFNYW5hZ2VyLmdldFJld2FyZENvbmZpZygpLmNvaW5WYWx1ZXMgfHwge30sXG4gICAgICAgIGxhc3RNb2RpZmllZDogcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FkbWluX3Jld2FyZF9jb25maWdfdXBkYXRlZCcpIHx8IG5vdy50b1N0cmluZygpKSxcbiAgICAgICAgdmVyc2lvbjogdGhpcy5nZW5lcmF0ZVZlcnNpb24oJ3Jld2FyZHMnKVxuICAgICAgfSxcbiAgICAgIHN5c3RlbVNldHRpbmdzOiB7XG4gICAgICAgIGZlYXR1cmVGbGFnczogc2V0dGluZ3NEYXRhTWFuYWdlci5nZXRTeXN0ZW1TZXR0aW5ncygpLmZlYXR1cmVGbGFncyB8fCB7fSxcbiAgICAgICAgY29uZmlnVmFsdWVzOiBzZXR0aW5nc0RhdGFNYW5hZ2VyLmdldFN5c3RlbVNldHRpbmdzKCkgfHwge30sXG4gICAgICAgIGFkc0NvbmZpZzogc2V0dGluZ3NEYXRhTWFuYWdlci5nZXRJbnRlZ3JhdGlvblNldHRpbmdzKCkuYWRzZW5zZSB8fCB7fSxcbiAgICAgICAgbGFzdE1vZGlmaWVkOiBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWRtaW5fc2V0dGluZ3NfdXBkYXRlZCcpIHx8IG5vdy50b1N0cmluZygpKSxcbiAgICAgICAgdmVyc2lvbjogdGhpcy5nZW5lcmF0ZVZlcnNpb24oJ3N5c3RlbVNldHRpbmdzJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBHZXQgY3VycmVudCBmcm9udGVuZCBjb25maWd1cmF0aW9uIGRhdGFcbiAgcHJpdmF0ZSBnZXRGcm9udGVuZENvbmZpZ0RhdGEoKTogQ29uZmlnRGF0YSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgIFxuICAgIHRyeSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBxdWl6OiB7XG4gICAgICAgICAgcXVlc3Rpb25zOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX3F1aXpfZGF0YScpIHx8ICdbXScpLFxuICAgICAgICAgIGNhdGVnb3JpZXM6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfY2F0ZWdvcmllcycpIHx8ICdbXScpLFxuICAgICAgICAgIHNldHRpbmdzOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX3F1aXpfc2V0dGluZ3MnKSB8fCAne30nKSxcbiAgICAgICAgICBsYXN0TW9kaWZpZWQ6IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX2xhc3Rfc3luYycpIHx8IG5vdy50b1N0cmluZygpKSxcbiAgICAgICAgICB2ZXJzaW9uOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZV9xdWl6X3ZlcnNpb24nKSB8fCAnMS4wLjAnXG4gICAgICAgIH0sXG4gICAgICAgIHJld2FyZHM6IHtcbiAgICAgICAgICBhY2hpZXZlbWVudHM6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfcmV3YXJkX2RhdGEnKSB8fCAnW10nKSxcbiAgICAgICAgICBwb3B1cFNldHRpbmdzOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX3BvcHVwX3NldHRpbmdzJykgfHwgJ3t9JyksXG4gICAgICAgICAgY29pbk11bHRpcGxpZXJzOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX2NvaW5fbXVsdGlwbGllcnMnKSB8fCAne30nKSxcbiAgICAgICAgICBsYXN0TW9kaWZpZWQ6IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX3Jld2FyZHNfc3luYycpIHx8IG5vdy50b1N0cmluZygpKSxcbiAgICAgICAgICB2ZXJzaW9uOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZV9yZXdhcmRzX3ZlcnNpb24nKSB8fCAnMS4wLjAnXG4gICAgICAgIH0sXG4gICAgICAgIHN5c3RlbVNldHRpbmdzOiB7XG4gICAgICAgICAgZmVhdHVyZUZsYWdzOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX2ZlYXR1cmVfZmxhZ3MnKSB8fCAne30nKSxcbiAgICAgICAgICBjb25maWdWYWx1ZXM6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfc2V0dGluZ3NfZGF0YScpIHx8ICd7fScpLFxuICAgICAgICAgIGFkc0NvbmZpZzogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZV9hZHNfY29uZmlnJykgfHwgJ3t9JyksXG4gICAgICAgICAgbGFzdE1vZGlmaWVkOiBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZV9zZXR0aW5nc19zeW5jJykgfHwgbm93LnRvU3RyaW5nKCkpLFxuICAgICAgICAgIHZlcnNpb246IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX3NldHRpbmdzX3ZlcnNpb24nKSB8fCAnMS4wLjAnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBmcm9udGVuZCBjb25maWcgZGF0YTonLCBlcnJvcilcbiAgICAgIHJldHVybiB0aGlzLmdldERlZmF1bHRDb25maWdEYXRhKClcbiAgICB9XG4gIH1cblxuICAvLyBHZW5lcmF0ZSB2ZXJzaW9uIHN0cmluZyBiYXNlZCBvbiBkYXRhIGhhc2hcbiAgcHJpdmF0ZSBnZW5lcmF0ZVZlcnNpb24oY2F0ZWdvcnk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKVxuICAgIGNvbnN0IGhhc2ggPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOClcbiAgICByZXR1cm4gYCR7Y2F0ZWdvcnl9LSR7dGltZXN0YW1wfS0ke2hhc2h9YFxuICB9XG5cbiAgLy8gR2V0IGRlZmF1bHQgY29uZmlndXJhdGlvbiBkYXRhXG4gIHByaXZhdGUgZ2V0RGVmYXVsdENvbmZpZ0RhdGEoKTogQ29uZmlnRGF0YSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgIHJldHVybiB7XG4gICAgICBxdWl6OiB7XG4gICAgICAgIHF1ZXN0aW9uczogW10sXG4gICAgICAgIGNhdGVnb3JpZXM6IFtdLFxuICAgICAgICBzZXR0aW5nczoge30sXG4gICAgICAgIGxhc3RNb2RpZmllZDogbm93LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnXG4gICAgICB9LFxuICAgICAgcmV3YXJkczoge1xuICAgICAgICBhY2hpZXZlbWVudHM6IFtdLFxuICAgICAgICBwb3B1cFNldHRpbmdzOiB7fSxcbiAgICAgICAgY29pbk11bHRpcGxpZXJzOiB7fSxcbiAgICAgICAgbGFzdE1vZGlmaWVkOiBub3csXG4gICAgICAgIHZlcnNpb246ICcxLjAuMCdcbiAgICAgIH0sXG4gICAgICBzeXN0ZW1TZXR0aW5nczoge1xuICAgICAgICBmZWF0dXJlRmxhZ3M6IHt9LFxuICAgICAgICBjb25maWdWYWx1ZXM6IHt9LFxuICAgICAgICBhZHNDb25maWc6IHt9LFxuICAgICAgICBsYXN0TW9kaWZpZWQ6IG5vdyxcbiAgICAgICAgdmVyc2lvbjogJzEuMC4wJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIERldGVjdCBjaGFuZ2VzIGJldHdlZW4gYWRtaW4gYW5kIGZyb250ZW5kIGRhdGFcbiAgZGV0ZWN0Q2hhbmdlcyhhZG1pbkRhdGE6IENvbmZpZ0RhdGEsIGZyb250ZW5kRGF0YTogQ29uZmlnRGF0YSk6IENoYW5nZUl0ZW1bXSB7XG4gICAgY29uc3QgY2hhbmdlczogQ2hhbmdlSXRlbVtdID0gW11cblxuICAgIC8vIENvbXBhcmUgcXVpeiBkYXRhXG4gICAgY2hhbmdlcy5wdXNoKC4uLnRoaXMuY29tcGFyZVF1aXpEYXRhKGFkbWluRGF0YS5xdWl6LCBmcm9udGVuZERhdGEucXVpeikpXG4gICAgXG4gICAgLy8gQ29tcGFyZSByZXdhcmRzIGRhdGFcbiAgICBjaGFuZ2VzLnB1c2goLi4udGhpcy5jb21wYXJlUmV3YXJkc0RhdGEoYWRtaW5EYXRhLnJld2FyZHMsIGZyb250ZW5kRGF0YS5yZXdhcmRzKSlcbiAgICBcbiAgICAvLyBDb21wYXJlIHN5c3RlbSBzZXR0aW5nc1xuICAgIGNoYW5nZXMucHVzaCguLi50aGlzLmNvbXBhcmVTeXN0ZW1TZXR0aW5ncyhhZG1pbkRhdGEuc3lzdGVtU2V0dGluZ3MsIGZyb250ZW5kRGF0YS5zeXN0ZW1TZXR0aW5ncykpXG5cbiAgICByZXR1cm4gY2hhbmdlc1xuICB9XG5cbiAgLy8gQ29tcGFyZSBxdWl6IGRhdGEgd2l0aCBkZXRhaWxlZCBxdWVzdGlvbi1sZXZlbCBhbmFseXNpc1xuICBwcml2YXRlIGNvbXBhcmVRdWl6RGF0YShhZG1pbjogYW55LCBmcm9udGVuZDogYW55KTogQ2hhbmdlSXRlbVtdIHtcbiAgICBjb25zdCBjaGFuZ2VzOiBDaGFuZ2VJdGVtW10gPSBbXVxuXG4gICAgLy8gRGV0YWlsZWQgcXVlc3Rpb24gY29tcGFyaXNvblxuICAgIGNvbnN0IHF1ZXN0aW9uQ2hhbmdlcyA9IHRoaXMuY29tcGFyZVF1ZXN0aW9ucyhhZG1pbi5xdWVzdGlvbnMgfHwgW10sIGZyb250ZW5kLnF1ZXN0aW9ucyB8fCBbXSlcbiAgICBjaGFuZ2VzLnB1c2goLi4ucXVlc3Rpb25DaGFuZ2VzKVxuXG4gICAgLy8gQ29tcGFyZSBjYXRlZ29yaWVzXG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGFkbWluLmNhdGVnb3JpZXMpICE9PSBKU09OLnN0cmluZ2lmeShmcm9udGVuZC5jYXRlZ29yaWVzKSkge1xuICAgICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgY2F0ZWdvcnk6ICdxdWl6JyxcbiAgICAgICAgZmllbGQ6ICdjYXRlZ29yaWVzJyxcbiAgICAgICAgYWN0aW9uOiAnbW9kaWZ5JyxcbiAgICAgICAgb2xkVmFsdWU6IGZyb250ZW5kLmNhdGVnb3JpZXMsXG4gICAgICAgIG5ld1ZhbHVlOiBhZG1pbi5jYXRlZ29yaWVzLFxuICAgICAgICByaXNrTGV2ZWw6ICdzYWZlJyxcbiAgICAgICAgaW1wYWN0OiBgQ2F0ZWdvcmllczogJHtmcm9udGVuZC5jYXRlZ29yaWVzLmxlbmd0aH0g4oaSICR7YWRtaW4uY2F0ZWdvcmllcy5sZW5ndGh9YCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGFkZGVkOiBhZG1pbi5jYXRlZ29yaWVzLmZpbHRlcigoY2F0OiBzdHJpbmcpID0+ICFmcm9udGVuZC5jYXRlZ29yaWVzLmluY2x1ZGVzKGNhdCkpLFxuICAgICAgICAgIHJlbW92ZWQ6IGZyb250ZW5kLmNhdGVnb3JpZXMuZmlsdGVyKChjYXQ6IHN0cmluZykgPT4gIWFkbWluLmNhdGVnb3JpZXMuaW5jbHVkZXMoY2F0KSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBDb21wYXJlIHNldHRpbmdzXG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGFkbWluLnNldHRpbmdzKSAhPT0gSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmQuc2V0dGluZ3MpKSB7XG4gICAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgICBjYXRlZ29yeTogJ3F1aXonLFxuICAgICAgICBmaWVsZDogJ3NldHRpbmdzJyxcbiAgICAgICAgYWN0aW9uOiAnbW9kaWZ5JyxcbiAgICAgICAgb2xkVmFsdWU6IGZyb250ZW5kLnNldHRpbmdzLFxuICAgICAgICBuZXdWYWx1ZTogYWRtaW4uc2V0dGluZ3MsXG4gICAgICAgIHJpc2tMZXZlbDogJ2NhdXRpb24nLFxuICAgICAgICBpbXBhY3Q6ICdRdWl6IHNldHRpbmdzIGNvbmZpZ3VyYXRpb24gdXBkYXRlZCcsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBzZXR0aW5nc0NoYW5nZWQ6IHRoaXMuZ2V0U2V0dGluZ3NDaGFuZ2VzKGZyb250ZW5kLnNldHRpbmdzLCBhZG1pbi5zZXR0aW5ncylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gY2hhbmdlc1xuICB9XG5cbiAgLy8gRGV0YWlsZWQgcXVlc3Rpb24gY29tcGFyaXNvbiBhdCBpbmRpdmlkdWFsIHF1ZXN0aW9uIGxldmVsXG4gIHByaXZhdGUgY29tcGFyZVF1ZXN0aW9ucyhhZG1pblF1ZXN0aW9uczogYW55W10sIGZyb250ZW5kUXVlc3Rpb25zOiBhbnlbXSk6IENoYW5nZUl0ZW1bXSB7XG4gICAgY29uc3QgY2hhbmdlczogQ2hhbmdlSXRlbVtdID0gW11cblxuICAgIC8vIENyZWF0ZSBtYXBzIGZvciBlZmZpY2llbnQgbG9va3VwXG4gICAgY29uc3QgYWRtaW5NYXAgPSBuZXcgTWFwKGFkbWluUXVlc3Rpb25zLm1hcChxID0+IFtxLmlkLCBxXSkpXG4gICAgY29uc3QgZnJvbnRlbmRNYXAgPSBuZXcgTWFwKGZyb250ZW5kUXVlc3Rpb25zLm1hcChxID0+IFtxLmlkLCBxXSkpXG5cbiAgICAvLyBGaW5kIGFkZGVkIHF1ZXN0aW9ucyAoaW4gYWRtaW4gYnV0IG5vdCBpbiBmcm9udGVuZClcbiAgICBjb25zdCBhZGRlZFF1ZXN0aW9ucyA9IGFkbWluUXVlc3Rpb25zLmZpbHRlcihxID0+ICFmcm9udGVuZE1hcC5oYXMocS5pZCkpXG4gICAgaWYgKGFkZGVkUXVlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgIGNhdGVnb3J5OiAncXVpeicsXG4gICAgICAgIGZpZWxkOiAncXVlc3Rpb25zJyxcbiAgICAgICAgYWN0aW9uOiAnYWRkJyxcbiAgICAgICAgb2xkVmFsdWU6IG51bGwsXG4gICAgICAgIG5ld1ZhbHVlOiBhZGRlZFF1ZXN0aW9ucyxcbiAgICAgICAgcmlza0xldmVsOiAnc2FmZScsXG4gICAgICAgIGltcGFjdDogYEFkZGluZyAke2FkZGVkUXVlc3Rpb25zLmxlbmd0aH0gbmV3IHF1ZXN0aW9uJHthZGRlZFF1ZXN0aW9ucy5sZW5ndGggPiAxID8gJ3MnIDogJyd9YCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHF1ZXN0aW9uczogYWRkZWRRdWVzdGlvbnMubWFwKHEgPT4gKHtcbiAgICAgICAgICAgIGlkOiBxLmlkLFxuICAgICAgICAgICAgcXVlc3Rpb246IHEucXVlc3Rpb24sXG4gICAgICAgICAgICBjYXRlZ29yeTogcS5jYXRlZ29yeSxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHEuZGlmZmljdWx0eSxcbiAgICAgICAgICAgIHR5cGU6IHEudHlwZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IHEub3B0aW9ucyxcbiAgICAgICAgICAgIGNvcnJlY3RBbnN3ZXI6IHEuY29ycmVjdEFuc3dlcixcbiAgICAgICAgICAgIGZ1bkZhY3Q6IHEuZnVuRmFjdCxcbiAgICAgICAgICAgIHRhZ3M6IHEudGFnc1xuICAgICAgICAgIH0pKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIEZpbmQgcmVtb3ZlZCBxdWVzdGlvbnMgKGluIGZyb250ZW5kIGJ1dCBub3QgaW4gYWRtaW4pXG4gICAgY29uc3QgcmVtb3ZlZFF1ZXN0aW9ucyA9IGZyb250ZW5kUXVlc3Rpb25zLmZpbHRlcihxID0+ICFhZG1pbk1hcC5oYXMocS5pZCkpXG4gICAgaWYgKHJlbW92ZWRRdWVzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgY2F0ZWdvcnk6ICdxdWl6JyxcbiAgICAgICAgZmllbGQ6ICdxdWVzdGlvbnMnLFxuICAgICAgICBhY3Rpb246ICdyZW1vdmUnLFxuICAgICAgICBvbGRWYWx1ZTogcmVtb3ZlZFF1ZXN0aW9ucyxcbiAgICAgICAgbmV3VmFsdWU6IG51bGwsXG4gICAgICAgIHJpc2tMZXZlbDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgICAgaW1wYWN0OiBgUmVtb3ZpbmcgJHtyZW1vdmVkUXVlc3Rpb25zLmxlbmd0aH0gcXVlc3Rpb24ke3JlbW92ZWRRdWVzdGlvbnMubGVuZ3RoID4gMSA/ICdzJyA6ICcnfWAsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBxdWVzdGlvbnM6IHJlbW92ZWRRdWVzdGlvbnMubWFwKHEgPT4gKHtcbiAgICAgICAgICAgIGlkOiBxLmlkLFxuICAgICAgICAgICAgcXVlc3Rpb246IHEucXVlc3Rpb24sXG4gICAgICAgICAgICBjYXRlZ29yeTogcS5jYXRlZ29yeSxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHEuZGlmZmljdWx0eSxcbiAgICAgICAgICAgIHR5cGU6IHEudHlwZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IHEub3B0aW9ucyxcbiAgICAgICAgICAgIGNvcnJlY3RBbnN3ZXI6IHEuY29ycmVjdEFuc3dlcixcbiAgICAgICAgICAgIGZ1bkZhY3Q6IHEuZnVuRmFjdCxcbiAgICAgICAgICAgIHRhZ3M6IHEudGFnc1xuICAgICAgICAgIH0pKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIEZpbmQgbW9kaWZpZWQgcXVlc3Rpb25zIChzYW1lIElEIGJ1dCBkaWZmZXJlbnQgY29udGVudClcbiAgICBjb25zdCBtb2RpZmllZFF1ZXN0aW9uczogYW55W10gPSBbXVxuICAgIGZvciAoY29uc3QgYWRtaW5RIG9mIGFkbWluUXVlc3Rpb25zKSB7XG4gICAgICBjb25zdCBmcm9udGVuZFEgPSBmcm9udGVuZE1hcC5nZXQoYWRtaW5RLmlkKVxuICAgICAgaWYgKGZyb250ZW5kUSAmJiBKU09OLnN0cmluZ2lmeShhZG1pblEpICE9PSBKU09OLnN0cmluZ2lmeShmcm9udGVuZFEpKSB7XG4gICAgICAgIGNvbnN0IHF1ZXN0aW9uRGlmZiA9IHRoaXMuZ2V0UXVlc3Rpb25EaWZmKGZyb250ZW5kUSwgYWRtaW5RKVxuICAgICAgICBtb2RpZmllZFF1ZXN0aW9ucy5wdXNoKHtcbiAgICAgICAgICBpZDogYWRtaW5RLmlkLFxuICAgICAgICAgIG9sZFF1ZXN0aW9uOiBmcm9udGVuZFEsXG4gICAgICAgICAgbmV3UXVlc3Rpb246IGFkbWluUSxcbiAgICAgICAgICBjaGFuZ2VzOiBxdWVzdGlvbkRpZmZcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobW9kaWZpZWRRdWVzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgY2F0ZWdvcnk6ICdxdWl6JyxcbiAgICAgICAgZmllbGQ6ICdxdWVzdGlvbnMnLFxuICAgICAgICBhY3Rpb246ICdtb2RpZnknLFxuICAgICAgICBvbGRWYWx1ZTogbW9kaWZpZWRRdWVzdGlvbnMubWFwKG0gPT4gbS5vbGRRdWVzdGlvbiksXG4gICAgICAgIG5ld1ZhbHVlOiBtb2RpZmllZFF1ZXN0aW9ucy5tYXAobSA9PiBtLm5ld1F1ZXN0aW9uKSxcbiAgICAgICAgcmlza0xldmVsOiAnY2F1dGlvbicsXG4gICAgICAgIGltcGFjdDogYE1vZGlmeWluZyAke21vZGlmaWVkUXVlc3Rpb25zLmxlbmd0aH0gcXVlc3Rpb24ke21vZGlmaWVkUXVlc3Rpb25zLmxlbmd0aCA+IDEgPyAncycgOiAnJ31gLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgcXVlc3Rpb25zOiBtb2RpZmllZFF1ZXN0aW9uc1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBjaGFuZ2VzXG4gIH1cblxuICAvLyBHZXQgZGV0YWlsZWQgZGlmZiBmb3IgYSBzaW5nbGUgcXVlc3Rpb25cbiAgcHJpdmF0ZSBnZXRRdWVzdGlvbkRpZmYob2xkUXVlc3Rpb246IGFueSwgbmV3UXVlc3Rpb246IGFueSk6IGFueSB7XG4gICAgY29uc3QgZGlmZjogYW55ID0ge31cblxuICAgIGlmIChvbGRRdWVzdGlvbi5xdWVzdGlvbiAhPT0gbmV3UXVlc3Rpb24ucXVlc3Rpb24pIHtcbiAgICAgIGRpZmYucXVlc3Rpb24gPSB7IG9sZDogb2xkUXVlc3Rpb24ucXVlc3Rpb24sIG5ldzogbmV3UXVlc3Rpb24ucXVlc3Rpb24gfVxuICAgIH1cblxuICAgIGlmIChKU09OLnN0cmluZ2lmeShvbGRRdWVzdGlvbi5vcHRpb25zKSAhPT0gSlNPTi5zdHJpbmdpZnkobmV3UXVlc3Rpb24ub3B0aW9ucykpIHtcbiAgICAgIGRpZmYub3B0aW9ucyA9IHsgb2xkOiBvbGRRdWVzdGlvbi5vcHRpb25zLCBuZXc6IG5ld1F1ZXN0aW9uLm9wdGlvbnMgfVxuICAgIH1cblxuICAgIGlmIChvbGRRdWVzdGlvbi5jb3JyZWN0QW5zd2VyICE9PSBuZXdRdWVzdGlvbi5jb3JyZWN0QW5zd2VyKSB7XG4gICAgICBkaWZmLmNvcnJlY3RBbnN3ZXIgPSB7XG4gICAgICAgIG9sZDogeyBpbmRleDogb2xkUXVlc3Rpb24uY29ycmVjdEFuc3dlciwgdGV4dDogb2xkUXVlc3Rpb24ub3B0aW9uc1tvbGRRdWVzdGlvbi5jb3JyZWN0QW5zd2VyXSB9LFxuICAgICAgICBuZXc6IHsgaW5kZXg6IG5ld1F1ZXN0aW9uLmNvcnJlY3RBbnN3ZXIsIHRleHQ6IG5ld1F1ZXN0aW9uLm9wdGlvbnNbbmV3UXVlc3Rpb24uY29ycmVjdEFuc3dlcl0gfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvbGRRdWVzdGlvbi5jYXRlZ29yeSAhPT0gbmV3UXVlc3Rpb24uY2F0ZWdvcnkpIHtcbiAgICAgIGRpZmYuY2F0ZWdvcnkgPSB7IG9sZDogb2xkUXVlc3Rpb24uY2F0ZWdvcnksIG5ldzogbmV3UXVlc3Rpb24uY2F0ZWdvcnkgfVxuICAgIH1cblxuICAgIGlmIChvbGRRdWVzdGlvbi5kaWZmaWN1bHR5ICE9PSBuZXdRdWVzdGlvbi5kaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmLmRpZmZpY3VsdHkgPSB7IG9sZDogb2xkUXVlc3Rpb24uZGlmZmljdWx0eSwgbmV3OiBuZXdRdWVzdGlvbi5kaWZmaWN1bHR5IH1cbiAgICB9XG5cbiAgICBpZiAob2xkUXVlc3Rpb24udHlwZSAhPT0gbmV3UXVlc3Rpb24udHlwZSkge1xuICAgICAgZGlmZi50eXBlID0geyBvbGQ6IG9sZFF1ZXN0aW9uLnR5cGUsIG5ldzogbmV3UXVlc3Rpb24udHlwZSB9XG4gICAgfVxuXG4gICAgaWYgKG9sZFF1ZXN0aW9uLmZ1bkZhY3QgIT09IG5ld1F1ZXN0aW9uLmZ1bkZhY3QpIHtcbiAgICAgIGRpZmYuZnVuRmFjdCA9IHsgb2xkOiBvbGRRdWVzdGlvbi5mdW5GYWN0LCBuZXc6IG5ld1F1ZXN0aW9uLmZ1bkZhY3QgfVxuICAgIH1cblxuICAgIGlmIChKU09OLnN0cmluZ2lmeShvbGRRdWVzdGlvbi50YWdzKSAhPT0gSlNPTi5zdHJpbmdpZnkobmV3UXVlc3Rpb24udGFncykpIHtcbiAgICAgIGRpZmYudGFncyA9IHsgb2xkOiBvbGRRdWVzdGlvbi50YWdzIHx8IFtdLCBuZXc6IG5ld1F1ZXN0aW9uLnRhZ3MgfHwgW10gfVxuICAgIH1cblxuICAgIHJldHVybiBkaWZmXG4gIH1cblxuICAvLyBHZXQgc2V0dGluZ3MgY2hhbmdlc1xuICBwcml2YXRlIGdldFNldHRpbmdzQ2hhbmdlcyhvbGRTZXR0aW5nczogYW55LCBuZXdTZXR0aW5nczogYW55KTogYW55IHtcbiAgICBjb25zdCBjaGFuZ2VzOiBhbnkgPSB7fVxuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gbmV3U2V0dGluZ3MpIHtcbiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShvbGRTZXR0aW5nc1trZXldKSAhPT0gSlNPTi5zdHJpbmdpZnkobmV3U2V0dGluZ3Nba2V5XSkpIHtcbiAgICAgICAgY2hhbmdlc1trZXldID0geyBvbGQ6IG9sZFNldHRpbmdzW2tleV0sIG5ldzogbmV3U2V0dGluZ3Nba2V5XSB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZXNcbiAgfVxuXG4gIC8vIENvbXBhcmUgcmV3YXJkcyBkYXRhXG4gIHByaXZhdGUgY29tcGFyZVJld2FyZHNEYXRhKGFkbWluOiBhbnksIGZyb250ZW5kOiBhbnkpOiBDaGFuZ2VJdGVtW10ge1xuICAgIGNvbnN0IGNoYW5nZXM6IENoYW5nZUl0ZW1bXSA9IFtdXG5cbiAgICAvLyBDb21wYXJlIGFjaGlldmVtZW50c1xuICAgIGlmIChKU09OLnN0cmluZ2lmeShhZG1pbi5hY2hpZXZlbWVudHMpICE9PSBKU09OLnN0cmluZ2lmeShmcm9udGVuZC5hY2hpZXZlbWVudHMpKSB7XG4gICAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgICBjYXRlZ29yeTogJ3Jld2FyZHMnLFxuICAgICAgICBmaWVsZDogJ2FjaGlldmVtZW50cycsXG4gICAgICAgIGFjdGlvbjogJ21vZGlmeScsXG4gICAgICAgIG9sZFZhbHVlOiBmcm9udGVuZC5hY2hpZXZlbWVudHMsXG4gICAgICAgIG5ld1ZhbHVlOiBhZG1pbi5hY2hpZXZlbWVudHMsXG4gICAgICAgIHJpc2tMZXZlbDogJ3NhZmUnLFxuICAgICAgICBpbXBhY3Q6IGBBY2hpZXZlbWVudHM6ICR7ZnJvbnRlbmQuYWNoaWV2ZW1lbnRzLmxlbmd0aH0g4oaSICR7YWRtaW4uYWNoaWV2ZW1lbnRzLmxlbmd0aH1gXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIENvbXBhcmUgcG9wdXAgc2V0dGluZ3NcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkoYWRtaW4ucG9wdXBTZXR0aW5ncykgIT09IEpTT04uc3RyaW5naWZ5KGZyb250ZW5kLnBvcHVwU2V0dGluZ3MpKSB7XG4gICAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgICBjYXRlZ29yeTogJ3Jld2FyZHMnLFxuICAgICAgICBmaWVsZDogJ3BvcHVwU2V0dGluZ3MnLFxuICAgICAgICBhY3Rpb246ICdtb2RpZnknLFxuICAgICAgICBvbGRWYWx1ZTogZnJvbnRlbmQucG9wdXBTZXR0aW5ncyxcbiAgICAgICAgbmV3VmFsdWU6IGFkbWluLnBvcHVwU2V0dGluZ3MsXG4gICAgICAgIHJpc2tMZXZlbDogJ2NhdXRpb24nLFxuICAgICAgICBpbXBhY3Q6ICdSZXdhcmQgcG9wdXAgY29uZmlndXJhdGlvbiB1cGRhdGVkJ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBDb21wYXJlIGNvaW4gbXVsdGlwbGllcnNcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkoYWRtaW4uY29pbk11bHRpcGxpZXJzKSAhPT0gSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmQuY29pbk11bHRpcGxpZXJzKSkge1xuICAgICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgY2F0ZWdvcnk6ICdyZXdhcmRzJyxcbiAgICAgICAgZmllbGQ6ICdjb2luTXVsdGlwbGllcnMnLFxuICAgICAgICBhY3Rpb246ICdtb2RpZnknLFxuICAgICAgICBvbGRWYWx1ZTogZnJvbnRlbmQuY29pbk11bHRpcGxpZXJzLFxuICAgICAgICBuZXdWYWx1ZTogYWRtaW4uY29pbk11bHRpcGxpZXJzLFxuICAgICAgICByaXNrTGV2ZWw6ICdjYXV0aW9uJyxcbiAgICAgICAgaW1wYWN0OiAnQ29pbiBtdWx0aXBsaWVyIHNldHRpbmdzIHVwZGF0ZWQnXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBjaGFuZ2VzXG4gIH1cblxuICAvLyBDb21wYXJlIHN5c3RlbSBzZXR0aW5nc1xuICBwcml2YXRlIGNvbXBhcmVTeXN0ZW1TZXR0aW5ncyhhZG1pbjogYW55LCBmcm9udGVuZDogYW55KTogQ2hhbmdlSXRlbVtdIHtcbiAgICBjb25zdCBjaGFuZ2VzOiBDaGFuZ2VJdGVtW10gPSBbXVxuXG4gICAgLy8gQ29tcGFyZSBmZWF0dXJlIGZsYWdzXG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGFkbWluLmZlYXR1cmVGbGFncykgIT09IEpTT04uc3RyaW5naWZ5KGZyb250ZW5kLmZlYXR1cmVGbGFncykpIHtcbiAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgIGNhdGVnb3J5OiAnc3lzdGVtU2V0dGluZ3MnLFxuICAgICAgICBmaWVsZDogJ2ZlYXR1cmVGbGFncycsXG4gICAgICAgIGFjdGlvbjogJ21vZGlmeScsXG4gICAgICAgIG9sZFZhbHVlOiBmcm9udGVuZC5mZWF0dXJlRmxhZ3MsXG4gICAgICAgIG5ld1ZhbHVlOiBhZG1pbi5mZWF0dXJlRmxhZ3MsXG4gICAgICAgIHJpc2tMZXZlbDogJ2NhdXRpb24nLFxuICAgICAgICBpbXBhY3Q6ICdGZWF0dXJlIGZsYWdzIGNvbmZpZ3VyYXRpb24gdXBkYXRlZCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQ29tcGFyZSBjb25maWcgdmFsdWVzXG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGFkbWluLmNvbmZpZ1ZhbHVlcykgIT09IEpTT04uc3RyaW5naWZ5KGZyb250ZW5kLmNvbmZpZ1ZhbHVlcykpIHtcbiAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgIGNhdGVnb3J5OiAnc3lzdGVtU2V0dGluZ3MnLFxuICAgICAgICBmaWVsZDogJ2NvbmZpZ1ZhbHVlcycsXG4gICAgICAgIGFjdGlvbjogJ21vZGlmeScsXG4gICAgICAgIG9sZFZhbHVlOiBmcm9udGVuZC5jb25maWdWYWx1ZXMsXG4gICAgICAgIG5ld1ZhbHVlOiBhZG1pbi5jb25maWdWYWx1ZXMsXG4gICAgICAgIHJpc2tMZXZlbDogJ2NhdXRpb24nLFxuICAgICAgICBpbXBhY3Q6ICdTeXN0ZW0gY29uZmlndXJhdGlvbiB2YWx1ZXMgdXBkYXRlZCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQ29tcGFyZSBhZHMgY29uZmlnXG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGFkbWluLmFkc0NvbmZpZykgIT09IEpTT04uc3RyaW5naWZ5KGZyb250ZW5kLmFkc0NvbmZpZykpIHtcbiAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgIGNhdGVnb3J5OiAnc3lzdGVtU2V0dGluZ3MnLFxuICAgICAgICBmaWVsZDogJ2Fkc0NvbmZpZycsXG4gICAgICAgIGFjdGlvbjogJ21vZGlmeScsXG4gICAgICAgIG9sZFZhbHVlOiBmcm9udGVuZC5hZHNDb25maWcsXG4gICAgICAgIG5ld1ZhbHVlOiBhZG1pbi5hZHNDb25maWcsXG4gICAgICAgIHJpc2tMZXZlbDogJ3NhZmUnLFxuICAgICAgICBpbXBhY3Q6ICdBZHMgY29uZmlndXJhdGlvbiB1cGRhdGVkJ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gY2hhbmdlc1xuICB9XG5cbiAgLy8gRGV0ZWN0IGNvbmZsaWN0cyBiZXR3ZWVuIGFkbWluIGFuZCBmcm9udGVuZCBkYXRhXG4gIGRldGVjdENvbmZsaWN0cyhhZG1pbkRhdGE6IENvbmZpZ0RhdGEsIGZyb250ZW5kRGF0YTogQ29uZmlnRGF0YSk6IENvbmZsaWN0UmVzb2x1dGlvbltdIHtcbiAgICBjb25zdCBjb25mbGljdHM6IENvbmZsaWN0UmVzb2x1dGlvbltdID0gW11cblxuICAgIC8vIENoZWNrIGZvciB0aW1lc3RhbXAgY29uZmxpY3RzXG4gICAgT2JqZWN0LmtleXMoYWRtaW5EYXRhKS5mb3JFYWNoKGNhdGVnb3J5ID0+IHtcbiAgICAgIGNvbnN0IGFkbWluQ2F0ID0gYWRtaW5EYXRhW2NhdGVnb3J5IGFzIGtleW9mIENvbmZpZ0RhdGFdXG4gICAgICBjb25zdCBmcm9udGVuZENhdCA9IGZyb250ZW5kRGF0YVtjYXRlZ29yeSBhcyBrZXlvZiBDb25maWdEYXRhXVxuICAgICAgXG4gICAgICBpZiAoYWRtaW5DYXQubGFzdE1vZGlmaWVkID4gMCAmJiBmcm9udGVuZENhdC5sYXN0TW9kaWZpZWQgPiAwKSB7XG4gICAgICAgIGNvbnN0IHRpbWVEaWZmID0gTWF0aC5hYnMoYWRtaW5DYXQubGFzdE1vZGlmaWVkIC0gZnJvbnRlbmRDYXQubGFzdE1vZGlmaWVkKVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgYm90aCB3ZXJlIG1vZGlmaWVkIHdpdGhpbiA1IG1pbnV0ZXMgb2YgZWFjaCBvdGhlciwgaXQncyBhIHBvdGVudGlhbCBjb25mbGljdFxuICAgICAgICBpZiAodGltZURpZmYgPCAzMDAwMDAgJiYgYWRtaW5DYXQudmVyc2lvbiAhPT0gZnJvbnRlbmRDYXQudmVyc2lvbikge1xuICAgICAgICAgIGNvbmZsaWN0cy5wdXNoKHtcbiAgICAgICAgICAgIGZpZWxkOiBgJHtjYXRlZ29yeX0udmVyc2lvbmAsXG4gICAgICAgICAgICBhZG1pblZhbHVlOiBhZG1pbkNhdC52ZXJzaW9uLFxuICAgICAgICAgICAgZnJvbnRlbmRWYWx1ZTogZnJvbnRlbmRDYXQudmVyc2lvbixcbiAgICAgICAgICAgIGFkbWluVGltZXN0YW1wOiBhZG1pbkNhdC5sYXN0TW9kaWZpZWQsXG4gICAgICAgICAgICBmcm9udGVuZFRpbWVzdGFtcDogZnJvbnRlbmRDYXQubGFzdE1vZGlmaWVkLFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogYWRtaW5DYXQubGFzdE1vZGlmaWVkID4gZnJvbnRlbmRDYXQubGFzdE1vZGlmaWVkID8gJ3VzZS1hZG1pbicgOiAndXNlLWZyb250ZW5kJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIGNvbmZsaWN0c1xuICB9XG5cbiAgLy8gQXNzZXNzIGRhdGEgZnJlc2huZXNzXG4gIGFzc2Vzc0RhdGFGcmVzaG5lc3ModGltZXN0YW1wOiBudW1iZXIpOiAnZnJlc2gnIHwgJ3N0YWxlJyB8ICdvdXRkYXRlZCcge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICBjb25zdCBhZ2UgPSBub3cgLSB0aW1lc3RhbXBcbiAgICBcbiAgICBpZiAoYWdlIDwgMzAwMDAwKSByZXR1cm4gJ2ZyZXNoJyAvLyA8IDUgbWludXRlc1xuICAgIGlmIChhZ2UgPCAxODAwMDAwKSByZXR1cm4gJ3N0YWxlJyAvLyA8IDMwIG1pbnV0ZXNcbiAgICByZXR1cm4gJ291dGRhdGVkJyAvLyA+IDMwIG1pbnV0ZXNcbiAgfVxuXG4gIC8vIEdlbmVyYXRlIHN5bmMgcHJldmlld1xuICBhc3luYyBnZW5lcmF0ZVN5bmNQcmV2aWV3KG9wZXJhdGlvbjogJ3B1bGwnIHwgJ3B1c2gnIHwgJ3NtYXJ0JyB8ICdyZXNldCcpOiBQcm9taXNlPFN5bmNQcmV2aWV3PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBjb25zb2xlLmxvZyhg8J+UhCBHZW5lcmF0aW5nIHN5bmMgcHJldmlldyBmb3Igb3BlcmF0aW9uOiAke29wZXJhdGlvbn1gKVxuXG4gICAgY29uc3QgYWRtaW5EYXRhID0gdGhpcy5nZXRBZG1pbkNvbmZpZ0RhdGEoKVxuICAgIGNvbnN0IGZyb250ZW5kRGF0YSA9IHRoaXMuZ2V0RnJvbnRlbmRDb25maWdEYXRhKClcbiAgICBcbiAgICBsZXQgY2hhbmdlczogQ2hhbmdlSXRlbVtdID0gW11cbiAgICBsZXQgZGlyZWN0aW9uOiAnYWRtaW4tdG8tZnJvbnRlbmQnIHwgJ2Zyb250ZW5kLXRvLWFkbWluJyB8ICdiaWRpcmVjdGlvbmFsJyA9ICdiaWRpcmVjdGlvbmFsJ1xuXG4gICAgc3dpdGNoIChvcGVyYXRpb24pIHtcbiAgICAgIGNhc2UgJ3B1bGwnOlxuICAgICAgICBjaGFuZ2VzID0gdGhpcy5kZXRlY3RDaGFuZ2VzKGZyb250ZW5kRGF0YSwgYWRtaW5EYXRhKVxuICAgICAgICBkaXJlY3Rpb24gPSAnZnJvbnRlbmQtdG8tYWRtaW4nXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdwdXNoJzpcbiAgICAgICAgY2hhbmdlcyA9IHRoaXMuZGV0ZWN0Q2hhbmdlcyhhZG1pbkRhdGEsIGZyb250ZW5kRGF0YSlcbiAgICAgICAgZGlyZWN0aW9uID0gJ2FkbWluLXRvLWZyb250ZW5kJ1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc21hcnQnOlxuICAgICAgICBjaGFuZ2VzID0gdGhpcy5kZXRlY3RDaGFuZ2VzKGFkbWluRGF0YSwgZnJvbnRlbmREYXRhKVxuICAgICAgICBkaXJlY3Rpb24gPSAnYmlkaXJlY3Rpb25hbCdcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Jlc2V0JzpcbiAgICAgICAgY2hhbmdlcyA9IHRoaXMuZGV0ZWN0Q2hhbmdlcyhhZG1pbkRhdGEsIGZyb250ZW5kRGF0YSlcbiAgICAgICAgZGlyZWN0aW9uID0gJ2FkbWluLXRvLWZyb250ZW5kJ1xuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGNvbnN0IGNvbmZsaWN0cyA9IHRoaXMuZGV0ZWN0Q29uZmxpY3RzKGFkbWluRGF0YSwgZnJvbnRlbmREYXRhKVxuICAgIFxuICAgIGNvbnN0IHN5bmNPcGVyYXRpb246IFN5bmNPcGVyYXRpb24gPSB7XG4gICAgICBpZDogYHN5bmMtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KX1gLFxuICAgICAgdHlwZTogb3BlcmF0aW9uLFxuICAgICAgZGlyZWN0aW9uLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgY2hhbmdlcyxcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgcmlza0xldmVsOiB0aGlzLmNhbGN1bGF0ZU92ZXJhbGxSaXNrTGV2ZWwoY2hhbmdlcyksXG4gICAgICBwZXJmb3JtYW5jZU1ldHJpY3M6IHtcbiAgICAgICAgZHVyYXRpb246IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICBkYXRhU2l6ZTogSlNPTi5zdHJpbmdpZnkoeyBhZG1pbkRhdGEsIGZyb250ZW5kRGF0YSB9KS5sZW5ndGgsXG4gICAgICAgIGNvbmZsaWN0c1Jlc29sdmVkOiBjb25mbGljdHMubGVuZ3RoXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcHJldmlldzogU3luY1ByZXZpZXcgPSB7XG4gICAgICBvcGVyYXRpb246IHN5bmNPcGVyYXRpb24sXG4gICAgICBjb25mbGljdHMsXG4gICAgICBzdW1tYXJ5OiB7XG4gICAgICAgIHRvdGFsQ2hhbmdlczogY2hhbmdlcy5sZW5ndGgsXG4gICAgICAgIHNhZmVDaGFuZ2VzOiBjaGFuZ2VzLmZpbHRlcihjID0+IGMucmlza0xldmVsID09PSAnc2FmZScpLmxlbmd0aCxcbiAgICAgICAgY2F1dGlvbkNoYW5nZXM6IGNoYW5nZXMuZmlsdGVyKGMgPT4gYy5yaXNrTGV2ZWwgPT09ICdjYXV0aW9uJykubGVuZ3RoLFxuICAgICAgICBkZXN0cnVjdGl2ZUNoYW5nZXM6IGNoYW5nZXMuZmlsdGVyKGMgPT4gYy5yaXNrTGV2ZWwgPT09ICdkZXN0cnVjdGl2ZScpLmxlbmd0aCxcbiAgICAgICAgZXN0aW1hdGVkRHVyYXRpb246IHRoaXMuZXN0aW1hdGVTeW5jRHVyYXRpb24oY2hhbmdlcylcbiAgICAgIH0sXG4gICAgICBkYXRhRnJlc2huZXNzOiB7XG4gICAgICAgIGFkbWluOiB0aGlzLmFzc2Vzc0RhdGFGcmVzaG5lc3MoTWF0aC5tYXgoXG4gICAgICAgICAgYWRtaW5EYXRhLnF1aXoubGFzdE1vZGlmaWVkLFxuICAgICAgICAgIGFkbWluRGF0YS5yZXdhcmRzLmxhc3RNb2RpZmllZCxcbiAgICAgICAgICBhZG1pbkRhdGEuc3lzdGVtU2V0dGluZ3MubGFzdE1vZGlmaWVkXG4gICAgICAgICkpLFxuICAgICAgICBmcm9udGVuZDogdGhpcy5hc3Nlc3NEYXRhRnJlc2huZXNzKE1hdGgubWF4KFxuICAgICAgICAgIGZyb250ZW5kRGF0YS5xdWl6Lmxhc3RNb2RpZmllZCxcbiAgICAgICAgICBmcm9udGVuZERhdGEucmV3YXJkcy5sYXN0TW9kaWZpZWQsXG4gICAgICAgICAgZnJvbnRlbmREYXRhLnN5c3RlbVNldHRpbmdzLmxhc3RNb2RpZmllZFxuICAgICAgICApKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn5SEIFN5bmMgcHJldmlldyBnZW5lcmF0ZWQgaW4gJHtwcmV2aWV3Lm9wZXJhdGlvbi5wZXJmb3JtYW5jZU1ldHJpY3MuZHVyYXRpb24udG9GaXhlZCgyKX1tc2ApXG4gICAgcmV0dXJuIHByZXZpZXdcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBvdmVyYWxsIHJpc2sgbGV2ZWxcbiAgcHJpdmF0ZSBjYWxjdWxhdGVPdmVyYWxsUmlza0xldmVsKGNoYW5nZXM6IENoYW5nZUl0ZW1bXSk6ICdzYWZlJyB8ICdjYXV0aW9uJyB8ICdkZXN0cnVjdGl2ZScge1xuICAgIGlmIChjaGFuZ2VzLnNvbWUoYyA9PiBjLnJpc2tMZXZlbCA9PT0gJ2Rlc3RydWN0aXZlJykpIHJldHVybiAnZGVzdHJ1Y3RpdmUnXG4gICAgaWYgKGNoYW5nZXMuc29tZShjID0+IGMucmlza0xldmVsID09PSAnY2F1dGlvbicpKSByZXR1cm4gJ2NhdXRpb24nXG4gICAgcmV0dXJuICdzYWZlJ1xuICB9XG5cbiAgLy8gRXN0aW1hdGUgc3luYyBkdXJhdGlvblxuICBwcml2YXRlIGVzdGltYXRlU3luY0R1cmF0aW9uKGNoYW5nZXM6IENoYW5nZUl0ZW1bXSk6IG51bWJlciB7XG4gICAgLy8gQmFzZSB0aW1lICsgdGltZSBwZXIgY2hhbmdlXG4gICAgcmV0dXJuIDEwMCArIChjaGFuZ2VzLmxlbmd0aCAqIDUwKSAvLyBtaWxsaXNlY29uZHNcbiAgfVxuXG4gIC8vIFNldHVwIHN0b3JhZ2UgbGlzdGVuZXJzIGZvciByZWFsLXRpbWUgdXBkYXRlc1xuICBwcml2YXRlIHNldHVwU3RvcmFnZUxpc3RlbmVycygpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVyblxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5Py5zdGFydHNXaXRoKCdhZG1pbl8nKSB8fCBlLmtleT8uc3RhcnRzV2l0aCgnZ2FtZV8nKSkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBTdG9yYWdlIGNoYW5nZSBkZXRlY3RlZCwgdXBkYXRpbmcgc3luYyBwcmV2aWV3OicsIGUua2V5KVxuICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycygpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIExvYWQgc3luYyBoaXN0b3J5IGZyb20gbG9jYWxTdG9yYWdlXG4gIHByaXZhdGUgbG9hZFN5bmNIaXN0b3J5KCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBoaXN0b3J5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JpZGlyZWN0aW9uYWxfc3luY19oaXN0b3J5JylcbiAgICAgIGlmIChoaXN0b3J5KSB7XG4gICAgICAgIHRoaXMuc3luY0hpc3RvcnkgPSBKU09OLnBhcnNlKGhpc3RvcnkpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgc3luYyBoaXN0b3J5OicsIGVycm9yKVxuICAgICAgdGhpcy5zeW5jSGlzdG9yeSA9IHsgb3BlcmF0aW9uczogW10sIHJvbGxiYWNrUG9pbnRzOiBbXSB9XG4gICAgfVxuICB9XG5cbiAgLy8gU2F2ZSBzeW5jIGhpc3RvcnkgdG8gbG9jYWxTdG9yYWdlXG4gIHByaXZhdGUgc2F2ZVN5bmNIaXN0b3J5KCk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmlkaXJlY3Rpb25hbF9zeW5jX2hpc3RvcnknLCBKU09OLnN0cmluZ2lmeSh0aGlzLnN5bmNIaXN0b3J5KSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHN5bmMgaGlzdG9yeTonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgc3luYyBsaXN0ZW5lclxuICBhZGRTeW5jTGlzdGVuZXIoY2FsbGJhY2s6IChwcmV2aWV3OiBTeW5jUHJldmlldykgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMubGlzdGVuZXJzLnB1c2goY2FsbGJhY2spXG4gIH1cblxuICAvLyBSZW1vdmUgc3luYyBsaXN0ZW5lclxuICByZW1vdmVTeW5jTGlzdGVuZXIoY2FsbGJhY2s6IChwcmV2aWV3OiBTeW5jUHJldmlldykgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5saXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjaylcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy5saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgIH1cbiAgfVxuXG4gIC8vIE5vdGlmeSBhbGwgbGlzdGVuZXJzXG4gIHByaXZhdGUgYXN5bmMgbm90aWZ5TGlzdGVuZXJzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmxpc3RlbmVycy5sZW5ndGggPiAwKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwcmV2aWV3ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVN5bmNQcmV2aWV3KCdzbWFydCcpXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjYWxsYmFjayhwcmV2aWV3KVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzeW5jIGxpc3RlbmVyOicsIGVycm9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgcHJldmlldyBmb3IgbGlzdGVuZXJzOicsIGVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBzeW5jIGhpc3RvcnlcbiAgZ2V0U3luY0hpc3RvcnkoKTogU3luY0hpc3Rvcnkge1xuICAgIHJldHVybiB7IC4uLnRoaXMuc3luY0hpc3RvcnkgfVxuICB9XG5cbiAgLy8gRXhlY3V0ZSBzeW5jIG9wZXJhdGlvblxuICBhc3luYyBleGVjdXRlU3luY09wZXJhdGlvbihwcmV2aWV3OiBTeW5jUHJldmlldyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmc7IG9wZXJhdGlvbjogU3luY09wZXJhdGlvbiB9PiB7XG4gICAgaWYgKHRoaXMuaXNPcGVyYXRpb25JblByb2dyZXNzKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0Fub3RoZXIgc3luYyBvcGVyYXRpb24gaXMgaW4gcHJvZ3Jlc3MnLCBvcGVyYXRpb246IHByZXZpZXcub3BlcmF0aW9uIH1cbiAgICB9XG5cbiAgICB0aGlzLmlzT3BlcmF0aW9uSW5Qcm9ncmVzcyA9IHRydWVcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SEIEV4ZWN1dGluZyBzeW5jIG9wZXJhdGlvbjogJHtwcmV2aWV3Lm9wZXJhdGlvbi50eXBlfWApXG5cbiAgICAgIC8vIENyZWF0ZSByb2xsYmFjayBwb2ludFxuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVSb2xsYmFja1BvaW50KGBCZWZvcmUgJHtwcmV2aWV3Lm9wZXJhdGlvbi50eXBlfSBvcGVyYXRpb25gKVxuXG4gICAgICAvLyBBcHBseSBjaGFuZ2VzIGJhc2VkIG9uIG9wZXJhdGlvbiB0eXBlXG4gICAgICBzd2l0Y2ggKHByZXZpZXcub3BlcmF0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAncHVsbCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5zeW5jRnJvbUZyb250ZW5kKHByZXZpZXcub3BlcmF0aW9uLmNoYW5nZXMpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncHVzaCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5zeW5jVG9Gcm9udGVuZChwcmV2aWV3Lm9wZXJhdGlvbi5jaGFuZ2VzKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NtYXJ0JzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnNtYXJ0U3luYyhwcmV2aWV3Lm9wZXJhdGlvbi5jaGFuZ2VzLCBwcmV2aWV3LmNvbmZsaWN0cylcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdyZXNldCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZXNldEZyb250ZW5kKClcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgb3BlcmF0aW9uIHN0YXR1c1xuICAgICAgcHJldmlldy5vcGVyYXRpb24uc3RhdHVzID0gJ2NvbXBsZXRlZCdcbiAgICAgIHByZXZpZXcub3BlcmF0aW9uLnBlcmZvcm1hbmNlTWV0cmljcy5kdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG5cbiAgICAgIC8vIEFkZCB0byBoaXN0b3J5XG4gICAgICB0aGlzLnN5bmNIaXN0b3J5Lm9wZXJhdGlvbnMucHVzaChwcmV2aWV3Lm9wZXJhdGlvbilcbiAgICAgIHRoaXMuc2F2ZVN5bmNIaXN0b3J5KClcblxuICAgICAgY29uc29sZS5sb2coYPCflIQgU3luYyBvcGVyYXRpb24gY29tcGxldGVkIGluICR7cHJldmlldy5vcGVyYXRpb24ucGVyZm9ybWFuY2VNZXRyaWNzLmR1cmF0aW9uLnRvRml4ZWQoMil9bXNgKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBgJHtwcmV2aWV3Lm9wZXJhdGlvbi50eXBlfSBvcGVyYXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseWAsXG4gICAgICAgIG9wZXJhdGlvbjogcHJldmlldy5vcGVyYXRpb25cbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfwn5SEIFN5bmMgb3BlcmF0aW9uIGZhaWxlZDonLCBlcnJvcilcblxuICAgICAgLy8gTWFyayBvcGVyYXRpb24gYXMgZmFpbGVkXG4gICAgICBwcmV2aWV3Lm9wZXJhdGlvbi5zdGF0dXMgPSAnZmFpbGVkJ1xuICAgICAgcHJldmlldy5vcGVyYXRpb24ucGVyZm9ybWFuY2VNZXRyaWNzLmR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcblxuICAgICAgLy8gQWRkIHRvIGhpc3RvcnlcbiAgICAgIHRoaXMuc3luY0hpc3Rvcnkub3BlcmF0aW9ucy5wdXNoKHByZXZpZXcub3BlcmF0aW9uKVxuICAgICAgdGhpcy5zYXZlU3luY0hpc3RvcnkoKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnU3luYyBvcGVyYXRpb24gZmFpbGVkJyxcbiAgICAgICAgb3BlcmF0aW9uOiBwcmV2aWV3Lm9wZXJhdGlvblxuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzT3BlcmF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLy8gU3luYyBmcm9tIGZyb250ZW5kIHRvIGFkbWluXG4gIHByaXZhdGUgYXN5bmMgc3luY0Zyb21Gcm9udGVuZChjaGFuZ2VzOiBDaGFuZ2VJdGVtW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBmcm9udGVuZERhdGEgPSB0aGlzLmdldEZyb250ZW5kQ29uZmlnRGF0YSgpXG5cbiAgICBmb3IgKGNvbnN0IGNoYW5nZSBvZiBjaGFuZ2VzKSB7XG4gICAgICBzd2l0Y2ggKGNoYW5nZS5jYXRlZ29yeSkge1xuICAgICAgICBjYXNlICdxdWl6JzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcGx5UXVpekNoYW5nZXMoY2hhbmdlLCBmcm9udGVuZERhdGEucXVpeilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdyZXdhcmRzJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcGx5UmV3YXJkQ2hhbmdlcyhjaGFuZ2UsIGZyb250ZW5kRGF0YS5yZXdhcmRzKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3N5c3RlbVNldHRpbmdzJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcGx5U3lzdGVtU2V0dGluZ3NDaGFuZ2VzKGNoYW5nZSwgZnJvbnRlbmREYXRhLnN5c3RlbVNldHRpbmdzKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGFkbWluIHRpbWVzdGFtcHNcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fbGFzdF9zeW5jX2Zyb21fZnJvbnRlbmQnLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvLyBTeW5jIGZyb20gYWRtaW4gdG8gZnJvbnRlbmRcbiAgcHJpdmF0ZSBhc3luYyBzeW5jVG9Gcm9udGVuZChjaGFuZ2VzOiBDaGFuZ2VJdGVtW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBhZG1pbkRhdGEgPSB0aGlzLmdldEFkbWluQ29uZmlnRGF0YSgpXG5cbiAgICBmb3IgKGNvbnN0IGNoYW5nZSBvZiBjaGFuZ2VzKSB7XG4gICAgICBzd2l0Y2ggKGNoYW5nZS5jYXRlZ29yeSkge1xuICAgICAgICBjYXNlICdxdWl6JzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnB1c2hRdWl6VG9Gcm9udGVuZChhZG1pbkRhdGEucXVpeilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdyZXdhcmRzJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnB1c2hSZXdhcmRzVG9Gcm9udGVuZChhZG1pbkRhdGEucmV3YXJkcylcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdzeXN0ZW1TZXR0aW5ncyc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5wdXNoU3lzdGVtU2V0dGluZ3NUb0Zyb250ZW5kKGFkbWluRGF0YS5zeXN0ZW1TZXR0aW5ncylcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBmcm9udGVuZCB0aW1lc3RhbXBzXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfbGFzdF9zeW5jJywgRGF0ZS5ub3coKS50b1N0cmluZygpKVxuICB9XG5cbiAgLy8gU21hcnQgc3luYyB3aXRoIGNvbmZsaWN0IHJlc29sdXRpb25cbiAgcHJpdmF0ZSBhc3luYyBzbWFydFN5bmMoY2hhbmdlczogQ2hhbmdlSXRlbVtdLCBjb25mbGljdHM6IENvbmZsaWN0UmVzb2x1dGlvbltdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gUmVzb2x2ZSBjb25mbGljdHMgZmlyc3RcbiAgICBmb3IgKGNvbnN0IGNvbmZsaWN0IG9mIGNvbmZsaWN0cykge1xuICAgICAgYXdhaXQgdGhpcy5yZXNvbHZlQ29uZmxpY3QoY29uZmxpY3QpXG4gICAgfVxuXG4gICAgLy8gQXBwbHkgbm9uLWNvbmZsaWN0aW5nIGNoYW5nZXNcbiAgICBjb25zdCBub25Db25mbGljdGluZ0NoYW5nZXMgPSBjaGFuZ2VzLmZpbHRlcihjaGFuZ2UgPT5cbiAgICAgICFjb25mbGljdHMuc29tZShjb25mbGljdCA9PiBjb25mbGljdC5maWVsZC5pbmNsdWRlcyhjaGFuZ2UuZmllbGQpKVxuICAgIClcblxuICAgIGF3YWl0IHRoaXMuc3luY1RvRnJvbnRlbmQobm9uQ29uZmxpY3RpbmdDaGFuZ2VzKVxuICB9XG5cbiAgLy8gUmVzZXQgZnJvbnRlbmQgd2l0aCBhZG1pbiBkYXRhXG4gIHByaXZhdGUgYXN5bmMgcmVzZXRGcm9udGVuZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBhZG1pbkRhdGEgPSB0aGlzLmdldEFkbWluQ29uZmlnRGF0YSgpXG5cbiAgICAvLyBQdXNoIGFsbCBhZG1pbiBkYXRhIHRvIGZyb250ZW5kXG4gICAgYXdhaXQgdGhpcy5wdXNoUXVpelRvRnJvbnRlbmQoYWRtaW5EYXRhLnF1aXopXG4gICAgYXdhaXQgdGhpcy5wdXNoUmV3YXJkc1RvRnJvbnRlbmQoYWRtaW5EYXRhLnJld2FyZHMpXG4gICAgYXdhaXQgdGhpcy5wdXNoU3lzdGVtU2V0dGluZ3NUb0Zyb250ZW5kKGFkbWluRGF0YS5zeXN0ZW1TZXR0aW5ncylcblxuICAgIC8vIFVwZGF0ZSB0aW1lc3RhbXBzXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfbGFzdF9zeW5jJywgRGF0ZS5ub3coKS50b1N0cmluZygpKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX3Jlc2V0X3RpbWVzdGFtcCcsIERhdGUubm93KCkudG9TdHJpbmcoKSlcbiAgfVxuXG4gIC8vIEFwcGx5IHF1aXogY2hhbmdlcyB0byBhZG1pblxuICBwcml2YXRlIGFzeW5jIGFwcGx5UXVpekNoYW5nZXMoY2hhbmdlOiBDaGFuZ2VJdGVtLCBmcm9udGVuZFF1aXpEYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBzd2l0Y2ggKGNoYW5nZS5maWVsZCkge1xuICAgICAgY2FzZSAncXVlc3Rpb25zJzpcbiAgICAgICAgLy8gVXBkYXRlIGFkbWluIHF1ZXN0aW9ucyB3aXRoIGZyb250ZW5kIGRhdGFcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX3F1aXpfcXVlc3Rpb25zJywgSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmRRdWl6RGF0YS5xdWVzdGlvbnMpKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2F0ZWdvcmllcyc6XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9xdWl6X2NhdGVnb3JpZXMnLCBKU09OLnN0cmluZ2lmeShmcm9udGVuZFF1aXpEYXRhLmNhdGVnb3JpZXMpKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc2V0dGluZ3MnOlxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcXVpel9zZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KGZyb250ZW5kUXVpekRhdGEuc2V0dGluZ3MpKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcXVpel9xdWVzdGlvbnNfdXBkYXRlZCcsIERhdGUubm93KCkudG9TdHJpbmcoKSlcbiAgfVxuXG4gIC8vIEFwcGx5IHJld2FyZCBjaGFuZ2VzIHRvIGFkbWluXG4gIHByaXZhdGUgYXN5bmMgYXBwbHlSZXdhcmRDaGFuZ2VzKGNoYW5nZTogQ2hhbmdlSXRlbSwgZnJvbnRlbmRSZXdhcmREYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBzd2l0Y2ggKGNoYW5nZS5maWVsZCkge1xuICAgICAgY2FzZSAnYWNoaWV2ZW1lbnRzJzpcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX3Jld2FyZF9hY2hpZXZlbWVudHMnLCBKU09OLnN0cmluZ2lmeShmcm9udGVuZFJld2FyZERhdGEuYWNoaWV2ZW1lbnRzKSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3BvcHVwU2V0dGluZ3MnOlxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcmV3YXJkX3BvcHVwX3NldHRpbmdzJywgSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmRSZXdhcmREYXRhLnBvcHVwU2V0dGluZ3MpKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY29pbk11bHRpcGxpZXJzJzpcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX3Jld2FyZF9jb2luX211bHRpcGxpZXJzJywgSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmRSZXdhcmREYXRhLmNvaW5NdWx0aXBsaWVycykpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9yZXdhcmRfY29uZmlnX3VwZGF0ZWQnLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvLyBBcHBseSBzeXN0ZW0gc2V0dGluZ3MgY2hhbmdlcyB0byBhZG1pblxuICBwcml2YXRlIGFzeW5jIGFwcGx5U3lzdGVtU2V0dGluZ3NDaGFuZ2VzKGNoYW5nZTogQ2hhbmdlSXRlbSwgZnJvbnRlbmRTZXR0aW5nc0RhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHN3aXRjaCAoY2hhbmdlLmZpZWxkKSB7XG4gICAgICBjYXNlICdmZWF0dXJlRmxhZ3MnOlxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fZmVhdHVyZV9mbGFncycsIEpTT04uc3RyaW5naWZ5KGZyb250ZW5kU2V0dGluZ3NEYXRhLmZlYXR1cmVGbGFncykpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjb25maWdWYWx1ZXMnOlxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fc3lzdGVtX3NldHRpbmdzJywgSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmRTZXR0aW5nc0RhdGEuY29uZmlnVmFsdWVzKSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2Fkc0NvbmZpZyc6XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9hZHNfY29uZmlnJywgSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmRTZXR0aW5nc0RhdGEuYWRzQ29uZmlnKSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX3NldHRpbmdzX3VwZGF0ZWQnLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvLyBQdXNoIHF1aXogZGF0YSB0byBmcm9udGVuZFxuICBwcml2YXRlIGFzeW5jIHB1c2hRdWl6VG9Gcm9udGVuZChhZG1pblF1aXpEYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9xdWl6X2RhdGEnLCBKU09OLnN0cmluZ2lmeShhZG1pblF1aXpEYXRhLnF1ZXN0aW9ucykpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfY2F0ZWdvcmllcycsIEpTT04uc3RyaW5naWZ5KGFkbWluUXVpekRhdGEuY2F0ZWdvcmllcykpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfcXVpel9zZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KGFkbWluUXVpekRhdGEuc2V0dGluZ3MpKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX3F1aXpfdmVyc2lvbicsIGFkbWluUXVpekRhdGEudmVyc2lvbilcbiAgfVxuXG4gIC8vIFB1c2ggcmV3YXJkcyBkYXRhIHRvIGZyb250ZW5kXG4gIHByaXZhdGUgYXN5bmMgcHVzaFJld2FyZHNUb0Zyb250ZW5kKGFkbWluUmV3YXJkRGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfcmV3YXJkX2RhdGEnLCBKU09OLnN0cmluZ2lmeShhZG1pblJld2FyZERhdGEuYWNoaWV2ZW1lbnRzKSlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9wb3B1cF9zZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KGFkbWluUmV3YXJkRGF0YS5wb3B1cFNldHRpbmdzKSlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9jb2luX211bHRpcGxpZXJzJywgSlNPTi5zdHJpbmdpZnkoYWRtaW5SZXdhcmREYXRhLmNvaW5NdWx0aXBsaWVycykpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfcmV3YXJkc192ZXJzaW9uJywgYWRtaW5SZXdhcmREYXRhLnZlcnNpb24pXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfcmV3YXJkc19zeW5jJywgRGF0ZS5ub3coKS50b1N0cmluZygpKVxuICB9XG5cbiAgLy8gUHVzaCBzeXN0ZW0gc2V0dGluZ3MgdG8gZnJvbnRlbmRcbiAgcHJpdmF0ZSBhc3luYyBwdXNoU3lzdGVtU2V0dGluZ3NUb0Zyb250ZW5kKGFkbWluU2V0dGluZ3NEYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9mZWF0dXJlX2ZsYWdzJywgSlNPTi5zdHJpbmdpZnkoYWRtaW5TZXR0aW5nc0RhdGEuZmVhdHVyZUZsYWdzKSlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9zZXR0aW5nc19kYXRhJywgSlNPTi5zdHJpbmdpZnkoYWRtaW5TZXR0aW5nc0RhdGEuY29uZmlnVmFsdWVzKSlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9hZHNfY29uZmlnJywgSlNPTi5zdHJpbmdpZnkoYWRtaW5TZXR0aW5nc0RhdGEuYWRzQ29uZmlnKSlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9zZXR0aW5nc192ZXJzaW9uJywgYWRtaW5TZXR0aW5nc0RhdGEudmVyc2lvbilcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9zZXR0aW5nc19zeW5jJywgRGF0ZS5ub3coKS50b1N0cmluZygpKVxuICB9XG5cbiAgLy8gUmVzb2x2ZSBjb25mbGljdFxuICBwcml2YXRlIGFzeW5jIHJlc29sdmVDb25mbGljdChjb25mbGljdDogQ29uZmxpY3RSZXNvbHV0aW9uKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc29sZS5sb2coYPCflIQgUmVzb2x2aW5nIGNvbmZsaWN0IGZvciAke2NvbmZsaWN0LmZpZWxkfTogJHtjb25mbGljdC5yZXNvbHV0aW9ufWApXG5cbiAgICBzd2l0Y2ggKGNvbmZsaWN0LnJlc29sdXRpb24pIHtcbiAgICAgIGNhc2UgJ3VzZS1hZG1pbic6XG4gICAgICAgIC8vIEFkbWluIGRhdGEgdGFrZXMgcHJlY2VkZW5jZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAndXNlLWZyb250ZW5kJzpcbiAgICAgICAgLy8gRnJvbnRlbmQgZGF0YSB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtZXJnZSc6XG4gICAgICAgIC8vIFVzZSBtZXJnZWQgdmFsdWUgaWYgYXZhaWxhYmxlXG4gICAgICAgIGlmIChjb25mbGljdC5tZXJnZWRWYWx1ZSkge1xuICAgICAgICAgIC8vIEFwcGx5IG1lcmdlZCB2YWx1ZSB0byBib3RoIGFkbWluIGFuZCBmcm9udGVuZFxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtYW51YWwnOlxuICAgICAgICAvLyBNYW51YWwgcmVzb2x1dGlvbiByZXF1aXJlZCAtIHRocm93IGVycm9yIHRvIHByb21wdCB1c2VyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTWFudWFsIHJlc29sdXRpb24gcmVxdWlyZWQgZm9yICR7Y29uZmxpY3QuZmllbGR9YClcbiAgICB9XG4gIH1cblxuICAvLyBDcmVhdGUgcm9sbGJhY2sgcG9pbnRcbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVSb2xsYmFja1BvaW50KGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBjb25maWdTbmFwc2hvdCA9IHRoaXMuZ2V0QWRtaW5Db25maWdEYXRhKClcblxuICAgIGNvbnN0IHJvbGxiYWNrUG9pbnQgPSB7XG4gICAgICBpZDogYHJvbGxiYWNrLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOCl9YCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgY29uZmlnU25hcHNob3RcbiAgICB9XG5cbiAgICB0aGlzLnN5bmNIaXN0b3J5LnJvbGxiYWNrUG9pbnRzLnB1c2gocm9sbGJhY2tQb2ludClcblxuICAgIC8vIEtlZXAgb25seSBsYXN0IDEwIHJvbGxiYWNrIHBvaW50c1xuICAgIGlmICh0aGlzLnN5bmNIaXN0b3J5LnJvbGxiYWNrUG9pbnRzLmxlbmd0aCA+IDEwKSB7XG4gICAgICB0aGlzLnN5bmNIaXN0b3J5LnJvbGxiYWNrUG9pbnRzID0gdGhpcy5zeW5jSGlzdG9yeS5yb2xsYmFja1BvaW50cy5zbGljZSgtMTApXG4gICAgfVxuXG4gICAgdGhpcy5zYXZlU3luY0hpc3RvcnkoKVxuICAgIGNvbnNvbGUubG9nKGDwn5SEIFJvbGxiYWNrIHBvaW50IGNyZWF0ZWQ6ICR7ZGVzY3JpcHRpb259YClcbiAgfVxuXG4gIC8vIFJvbGxiYWNrIHRvIHNwZWNpZmljIHBvaW50XG4gIGFzeW5jIHJvbGxiYWNrVG9Qb2ludChyb2xsYmFja0lkOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgcm9sbGJhY2tQb2ludCA9IHRoaXMuc3luY0hpc3Rvcnkucm9sbGJhY2tQb2ludHMuZmluZChycCA9PiBycC5pZCA9PT0gcm9sbGJhY2tJZClcblxuICAgICAgaWYgKCFyb2xsYmFja1BvaW50KSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnUm9sbGJhY2sgcG9pbnQgbm90IGZvdW5kJyB9XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFJvbGxpbmcgYmFjayB0bzogJHtyb2xsYmFja1BvaW50LmRlc2NyaXB0aW9ufWApXG5cbiAgICAgIC8vIFJlc3RvcmUgYWRtaW4gY29uZmlndXJhdGlvblxuICAgICAgY29uc3QgY29uZmlnID0gcm9sbGJhY2tQb2ludC5jb25maWdTbmFwc2hvdFxuXG4gICAgICAvLyBSZXN0b3JlIHF1aXogZGF0YVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX3F1aXpfcXVlc3Rpb25zJywgSlNPTi5zdHJpbmdpZnkoY29uZmlnLnF1aXoucXVlc3Rpb25zKSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9xdWl6X2NhdGVnb3JpZXMnLCBKU09OLnN0cmluZ2lmeShjb25maWcucXVpei5jYXRlZ29yaWVzKSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9xdWl6X3NldHRpbmdzJywgSlNPTi5zdHJpbmdpZnkoY29uZmlnLnF1aXouc2V0dGluZ3MpKVxuXG4gICAgICAvLyBSZXN0b3JlIHJld2FyZCBkYXRhXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcmV3YXJkX2FjaGlldmVtZW50cycsIEpTT04uc3RyaW5naWZ5KGNvbmZpZy5yZXdhcmRzLmFjaGlldmVtZW50cykpXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcmV3YXJkX3BvcHVwX3NldHRpbmdzJywgSlNPTi5zdHJpbmdpZnkoY29uZmlnLnJld2FyZHMucG9wdXBTZXR0aW5ncykpXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcmV3YXJkX2NvaW5fbXVsdGlwbGllcnMnLCBKU09OLnN0cmluZ2lmeShjb25maWcucmV3YXJkcy5jb2luTXVsdGlwbGllcnMpKVxuXG4gICAgICAvLyBSZXN0b3JlIHN5c3RlbSBzZXR0aW5nc1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX2ZlYXR1cmVfZmxhZ3MnLCBKU09OLnN0cmluZ2lmeShjb25maWcuc3lzdGVtU2V0dGluZ3MuZmVhdHVyZUZsYWdzKSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9zeXN0ZW1fc2V0dGluZ3MnLCBKU09OLnN0cmluZ2lmeShjb25maWcuc3lzdGVtU2V0dGluZ3MuY29uZmlnVmFsdWVzKSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9hZHNfY29uZmlnJywgSlNPTi5zdHJpbmdpZnkoY29uZmlnLnN5c3RlbVNldHRpbmdzLmFkc0NvbmZpZykpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aW1lc3RhbXBzXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcm9sbGJhY2tfdGltZXN0YW1wJywgRGF0ZS5ub3coKS50b1N0cmluZygpKVxuXG4gICAgICAvLyBDcmVhdGUgb3BlcmF0aW9uIHJlY29yZFxuICAgICAgY29uc3Qgcm9sbGJhY2tPcGVyYXRpb246IFN5bmNPcGVyYXRpb24gPSB7XG4gICAgICAgIGlkOiBgcm9sbGJhY2stb3AtJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIHR5cGU6ICdwdXNoJywgLy8gUm9sbGJhY2sgaXMgZXNzZW50aWFsbHkgcHVzaGluZyBvbGQgYWRtaW4gZGF0YVxuICAgICAgICBkaXJlY3Rpb246ICdhZG1pbi10by1mcm9udGVuZCcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgY2hhbmdlczogW10sXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgIHJpc2tMZXZlbDogJ2NhdXRpb24nLFxuICAgICAgICBwZXJmb3JtYW5jZU1ldHJpY3M6IHtcbiAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICBkYXRhU2l6ZTogSlNPTi5zdHJpbmdpZnkoY29uZmlnKS5sZW5ndGgsXG4gICAgICAgICAgY29uZmxpY3RzUmVzb2x2ZWQ6IDBcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnN5bmNIaXN0b3J5Lm9wZXJhdGlvbnMucHVzaChyb2xsYmFja09wZXJhdGlvbilcbiAgICAgIHRoaXMuc2F2ZVN5bmNIaXN0b3J5KClcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogYFN1Y2Nlc3NmdWxseSByb2xsZWQgYmFjayB0bzogJHtyb2xsYmFja1BvaW50LmRlc2NyaXB0aW9ufWAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ/CflIQgUm9sbGJhY2sgZmFpbGVkOicsIGVycm9yKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1JvbGxiYWNrIGZhaWxlZCcgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBsYXN0IG9wZXJhdGlvblxuICBnZXRMYXN0T3BlcmF0aW9uKCk6IFN5bmNPcGVyYXRpb24gfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5zeW5jSGlzdG9yeS5vcGVyYXRpb25zLmxlbmd0aCA+IDBcbiAgICAgID8gdGhpcy5zeW5jSGlzdG9yeS5vcGVyYXRpb25zW3RoaXMuc3luY0hpc3Rvcnkub3BlcmF0aW9ucy5sZW5ndGggLSAxXVxuICAgICAgOiBudWxsXG4gIH1cblxuICAvLyBVbmRvIGxhc3Qgc3luY1xuICBhc3luYyB1bmRvTGFzdFN5bmMoKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgbGFzdE9wZXJhdGlvbiA9IHRoaXMuZ2V0TGFzdE9wZXJhdGlvbigpXG5cbiAgICBpZiAoIWxhc3RPcGVyYXRpb24pIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnTm8gc3luYyBvcGVyYXRpb25zIHRvIHVuZG8nIH1cbiAgICB9XG5cbiAgICBpZiAobGFzdE9wZXJhdGlvbi5zdGF0dXMgPT09ICdyb2xsZWQtYmFjaycpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnTGFzdCBvcGVyYXRpb24gd2FzIGFscmVhZHkgcm9sbGVkIGJhY2snIH1cbiAgICB9XG5cbiAgICAvLyBGaW5kIHRoZSByb2xsYmFjayBwb2ludCBiZWZvcmUgdGhlIGxhc3Qgb3BlcmF0aW9uXG4gICAgY29uc3Qgcm9sbGJhY2tQb2ludCA9IHRoaXMuc3luY0hpc3Rvcnkucm9sbGJhY2tQb2ludHNcbiAgICAgIC5maWx0ZXIocnAgPT4gcnAudGltZXN0YW1wIDwgbGFzdE9wZXJhdGlvbi50aW1lc3RhbXApXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi50aW1lc3RhbXAgLSBhLnRpbWVzdGFtcClbMF1cblxuICAgIGlmICghcm9sbGJhY2tQb2ludCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyByb2xsYmFjayBwb2ludCBhdmFpbGFibGUgYmVmb3JlIGxhc3Qgb3BlcmF0aW9uJyB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yb2xsYmFja1RvUG9pbnQocm9sbGJhY2tQb2ludC5pZClcblxuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgLy8gTWFyayBsYXN0IG9wZXJhdGlvbiBhcyByb2xsZWQgYmFja1xuICAgICAgbGFzdE9wZXJhdGlvbi5zdGF0dXMgPSAncm9sbGVkLWJhY2snXG4gICAgICB0aGlzLnNhdmVTeW5jSGlzdG9yeSgpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgb3BlcmF0aW9uIGlzIGluIHByb2dyZXNzXG4gIGlzT3BlcmF0aW9uSW5Qcm9ncmVzcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc09wZXJhdGlvbkluUHJvZ3Jlc3NcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgYmlkaXJlY3Rpb25hbFN5bmMgPSBCaWRpcmVjdGlvbmFsU3luY1NlcnZpY2UuZ2V0SW5zdGFuY2UoKVxuIl0sIm5hbWVzIjpbInF1aXpEYXRhTWFuYWdlciIsInJld2FyZERhdGFNYW5hZ2VyIiwic2V0dGluZ3NEYXRhTWFuYWdlciIsIkJpZGlyZWN0aW9uYWxTeW5jU2VydmljZSIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UiLCJnZXRBZG1pbkNvbmZpZ0RhdGEiLCJub3ciLCJEYXRlIiwicXVpeiIsInF1ZXN0aW9ucyIsImdldFF1ZXN0aW9ucyIsImNhdGVnb3JpZXMiLCJnZXRDYXRlZ29yaWVzIiwic2V0dGluZ3MiLCJnZXRTZXR0aW5ncyIsImxhc3RNb2RpZmllZCIsInBhcnNlSW50IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInRvU3RyaW5nIiwidmVyc2lvbiIsImdlbmVyYXRlVmVyc2lvbiIsInJld2FyZHMiLCJhY2hpZXZlbWVudHMiLCJnZXRBY2hpZXZlbWVudHMiLCJwb3B1cFNldHRpbmdzIiwiZ2V0UmV3YXJkQ29uZmlnIiwiY29pbk11bHRpcGxpZXJzIiwiY29pblZhbHVlcyIsInN5c3RlbVNldHRpbmdzIiwiZmVhdHVyZUZsYWdzIiwiZ2V0U3lzdGVtU2V0dGluZ3MiLCJjb25maWdWYWx1ZXMiLCJhZHNDb25maWciLCJnZXRJbnRlZ3JhdGlvblNldHRpbmdzIiwiYWRzZW5zZSIsImdldEZyb250ZW5kQ29uZmlnRGF0YSIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsImdldERlZmF1bHRDb25maWdEYXRhIiwiY2F0ZWdvcnkiLCJ0aW1lc3RhbXAiLCJoYXNoIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0cmluZyIsImRldGVjdENoYW5nZXMiLCJhZG1pbkRhdGEiLCJmcm9udGVuZERhdGEiLCJjaGFuZ2VzIiwicHVzaCIsImNvbXBhcmVRdWl6RGF0YSIsImNvbXBhcmVSZXdhcmRzRGF0YSIsImNvbXBhcmVTeXN0ZW1TZXR0aW5ncyIsImFkbWluIiwiZnJvbnRlbmQiLCJxdWVzdGlvbkNoYW5nZXMiLCJjb21wYXJlUXVlc3Rpb25zIiwic3RyaW5naWZ5IiwiZmllbGQiLCJhY3Rpb24iLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwicmlza0xldmVsIiwiaW1wYWN0IiwibGVuZ3RoIiwiZGV0YWlscyIsImFkZGVkIiwiZmlsdGVyIiwiY2F0IiwiaW5jbHVkZXMiLCJyZW1vdmVkIiwic2V0dGluZ3NDaGFuZ2VkIiwiZ2V0U2V0dGluZ3NDaGFuZ2VzIiwiYWRtaW5RdWVzdGlvbnMiLCJmcm9udGVuZFF1ZXN0aW9ucyIsImFkbWluTWFwIiwiTWFwIiwibWFwIiwicSIsImlkIiwiZnJvbnRlbmRNYXAiLCJhZGRlZFF1ZXN0aW9ucyIsImhhcyIsInF1ZXN0aW9uIiwiZGlmZmljdWx0eSIsInR5cGUiLCJvcHRpb25zIiwiY29ycmVjdEFuc3dlciIsImZ1bkZhY3QiLCJ0YWdzIiwicmVtb3ZlZFF1ZXN0aW9ucyIsIm1vZGlmaWVkUXVlc3Rpb25zIiwiYWRtaW5RIiwiZnJvbnRlbmRRIiwiZ2V0IiwicXVlc3Rpb25EaWZmIiwiZ2V0UXVlc3Rpb25EaWZmIiwib2xkUXVlc3Rpb24iLCJuZXdRdWVzdGlvbiIsIm0iLCJkaWZmIiwib2xkIiwibmV3IiwiaW5kZXgiLCJ0ZXh0Iiwib2xkU2V0dGluZ3MiLCJuZXdTZXR0aW5ncyIsImtleSIsImRldGVjdENvbmZsaWN0cyIsImNvbmZsaWN0cyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwiYWRtaW5DYXQiLCJmcm9udGVuZENhdCIsInRpbWVEaWZmIiwiYWJzIiwiYWRtaW5WYWx1ZSIsImZyb250ZW5kVmFsdWUiLCJhZG1pblRpbWVzdGFtcCIsImZyb250ZW5kVGltZXN0YW1wIiwicmVzb2x1dGlvbiIsImFzc2Vzc0RhdGFGcmVzaG5lc3MiLCJhZ2UiLCJnZW5lcmF0ZVN5bmNQcmV2aWV3Iiwib3BlcmF0aW9uIiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJsb2ciLCJkaXJlY3Rpb24iLCJzeW5jT3BlcmF0aW9uIiwic3RhdHVzIiwiY2FsY3VsYXRlT3ZlcmFsbFJpc2tMZXZlbCIsInBlcmZvcm1hbmNlTWV0cmljcyIsImR1cmF0aW9uIiwiZGF0YVNpemUiLCJjb25mbGljdHNSZXNvbHZlZCIsInByZXZpZXciLCJzdW1tYXJ5IiwidG90YWxDaGFuZ2VzIiwic2FmZUNoYW5nZXMiLCJjIiwiY2F1dGlvbkNoYW5nZXMiLCJkZXN0cnVjdGl2ZUNoYW5nZXMiLCJlc3RpbWF0ZWREdXJhdGlvbiIsImVzdGltYXRlU3luY0R1cmF0aW9uIiwiZGF0YUZyZXNobmVzcyIsIm1heCIsInRvRml4ZWQiLCJzb21lIiwic2V0dXBTdG9yYWdlTGlzdGVuZXJzIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJzdGFydHNXaXRoIiwibm90aWZ5TGlzdGVuZXJzIiwibG9hZFN5bmNIaXN0b3J5IiwiaGlzdG9yeSIsInN5bmNIaXN0b3J5Iiwib3BlcmF0aW9ucyIsInJvbGxiYWNrUG9pbnRzIiwic2F2ZVN5bmNIaXN0b3J5Iiwic2V0SXRlbSIsImFkZFN5bmNMaXN0ZW5lciIsImNhbGxiYWNrIiwibGlzdGVuZXJzIiwicmVtb3ZlU3luY0xpc3RlbmVyIiwiaW5kZXhPZiIsInNwbGljZSIsImdldFN5bmNIaXN0b3J5IiwiZXhlY3V0ZVN5bmNPcGVyYXRpb24iLCJpc09wZXJhdGlvbkluUHJvZ3Jlc3MiLCJzdWNjZXNzIiwibWVzc2FnZSIsImNyZWF0ZVJvbGxiYWNrUG9pbnQiLCJzeW5jRnJvbUZyb250ZW5kIiwic3luY1RvRnJvbnRlbmQiLCJzbWFydFN5bmMiLCJyZXNldEZyb250ZW5kIiwiRXJyb3IiLCJjaGFuZ2UiLCJhcHBseVF1aXpDaGFuZ2VzIiwiYXBwbHlSZXdhcmRDaGFuZ2VzIiwiYXBwbHlTeXN0ZW1TZXR0aW5nc0NoYW5nZXMiLCJwdXNoUXVpelRvRnJvbnRlbmQiLCJwdXNoUmV3YXJkc1RvRnJvbnRlbmQiLCJwdXNoU3lzdGVtU2V0dGluZ3NUb0Zyb250ZW5kIiwiY29uZmxpY3QiLCJyZXNvbHZlQ29uZmxpY3QiLCJub25Db25mbGljdGluZ0NoYW5nZXMiLCJmcm9udGVuZFF1aXpEYXRhIiwiZnJvbnRlbmRSZXdhcmREYXRhIiwiZnJvbnRlbmRTZXR0aW5nc0RhdGEiLCJhZG1pblF1aXpEYXRhIiwiYWRtaW5SZXdhcmREYXRhIiwiYWRtaW5TZXR0aW5nc0RhdGEiLCJtZXJnZWRWYWx1ZSIsImRlc2NyaXB0aW9uIiwiY29uZmlnU25hcHNob3QiLCJyb2xsYmFja1BvaW50Iiwic2xpY2UiLCJyb2xsYmFja1RvUG9pbnQiLCJyb2xsYmFja0lkIiwiZmluZCIsInJwIiwiY29uZmlnIiwicm9sbGJhY2tPcGVyYXRpb24iLCJnZXRMYXN0T3BlcmF0aW9uIiwidW5kb0xhc3RTeW5jIiwibGFzdE9wZXJhdGlvbiIsInNvcnQiLCJhIiwiYiIsInJlc3VsdCIsImJpZGlyZWN0aW9uYWxTeW5jIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/utils/bidirectionalSync.ts\n"));

/***/ })

});