"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/jaseemadmin/page",{

/***/ "(app-pages-browser)/./src/utils/bidirectionalSync.ts":
/*!****************************************!*\
  !*** ./src/utils/bidirectionalSync.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bidirectionalSync: () => (/* binding */ bidirectionalSync)\n/* harmony export */ });\n/* harmony import */ var _quizDataManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./quizDataManager */ \"(app-pages-browser)/./src/utils/quizDataManager.ts\");\n/* harmony import */ var _rewardDataManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rewardDataManager */ \"(app-pages-browser)/./src/utils/rewardDataManager.ts\");\n/* harmony import */ var _settingsDataManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./settingsDataManager */ \"(app-pages-browser)/./src/utils/settingsDataManager.ts\");\n// Bidirectional Data Synchronization System for TechKwiz Admin Dashboard\n\n\n\nclass BidirectionalSyncService {\n    static getInstance() {\n        if (!BidirectionalSyncService.instance) {\n            BidirectionalSyncService.instance = new BidirectionalSyncService();\n        }\n        return BidirectionalSyncService.instance;\n    }\n    // Get current admin configuration data\n    getAdminConfigData() {\n        const now = Date.now();\n        return {\n            quiz: {\n                questions: _quizDataManager__WEBPACK_IMPORTED_MODULE_0__.quizDataManager.getQuestions() || [],\n                categories: _quizDataManager__WEBPACK_IMPORTED_MODULE_0__.quizDataManager.getCategories() || [],\n                settings: _quizDataManager__WEBPACK_IMPORTED_MODULE_0__.quizDataManager.getSettings() || {},\n                lastModified: parseInt(localStorage.getItem('admin_quiz_questions_updated') || now.toString()),\n                version: this.generateVersion('quiz')\n            },\n            rewards: {\n                achievements: _rewardDataManager__WEBPACK_IMPORTED_MODULE_1__.rewardDataManager.getAchievements() || [],\n                popupSettings: _rewardDataManager__WEBPACK_IMPORTED_MODULE_1__.rewardDataManager.getRewardConfig().popupSettings || {},\n                coinMultipliers: _rewardDataManager__WEBPACK_IMPORTED_MODULE_1__.rewardDataManager.getRewardConfig().coinValues || {},\n                lastModified: parseInt(localStorage.getItem('admin_reward_config_updated') || now.toString()),\n                version: this.generateVersion('rewards')\n            },\n            systemSettings: {\n                featureFlags: _settingsDataManager__WEBPACK_IMPORTED_MODULE_2__.settingsDataManager.getSystemSettings().featureFlags || {},\n                configValues: _settingsDataManager__WEBPACK_IMPORTED_MODULE_2__.settingsDataManager.getSystemSettings() || {},\n                adsConfig: _settingsDataManager__WEBPACK_IMPORTED_MODULE_2__.settingsDataManager.getIntegrationSettings().adsense || {},\n                lastModified: parseInt(localStorage.getItem('admin_settings_updated') || now.toString()),\n                version: this.generateVersion('systemSettings')\n            }\n        };\n    }\n    // Get current frontend configuration data\n    getFrontendConfigData() {\n        const now = Date.now();\n        try {\n            return {\n                quiz: {\n                    questions: JSON.parse(localStorage.getItem('game_quiz_data') || '[]'),\n                    categories: JSON.parse(localStorage.getItem('game_categories') || '[]'),\n                    settings: JSON.parse(localStorage.getItem('game_quiz_settings') || '{}'),\n                    lastModified: parseInt(localStorage.getItem('game_last_sync') || now.toString()),\n                    version: localStorage.getItem('game_quiz_version') || '1.0.0'\n                },\n                rewards: {\n                    achievements: JSON.parse(localStorage.getItem('game_reward_data') || '[]'),\n                    popupSettings: JSON.parse(localStorage.getItem('game_popup_settings') || '{}'),\n                    coinMultipliers: JSON.parse(localStorage.getItem('game_coin_multipliers') || '{}'),\n                    lastModified: parseInt(localStorage.getItem('game_rewards_sync') || now.toString()),\n                    version: localStorage.getItem('game_rewards_version') || '1.0.0'\n                },\n                systemSettings: {\n                    featureFlags: JSON.parse(localStorage.getItem('game_feature_flags') || '{}'),\n                    configValues: JSON.parse(localStorage.getItem('game_settings_data') || '{}'),\n                    adsConfig: JSON.parse(localStorage.getItem('game_ads_config') || '{}'),\n                    lastModified: parseInt(localStorage.getItem('game_settings_sync') || now.toString()),\n                    version: localStorage.getItem('game_settings_version') || '1.0.0'\n                }\n            };\n        } catch (error) {\n            console.error('Error reading frontend config data:', error);\n            return this.getDefaultConfigData();\n        }\n    }\n    // Generate version string based on data hash\n    generateVersion(category) {\n        const timestamp = Date.now();\n        const hash = Math.random().toString(36).substring(2, 8);\n        return \"\".concat(category, \"-\").concat(timestamp, \"-\").concat(hash);\n    }\n    // Get default configuration data\n    getDefaultConfigData() {\n        const now = Date.now();\n        return {\n            quiz: {\n                questions: [],\n                categories: [],\n                settings: {},\n                lastModified: now,\n                version: '1.0.0'\n            },\n            rewards: {\n                achievements: [],\n                popupSettings: {},\n                coinMultipliers: {},\n                lastModified: now,\n                version: '1.0.0'\n            },\n            systemSettings: {\n                featureFlags: {},\n                configValues: {},\n                adsConfig: {},\n                lastModified: now,\n                version: '1.0.0'\n            }\n        };\n    }\n    // Detect changes between admin and frontend data\n    detectChanges(adminData, frontendData) {\n        const changes = [];\n        // Compare quiz data\n        changes.push(...this.compareQuizData(adminData.quiz, frontendData.quiz));\n        // Compare rewards data\n        changes.push(...this.compareRewardsData(adminData.rewards, frontendData.rewards));\n        // Compare system settings\n        changes.push(...this.compareSystemSettings(adminData.systemSettings, frontendData.systemSettings));\n        return changes;\n    }\n    // Compare quiz data with detailed question-level analysis\n    compareQuizData(admin, frontend) {\n        const changes = [];\n        // Detailed question comparison\n        const questionChanges = this.compareQuestions(admin.questions || [], frontend.questions || []);\n        changes.push(...questionChanges);\n        // Compare categories\n        if (JSON.stringify(admin.categories) !== JSON.stringify(frontend.categories)) {\n            changes.push({\n                category: 'quiz',\n                field: 'categories',\n                action: 'modify',\n                oldValue: frontend.categories,\n                newValue: admin.categories,\n                riskLevel: 'safe',\n                impact: \"Categories: \".concat(frontend.categories.length, \" â†’ \").concat(admin.categories.length),\n                details: {\n                    added: admin.categories.filter((cat)=>!frontend.categories.includes(cat)),\n                    removed: frontend.categories.filter((cat)=>!admin.categories.includes(cat))\n                }\n            });\n        }\n        // Compare settings\n        if (JSON.stringify(admin.settings) !== JSON.stringify(frontend.settings)) {\n            changes.push({\n                category: 'quiz',\n                field: 'settings',\n                action: 'modify',\n                oldValue: frontend.settings,\n                newValue: admin.settings,\n                riskLevel: 'caution',\n                impact: 'Quiz settings configuration updated',\n                details: {\n                    settingsChanged: this.getSettingsChanges(frontend.settings, admin.settings)\n                }\n            });\n        }\n        return changes;\n    }\n    // Detailed question comparison at individual question level\n    compareQuestions(adminQuestions, frontendQuestions) {\n        const changes = [];\n        // Create maps for efficient lookup\n        const adminMap = new Map(adminQuestions.map((q)=>[\n                q.id,\n                q\n            ]));\n        const frontendMap = new Map(frontendQuestions.map((q)=>[\n                q.id,\n                q\n            ]));\n        // Find added questions (in admin but not in frontend)\n        const addedQuestions = adminQuestions.filter((q)=>!frontendMap.has(q.id));\n        if (addedQuestions.length > 0) {\n            changes.push({\n                category: 'quiz',\n                field: 'questions',\n                action: 'add',\n                oldValue: null,\n                newValue: addedQuestions,\n                riskLevel: 'safe',\n                impact: \"Adding \".concat(addedQuestions.length, \" new question\").concat(addedQuestions.length > 1 ? 's' : ''),\n                details: {\n                    questions: addedQuestions.map((q)=>({\n                            id: q.id,\n                            question: q.question,\n                            category: q.category,\n                            difficulty: q.difficulty,\n                            type: q.type,\n                            options: q.options,\n                            correctAnswer: q.correctAnswer,\n                            funFact: q.funFact,\n                            tags: q.tags\n                        }))\n                }\n            });\n        }\n        // Find removed questions (in frontend but not in admin)\n        const removedQuestions = frontendQuestions.filter((q)=>!adminMap.has(q.id));\n        if (removedQuestions.length > 0) {\n            changes.push({\n                category: 'quiz',\n                field: 'questions',\n                action: 'remove',\n                oldValue: removedQuestions,\n                newValue: null,\n                riskLevel: 'destructive',\n                impact: \"Removing \".concat(removedQuestions.length, \" question\").concat(removedQuestions.length > 1 ? 's' : ''),\n                details: {\n                    questions: removedQuestions.map((q)=>({\n                            id: q.id,\n                            question: q.question,\n                            category: q.category,\n                            difficulty: q.difficulty,\n                            type: q.type,\n                            options: q.options,\n                            correctAnswer: q.correctAnswer,\n                            funFact: q.funFact,\n                            tags: q.tags\n                        }))\n                }\n            });\n        }\n        // Find modified questions (same ID but different content)\n        const modifiedQuestions = [];\n        for (const adminQ of adminQuestions){\n            const frontendQ = frontendMap.get(adminQ.id);\n            if (frontendQ && JSON.stringify(adminQ) !== JSON.stringify(frontendQ)) {\n                const questionDiff = this.getQuestionDiff(frontendQ, adminQ);\n                modifiedQuestions.push({\n                    id: adminQ.id,\n                    oldQuestion: frontendQ,\n                    newQuestion: adminQ,\n                    changes: questionDiff\n                });\n            }\n        }\n        if (modifiedQuestions.length > 0) {\n            changes.push({\n                category: 'quiz',\n                field: 'questions',\n                action: 'modify',\n                oldValue: modifiedQuestions.map((m)=>m.oldQuestion),\n                newValue: modifiedQuestions.map((m)=>m.newQuestion),\n                riskLevel: 'caution',\n                impact: \"Modifying \".concat(modifiedQuestions.length, \" question\").concat(modifiedQuestions.length > 1 ? 's' : ''),\n                details: {\n                    questions: modifiedQuestions\n                }\n            });\n        }\n        return changes;\n    }\n    // Get detailed diff for a single question\n    getQuestionDiff(oldQuestion, newQuestion) {\n        const diff = {};\n        if (oldQuestion.question !== newQuestion.question) {\n            diff.question = {\n                old: oldQuestion.question,\n                new: newQuestion.question\n            };\n        }\n        if (JSON.stringify(oldQuestion.options) !== JSON.stringify(newQuestion.options)) {\n            diff.options = {\n                old: oldQuestion.options,\n                new: newQuestion.options\n            };\n        }\n        if (oldQuestion.correctAnswer !== newQuestion.correctAnswer) {\n            diff.correctAnswer = {\n                old: {\n                    index: oldQuestion.correctAnswer,\n                    text: oldQuestion.options[oldQuestion.correctAnswer]\n                },\n                new: {\n                    index: newQuestion.correctAnswer,\n                    text: newQuestion.options[newQuestion.correctAnswer]\n                }\n            };\n        }\n        if (oldQuestion.category !== newQuestion.category) {\n            diff.category = {\n                old: oldQuestion.category,\n                new: newQuestion.category\n            };\n        }\n        if (oldQuestion.difficulty !== newQuestion.difficulty) {\n            diff.difficulty = {\n                old: oldQuestion.difficulty,\n                new: newQuestion.difficulty\n            };\n        }\n        if (oldQuestion.type !== newQuestion.type) {\n            diff.type = {\n                old: oldQuestion.type,\n                new: newQuestion.type\n            };\n        }\n        if (oldQuestion.funFact !== newQuestion.funFact) {\n            diff.funFact = {\n                old: oldQuestion.funFact,\n                new: newQuestion.funFact\n            };\n        }\n        if (JSON.stringify(oldQuestion.tags) !== JSON.stringify(newQuestion.tags)) {\n            diff.tags = {\n                old: oldQuestion.tags || [],\n                new: newQuestion.tags || []\n            };\n        }\n        return diff;\n    }\n    // Get settings changes\n    getSettingsChanges(oldSettings, newSettings) {\n        const changes = {};\n        for(const key in newSettings){\n            if (JSON.stringify(oldSettings[key]) !== JSON.stringify(newSettings[key])) {\n                changes[key] = {\n                    old: oldSettings[key],\n                    new: newSettings[key]\n                };\n            }\n        }\n        return changes;\n    }\n    // Compare rewards data\n    compareRewardsData(admin, frontend) {\n        const changes = [];\n        // Compare achievements\n        if (JSON.stringify(admin.achievements) !== JSON.stringify(frontend.achievements)) {\n            changes.push({\n                category: 'rewards',\n                field: 'achievements',\n                action: 'modify',\n                oldValue: frontend.achievements,\n                newValue: admin.achievements,\n                riskLevel: 'safe',\n                impact: \"Achievements: \".concat(frontend.achievements.length, \" â†’ \").concat(admin.achievements.length)\n            });\n        }\n        // Compare popup settings\n        if (JSON.stringify(admin.popupSettings) !== JSON.stringify(frontend.popupSettings)) {\n            changes.push({\n                category: 'rewards',\n                field: 'popupSettings',\n                action: 'modify',\n                oldValue: frontend.popupSettings,\n                newValue: admin.popupSettings,\n                riskLevel: 'caution',\n                impact: 'Reward popup configuration updated'\n            });\n        }\n        // Compare coin multipliers\n        if (JSON.stringify(admin.coinMultipliers) !== JSON.stringify(frontend.coinMultipliers)) {\n            changes.push({\n                category: 'rewards',\n                field: 'coinMultipliers',\n                action: 'modify',\n                oldValue: frontend.coinMultipliers,\n                newValue: admin.coinMultipliers,\n                riskLevel: 'caution',\n                impact: 'Coin multiplier settings updated'\n            });\n        }\n        return changes;\n    }\n    // Compare system settings\n    compareSystemSettings(admin, frontend) {\n        const changes = [];\n        // Compare feature flags\n        if (JSON.stringify(admin.featureFlags) !== JSON.stringify(frontend.featureFlags)) {\n            changes.push({\n                category: 'systemSettings',\n                field: 'featureFlags',\n                action: 'modify',\n                oldValue: frontend.featureFlags,\n                newValue: admin.featureFlags,\n                riskLevel: 'caution',\n                impact: 'Feature flags configuration updated'\n            });\n        }\n        // Compare config values\n        if (JSON.stringify(admin.configValues) !== JSON.stringify(frontend.configValues)) {\n            changes.push({\n                category: 'systemSettings',\n                field: 'configValues',\n                action: 'modify',\n                oldValue: frontend.configValues,\n                newValue: admin.configValues,\n                riskLevel: 'caution',\n                impact: 'System configuration values updated'\n            });\n        }\n        // Compare ads config\n        if (JSON.stringify(admin.adsConfig) !== JSON.stringify(frontend.adsConfig)) {\n            changes.push({\n                category: 'systemSettings',\n                field: 'adsConfig',\n                action: 'modify',\n                oldValue: frontend.adsConfig,\n                newValue: admin.adsConfig,\n                riskLevel: 'safe',\n                impact: 'Ads configuration updated'\n            });\n        }\n        return changes;\n    }\n    // Detect conflicts between admin and frontend data\n    detectConflicts(adminData, frontendData) {\n        const conflicts = [];\n        // Check for timestamp conflicts\n        Object.keys(adminData).forEach((category)=>{\n            const adminCat = adminData[category];\n            const frontendCat = frontendData[category];\n            if (adminCat.lastModified > 0 && frontendCat.lastModified > 0) {\n                const timeDiff = Math.abs(adminCat.lastModified - frontendCat.lastModified);\n                // If both were modified within 5 minutes of each other, it's a potential conflict\n                if (timeDiff < 300000 && adminCat.version !== frontendCat.version) {\n                    conflicts.push({\n                        field: \"\".concat(category, \".version\"),\n                        adminValue: adminCat.version,\n                        frontendValue: frontendCat.version,\n                        adminTimestamp: adminCat.lastModified,\n                        frontendTimestamp: frontendCat.lastModified,\n                        resolution: adminCat.lastModified > frontendCat.lastModified ? 'use-admin' : 'use-frontend'\n                    });\n                }\n            }\n        });\n        return conflicts;\n    }\n    // Assess data freshness\n    assessDataFreshness(timestamp) {\n        const now = Date.now();\n        const age = now - timestamp;\n        if (age < 300000) return 'fresh' // < 5 minutes\n        ;\n        if (age < 1800000) return 'stale' // < 30 minutes\n        ;\n        return 'outdated' // > 30 minutes\n        ;\n    }\n    // Generate sync preview\n    async generateSyncPreview(operation) {\n        const startTime = performance.now();\n        console.log(\"\\uD83D\\uDD04 Generating sync preview for operation: \".concat(operation));\n        const adminData = this.getAdminConfigData();\n        const frontendData = this.getFrontendConfigData();\n        let changes = [];\n        let direction = 'bidirectional';\n        switch(operation){\n            case 'pull':\n                changes = this.detectChanges(frontendData, adminData);\n                direction = 'frontend-to-admin';\n                break;\n            case 'push':\n                changes = this.detectChanges(adminData, frontendData);\n                direction = 'admin-to-frontend';\n                break;\n            case 'smart':\n                changes = this.detectChanges(adminData, frontendData);\n                direction = 'bidirectional';\n                break;\n            case 'reset':\n                changes = this.detectChanges(adminData, frontendData);\n                direction = 'admin-to-frontend';\n                break;\n        }\n        const conflicts = this.detectConflicts(adminData, frontendData);\n        const syncOperation = {\n            id: \"sync-\".concat(Date.now(), \"-\").concat(Math.random().toString(36).substring(2, 8)),\n            type: operation,\n            direction,\n            timestamp: Date.now(),\n            changes,\n            status: 'pending',\n            riskLevel: this.calculateOverallRiskLevel(changes),\n            performanceMetrics: {\n                duration: performance.now() - startTime,\n                dataSize: JSON.stringify({\n                    adminData,\n                    frontendData\n                }).length,\n                conflictsResolved: conflicts.length\n            }\n        };\n        const preview = {\n            operation: syncOperation,\n            conflicts,\n            summary: {\n                totalChanges: changes.length,\n                safeChanges: changes.filter((c)=>c.riskLevel === 'safe').length,\n                cautionChanges: changes.filter((c)=>c.riskLevel === 'caution').length,\n                destructiveChanges: changes.filter((c)=>c.riskLevel === 'destructive').length,\n                estimatedDuration: this.estimateSyncDuration(changes)\n            },\n            dataFreshness: {\n                admin: this.assessDataFreshness(Math.max(adminData.quiz.lastModified, adminData.rewards.lastModified, adminData.systemSettings.lastModified)),\n                frontend: this.assessDataFreshness(Math.max(frontendData.quiz.lastModified, frontendData.rewards.lastModified, frontendData.systemSettings.lastModified))\n            }\n        };\n        console.log(\"\\uD83D\\uDD04 Sync preview generated in \".concat(preview.operation.performanceMetrics.duration.toFixed(2), \"ms\"));\n        return preview;\n    }\n    // Calculate overall risk level\n    calculateOverallRiskLevel(changes) {\n        if (changes.some((c)=>c.riskLevel === 'destructive')) return 'destructive';\n        if (changes.some((c)=>c.riskLevel === 'caution')) return 'caution';\n        return 'safe';\n    }\n    // Estimate sync duration\n    estimateSyncDuration(changes) {\n        // Base time + time per change\n        return 100 + changes.length * 50 // milliseconds\n        ;\n    }\n    // Setup storage listeners for real-time updates\n    setupStorageListeners() {\n        if (false) {}\n        window.addEventListener('storage', (e)=>{\n            var _e_key, _e_key1;\n            if (((_e_key = e.key) === null || _e_key === void 0 ? void 0 : _e_key.startsWith('admin_')) || ((_e_key1 = e.key) === null || _e_key1 === void 0 ? void 0 : _e_key1.startsWith('game_'))) {\n                console.log('ðŸ”„ Storage change detected, updating sync preview:', e.key);\n                this.notifyListeners();\n            }\n        });\n    }\n    // Load sync history from localStorage\n    loadSyncHistory() {\n        try {\n            const history = localStorage.getItem('bidirectional_sync_history');\n            if (history) {\n                this.syncHistory = JSON.parse(history);\n            }\n        } catch (error) {\n            console.error('Error loading sync history:', error);\n            this.syncHistory = {\n                operations: [],\n                rollbackPoints: []\n            };\n        }\n    }\n    // Save sync history to localStorage\n    saveSyncHistory() {\n        try {\n            localStorage.setItem('bidirectional_sync_history', JSON.stringify(this.syncHistory));\n        } catch (error) {\n            console.error('Error saving sync history:', error);\n        }\n    }\n    // Add sync listener\n    addSyncListener(callback) {\n        this.listeners.push(callback);\n    }\n    // Remove sync listener\n    removeSyncListener(callback) {\n        const index = this.listeners.indexOf(callback);\n        if (index > -1) {\n            this.listeners.splice(index, 1);\n        }\n    }\n    // Notify all listeners\n    async notifyListeners() {\n        if (this.listeners.length > 0) {\n            try {\n                const preview = await this.generateSyncPreview('smart');\n                this.listeners.forEach((callback)=>{\n                    try {\n                        callback(preview);\n                    } catch (error) {\n                        console.error('Error in sync listener:', error);\n                    }\n                });\n            } catch (error) {\n                console.error('Error generating preview for listeners:', error);\n            }\n        }\n    }\n    // Get sync history\n    getSyncHistory() {\n        return {\n            ...this.syncHistory\n        };\n    }\n    // Execute sync operation\n    async executeSyncOperation(preview) {\n        if (this.isOperationInProgress) {\n            return {\n                success: false,\n                message: 'Another sync operation is in progress',\n                operation: preview.operation\n            };\n        }\n        this.isOperationInProgress = true;\n        const startTime = performance.now();\n        try {\n            console.log(\"\\uD83D\\uDD04 Executing sync operation: \".concat(preview.operation.type));\n            // Create rollback point\n            await this.createRollbackPoint(\"Before \".concat(preview.operation.type, \" operation\"));\n            // Apply changes based on operation type\n            switch(preview.operation.type){\n                case 'pull':\n                    await this.syncFromFrontend(preview.operation.changes);\n                    break;\n                case 'push':\n                    await this.syncToFrontend(preview.operation.changes);\n                    break;\n                case 'smart':\n                    await this.smartSync(preview.operation.changes, preview.conflicts);\n                    break;\n                case 'reset':\n                    await this.resetFrontend();\n                    break;\n            }\n            // Update operation status\n            preview.operation.status = 'completed';\n            preview.operation.performanceMetrics.duration = performance.now() - startTime;\n            // Add to history\n            this.syncHistory.operations.push(preview.operation);\n            this.saveSyncHistory();\n            console.log(\"\\uD83D\\uDD04 Sync operation completed in \".concat(preview.operation.performanceMetrics.duration.toFixed(2), \"ms\"));\n            return {\n                success: true,\n                message: \"\".concat(preview.operation.type, \" operation completed successfully\"),\n                operation: preview.operation\n            };\n        } catch (error) {\n            console.error('ðŸ”„ Sync operation failed:', error);\n            // Mark operation as failed\n            preview.operation.status = 'failed';\n            preview.operation.performanceMetrics.duration = performance.now() - startTime;\n            // Add to history\n            this.syncHistory.operations.push(preview.operation);\n            this.saveSyncHistory();\n            return {\n                success: false,\n                message: error instanceof Error ? error.message : 'Sync operation failed',\n                operation: preview.operation\n            };\n        } finally{\n            this.isOperationInProgress = false;\n        }\n    }\n    // Sync from frontend to admin\n    async syncFromFrontend(changes) {\n        const frontendData = this.getFrontendConfigData();\n        for (const change of changes){\n            switch(change.category){\n                case 'quiz':\n                    await this.applyQuizChanges(change, frontendData.quiz);\n                    break;\n                case 'rewards':\n                    await this.applyRewardChanges(change, frontendData.rewards);\n                    break;\n                case 'systemSettings':\n                    await this.applySystemSettingsChanges(change, frontendData.systemSettings);\n                    break;\n            }\n        }\n        // Update admin timestamps\n        localStorage.setItem('admin_last_sync_from_frontend', Date.now().toString());\n    }\n    // Sync from admin to frontend\n    async syncToFrontend(changes) {\n        const adminData = this.getAdminConfigData();\n        for (const change of changes){\n            switch(change.category){\n                case 'quiz':\n                    await this.pushQuizToFrontend(adminData.quiz);\n                    break;\n                case 'rewards':\n                    await this.pushRewardsToFrontend(adminData.rewards);\n                    break;\n                case 'systemSettings':\n                    await this.pushSystemSettingsToFrontend(adminData.systemSettings);\n                    break;\n            }\n        }\n        // Update frontend timestamps\n        localStorage.setItem('game_last_sync', Date.now().toString());\n    }\n    // Smart sync with conflict resolution\n    async smartSync(changes, conflicts) {\n        // Resolve conflicts first\n        for (const conflict of conflicts){\n            await this.resolveConflict(conflict);\n        }\n        // Apply non-conflicting changes\n        const nonConflictingChanges = changes.filter((change)=>!conflicts.some((conflict)=>conflict.field.includes(change.field)));\n        await this.syncToFrontend(nonConflictingChanges);\n    }\n    // Reset frontend with admin data\n    async resetFrontend() {\n        const adminData = this.getAdminConfigData();\n        // Push all admin data to frontend\n        await this.pushQuizToFrontend(adminData.quiz);\n        await this.pushRewardsToFrontend(adminData.rewards);\n        await this.pushSystemSettingsToFrontend(adminData.systemSettings);\n        // Update timestamps\n        localStorage.setItem('game_last_sync', Date.now().toString());\n        localStorage.setItem('game_reset_timestamp', Date.now().toString());\n    }\n    // Apply quiz changes to admin\n    async applyQuizChanges(change, frontendQuizData) {\n        switch(change.field){\n            case 'questions':\n                // Update admin questions with frontend data\n                localStorage.setItem('admin_quiz_questions', JSON.stringify(frontendQuizData.questions));\n                break;\n            case 'categories':\n                localStorage.setItem('admin_quiz_categories', JSON.stringify(frontendQuizData.categories));\n                break;\n            case 'settings':\n                localStorage.setItem('admin_quiz_settings', JSON.stringify(frontendQuizData.settings));\n                break;\n        }\n        localStorage.setItem('admin_quiz_questions_updated', Date.now().toString());\n    }\n    // Apply reward changes to admin\n    async applyRewardChanges(change, frontendRewardData) {\n        switch(change.field){\n            case 'achievements':\n                localStorage.setItem('admin_reward_achievements', JSON.stringify(frontendRewardData.achievements));\n                break;\n            case 'popupSettings':\n                localStorage.setItem('admin_reward_popup_settings', JSON.stringify(frontendRewardData.popupSettings));\n                break;\n            case 'coinMultipliers':\n                localStorage.setItem('admin_reward_coin_multipliers', JSON.stringify(frontendRewardData.coinMultipliers));\n                break;\n        }\n        localStorage.setItem('admin_reward_config_updated', Date.now().toString());\n    }\n    // Apply system settings changes to admin\n    async applySystemSettingsChanges(change, frontendSettingsData) {\n        switch(change.field){\n            case 'featureFlags':\n                localStorage.setItem('admin_feature_flags', JSON.stringify(frontendSettingsData.featureFlags));\n                break;\n            case 'configValues':\n                localStorage.setItem('admin_system_settings', JSON.stringify(frontendSettingsData.configValues));\n                break;\n            case 'adsConfig':\n                localStorage.setItem('admin_ads_config', JSON.stringify(frontendSettingsData.adsConfig));\n                break;\n        }\n        localStorage.setItem('admin_settings_updated', Date.now().toString());\n    }\n    // Push quiz data to frontend\n    async pushQuizToFrontend(adminQuizData) {\n        localStorage.setItem('game_quiz_data', JSON.stringify(adminQuizData.questions));\n        localStorage.setItem('game_categories', JSON.stringify(adminQuizData.categories));\n        localStorage.setItem('game_quiz_settings', JSON.stringify(adminQuizData.settings));\n        localStorage.setItem('game_quiz_version', adminQuizData.version);\n    }\n    // Push rewards data to frontend\n    async pushRewardsToFrontend(adminRewardData) {\n        localStorage.setItem('game_reward_data', JSON.stringify(adminRewardData.achievements));\n        localStorage.setItem('game_popup_settings', JSON.stringify(adminRewardData.popupSettings));\n        localStorage.setItem('game_coin_multipliers', JSON.stringify(adminRewardData.coinMultipliers));\n        localStorage.setItem('game_rewards_version', adminRewardData.version);\n        localStorage.setItem('game_rewards_sync', Date.now().toString());\n    }\n    // Push system settings to frontend\n    async pushSystemSettingsToFrontend(adminSettingsData) {\n        localStorage.setItem('game_feature_flags', JSON.stringify(adminSettingsData.featureFlags));\n        localStorage.setItem('game_settings_data', JSON.stringify(adminSettingsData.configValues));\n        localStorage.setItem('game_ads_config', JSON.stringify(adminSettingsData.adsConfig));\n        localStorage.setItem('game_settings_version', adminSettingsData.version);\n        localStorage.setItem('game_settings_sync', Date.now().toString());\n    }\n    // Resolve conflict\n    async resolveConflict(conflict) {\n        console.log(\"\\uD83D\\uDD04 Resolving conflict for \".concat(conflict.field, \": \").concat(conflict.resolution));\n        switch(conflict.resolution){\n            case 'use-admin':\n                break;\n            case 'use-frontend':\n                break;\n            case 'merge':\n                // Use merged value if available\n                if (conflict.mergedValue) {\n                // Apply merged value to both admin and frontend\n                }\n                break;\n            case 'manual':\n                // Manual resolution required - throw error to prompt user\n                throw new Error(\"Manual resolution required for \".concat(conflict.field));\n        }\n    }\n    // Create rollback point\n    async createRollbackPoint(description) {\n        const configSnapshot = this.getAdminConfigData();\n        const rollbackPoint = {\n            id: \"rollback-\".concat(Date.now(), \"-\").concat(Math.random().toString(36).substring(2, 8)),\n            timestamp: Date.now(),\n            description,\n            configSnapshot\n        };\n        this.syncHistory.rollbackPoints.push(rollbackPoint);\n        // Keep only last 10 rollback points\n        if (this.syncHistory.rollbackPoints.length > 10) {\n            this.syncHistory.rollbackPoints = this.syncHistory.rollbackPoints.slice(-10);\n        }\n        this.saveSyncHistory();\n        console.log(\"\\uD83D\\uDD04 Rollback point created: \".concat(description));\n    }\n    // Rollback to specific point\n    async rollbackToPoint(rollbackId) {\n        try {\n            const rollbackPoint = this.syncHistory.rollbackPoints.find((rp)=>rp.id === rollbackId);\n            if (!rollbackPoint) {\n                return {\n                    success: false,\n                    message: 'Rollback point not found'\n                };\n            }\n            console.log(\"\\uD83D\\uDD04 Rolling back to: \".concat(rollbackPoint.description));\n            // Restore admin configuration\n            const config = rollbackPoint.configSnapshot;\n            // Restore quiz data\n            localStorage.setItem('admin_quiz_questions', JSON.stringify(config.quiz.questions));\n            localStorage.setItem('admin_quiz_categories', JSON.stringify(config.quiz.categories));\n            localStorage.setItem('admin_quiz_settings', JSON.stringify(config.quiz.settings));\n            // Restore reward data\n            localStorage.setItem('admin_reward_achievements', JSON.stringify(config.rewards.achievements));\n            localStorage.setItem('admin_reward_popup_settings', JSON.stringify(config.rewards.popupSettings));\n            localStorage.setItem('admin_reward_coin_multipliers', JSON.stringify(config.rewards.coinMultipliers));\n            // Restore system settings\n            localStorage.setItem('admin_feature_flags', JSON.stringify(config.systemSettings.featureFlags));\n            localStorage.setItem('admin_system_settings', JSON.stringify(config.systemSettings.configValues));\n            localStorage.setItem('admin_ads_config', JSON.stringify(config.systemSettings.adsConfig));\n            // Update timestamps\n            localStorage.setItem('admin_rollback_timestamp', Date.now().toString());\n            // Create operation record\n            const rollbackOperation = {\n                id: \"rollback-op-\".concat(Date.now()),\n                type: 'push',\n                direction: 'admin-to-frontend',\n                timestamp: Date.now(),\n                changes: [],\n                status: 'completed',\n                riskLevel: 'caution',\n                performanceMetrics: {\n                    duration: 0,\n                    dataSize: JSON.stringify(config).length,\n                    conflictsResolved: 0\n                }\n            };\n            this.syncHistory.operations.push(rollbackOperation);\n            this.saveSyncHistory();\n            return {\n                success: true,\n                message: \"Successfully rolled back to: \".concat(rollbackPoint.description)\n            };\n        } catch (error) {\n            console.error('ðŸ”„ Rollback failed:', error);\n            return {\n                success: false,\n                message: error instanceof Error ? error.message : 'Rollback failed'\n            };\n        }\n    }\n    // Get last operation\n    getLastOperation() {\n        return this.syncHistory.operations.length > 0 ? this.syncHistory.operations[this.syncHistory.operations.length - 1] : null;\n    }\n    // Undo last sync\n    async undoLastSync() {\n        const lastOperation = this.getLastOperation();\n        if (!lastOperation) {\n            return {\n                success: false,\n                message: 'No sync operations to undo'\n            };\n        }\n        if (lastOperation.status === 'rolled-back') {\n            return {\n                success: false,\n                message: 'Last operation was already rolled back'\n            };\n        }\n        // Find the rollback point before the last operation\n        const rollbackPoint = this.syncHistory.rollbackPoints.filter((rp)=>rp.timestamp < lastOperation.timestamp).sort((a, b)=>b.timestamp - a.timestamp)[0];\n        if (!rollbackPoint) {\n            return {\n                success: false,\n                message: 'No rollback point available before last operation'\n            };\n        }\n        const result = await this.rollbackToPoint(rollbackPoint.id);\n        if (result.success) {\n            // Mark last operation as rolled back\n            lastOperation.status = 'rolled-back';\n            this.saveSyncHistory();\n        }\n        return result;\n    }\n    // Check if operation is in progress\n    isOperationInProgress() {\n        return this.isOperationInProgress;\n    }\n    constructor(){\n        this.syncHistory = {\n            operations: [],\n            rollbackPoints: []\n        };\n        this.listeners = [];\n        this.isOperationInProgress = false;\n        if (true) {\n            this.loadSyncHistory();\n            this.setupStorageListeners();\n        }\n    }\n}\n// Export singleton instance\nconst bidirectionalSync = BidirectionalSyncService.getInstance();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy91dGlscy9iaWRpcmVjdGlvbmFsU3luYy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEseUVBQXlFO0FBQ3RCO0FBQ0k7QUFDSTtBQXVGM0QsTUFBTUc7SUFNSixPQUFPQyxjQUF3QztRQUM3QyxJQUFJLENBQUNELHlCQUF5QkUsUUFBUSxFQUFFO1lBQ3RDRix5QkFBeUJFLFFBQVEsR0FBRyxJQUFJRjtRQUMxQztRQUNBLE9BQU9BLHlCQUF5QkUsUUFBUTtJQUMxQztJQVNBLHVDQUF1QztJQUMvQkMscUJBQWlDO1FBQ3ZDLE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7UUFFcEIsT0FBTztZQUNMRSxNQUFNO2dCQUNKQyxXQUFXViw2REFBZUEsQ0FBQ1csWUFBWSxNQUFNLEVBQUU7Z0JBQy9DQyxZQUFZWiw2REFBZUEsQ0FBQ2EsYUFBYSxNQUFNLEVBQUU7Z0JBQ2pEQyxVQUFVZCw2REFBZUEsQ0FBQ2UsV0FBVyxNQUFNLENBQUM7Z0JBQzVDQyxjQUFjQyxTQUFTQyxhQUFhQyxPQUFPLENBQUMsbUNBQW1DWixJQUFJYSxRQUFRO2dCQUMzRkMsU0FBUyxJQUFJLENBQUNDLGVBQWUsQ0FBQztZQUNoQztZQUNBQyxTQUFTO2dCQUNQQyxjQUFjdkIsaUVBQWlCQSxDQUFDd0IsZUFBZSxNQUFNLEVBQUU7Z0JBQ3ZEQyxlQUFlekIsaUVBQWlCQSxDQUFDMEIsZUFBZSxHQUFHRCxhQUFhLElBQUksQ0FBQztnQkFDckVFLGlCQUFpQjNCLGlFQUFpQkEsQ0FBQzBCLGVBQWUsR0FBR0UsVUFBVSxJQUFJLENBQUM7Z0JBQ3BFYixjQUFjQyxTQUFTQyxhQUFhQyxPQUFPLENBQUMsa0NBQWtDWixJQUFJYSxRQUFRO2dCQUMxRkMsU0FBUyxJQUFJLENBQUNDLGVBQWUsQ0FBQztZQUNoQztZQUNBUSxnQkFBZ0I7Z0JBQ2RDLGNBQWM3QixxRUFBbUJBLENBQUM4QixpQkFBaUIsR0FBR0QsWUFBWSxJQUFJLENBQUM7Z0JBQ3ZFRSxjQUFjL0Is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QyxJQUFNQSxFQUFFNUssU0FBUyxHQUFHMkssRUFBRTNLLFNBQVMsQ0FBQyxDQUFDLEVBQUU7UUFFL0MsSUFBSSxDQUFDK0osZUFBZTtZQUNsQixPQUFPO2dCQUFFM0IsU0FBUztnQkFBT0MsU0FBUztZQUFvRDtRQUN4RjtRQUVBLE1BQU13QyxTQUFTLE1BQU0sSUFBSSxDQUFDWixlQUFlLENBQUNGLGNBQWN4SCxFQUFFO1FBRTFELElBQUlzSSxPQUFPekMsT0FBTyxFQUFFO1lBQ2xCLHFDQUFxQztZQUNyQ3FDLGNBQWM5RSxNQUFNLEdBQUc7WUFDdkIsSUFBSSxDQUFDOEIsZUFBZTtRQUN0QjtRQUVBLE9BQU9vRDtJQUNUO0lBRUEsb0NBQW9DO0lBQ3BDMUMsd0JBQWlDO1FBQy9CLE9BQU8sSUFBSSxDQUFDQSxxQkFBcUI7SUFDbkM7SUF0OEJBLGFBQWM7YUFYTmIsY0FBMkI7WUFBRUMsWUFBWSxFQUFFO1lBQUVDLGdCQUFnQixFQUFFO1FBQUM7YUFDaEVLLFlBQWdELEVBQUU7YUFDbERNLHdCQUF3QjtRQVU5QixJQUFJLElBQTZCLEVBQUU7WUFDakMsSUFBSSxDQUFDZixlQUFlO1lBQ3BCLElBQUksQ0FBQ04scUJBQXFCO1FBQzVCO0lBQ0Y7QUFrOEJGO0FBRUEsNEJBQTRCO0FBQ3JCLE1BQU1nRSxvQkFBb0J2Tix5QkFBeUJDLFdBQVcsR0FBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2phc2VlbS9Eb2N1bWVudHMvR2l0SHViL1RlY2hrd2l6LXY3L2Zyb250ZW5kL3NyYy91dGlscy9iaWRpcmVjdGlvbmFsU3luYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBCaWRpcmVjdGlvbmFsIERhdGEgU3luY2hyb25pemF0aW9uIFN5c3RlbSBmb3IgVGVjaEt3aXogQWRtaW4gRGFzaGJvYXJkXG5pbXBvcnQgeyBxdWl6RGF0YU1hbmFnZXIgfSBmcm9tICcuL3F1aXpEYXRhTWFuYWdlcidcbmltcG9ydCB7IHJld2FyZERhdGFNYW5hZ2VyIH0gZnJvbSAnLi9yZXdhcmREYXRhTWFuYWdlcidcbmltcG9ydCB7IHNldHRpbmdzRGF0YU1hbmFnZXIgfSBmcm9tICcuL3NldHRpbmdzRGF0YU1hbmFnZXInXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlnRGF0YSB7XG4gIHF1aXo6IHtcbiAgICBxdWVzdGlvbnM6IGFueVtdXG4gICAgY2F0ZWdvcmllczogYW55W11cbiAgICBzZXR0aW5nczogYW55XG4gICAgbGFzdE1vZGlmaWVkOiBudW1iZXJcbiAgICB2ZXJzaW9uOiBzdHJpbmdcbiAgfVxuICByZXdhcmRzOiB7XG4gICAgYWNoaWV2ZW1lbnRzOiBhbnlbXVxuICAgIHBvcHVwU2V0dGluZ3M6IGFueVxuICAgIGNvaW5NdWx0aXBsaWVyczogYW55XG4gICAgbGFzdE1vZGlmaWVkOiBudW1iZXJcbiAgICB2ZXJzaW9uOiBzdHJpbmdcbiAgfVxuICBzeXN0ZW1TZXR0aW5nczoge1xuICAgIGZlYXR1cmVGbGFnczogYW55XG4gICAgY29uZmlnVmFsdWVzOiBhbnlcbiAgICBhZHNDb25maWc6IGFueVxuICAgIGxhc3RNb2RpZmllZDogbnVtYmVyXG4gICAgdmVyc2lvbjogc3RyaW5nXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTeW5jT3BlcmF0aW9uIHtcbiAgaWQ6IHN0cmluZ1xuICB0eXBlOiAncHVsbCcgfCAncHVzaCcgfCAnc21hcnQnIHwgJ3Jlc2V0J1xuICBkaXJlY3Rpb246ICdhZG1pbi10by1mcm9udGVuZCcgfCAnZnJvbnRlbmQtdG8tYWRtaW4nIHwgJ2JpZGlyZWN0aW9uYWwnXG4gIHRpbWVzdGFtcDogbnVtYmVyXG4gIGNoYW5nZXM6IENoYW5nZUl0ZW1bXVxuICBzdGF0dXM6ICdwZW5kaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCcgfCAncm9sbGVkLWJhY2snXG4gIHJpc2tMZXZlbDogJ3NhZmUnIHwgJ2NhdXRpb24nIHwgJ2Rlc3RydWN0aXZlJ1xuICBwZXJmb3JtYW5jZU1ldHJpY3M6IHtcbiAgICBkdXJhdGlvbjogbnVtYmVyXG4gICAgZGF0YVNpemU6IG51bWJlclxuICAgIGNvbmZsaWN0c1Jlc29sdmVkOiBudW1iZXJcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYW5nZUl0ZW0ge1xuICBjYXRlZ29yeTogJ3F1aXonIHwgJ3Jld2FyZHMnIHwgJ3N5c3RlbVNldHRpbmdzJ1xuICBmaWVsZDogc3RyaW5nXG4gIGFjdGlvbjogJ2FkZCcgfCAnbW9kaWZ5JyB8ICdkZWxldGUnXG4gIG9sZFZhbHVlOiBhbnlcbiAgbmV3VmFsdWU6IGFueVxuICByaXNrTGV2ZWw6ICdzYWZlJyB8ICdjYXV0aW9uJyB8ICdkZXN0cnVjdGl2ZSdcbiAgaW1wYWN0OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25mbGljdFJlc29sdXRpb24ge1xuICBmaWVsZDogc3RyaW5nXG4gIGFkbWluVmFsdWU6IGFueVxuICBmcm9udGVuZFZhbHVlOiBhbnlcbiAgYWRtaW5UaW1lc3RhbXA6IG51bWJlclxuICBmcm9udGVuZFRpbWVzdGFtcDogbnVtYmVyXG4gIHJlc29sdXRpb246ICd1c2UtYWRtaW4nIHwgJ3VzZS1mcm9udGVuZCcgfCAnbWVyZ2UnIHwgJ21hbnVhbCdcbiAgbWVyZ2VkVmFsdWU/OiBhbnlcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTeW5jUHJldmlldyB7XG4gIG9wZXJhdGlvbjogU3luY09wZXJhdGlvblxuICBjb25mbGljdHM6IENvbmZsaWN0UmVzb2x1dGlvbltdXG4gIHN1bW1hcnk6IHtcbiAgICB0b3RhbENoYW5nZXM6IG51bWJlclxuICAgIHNhZmVDaGFuZ2VzOiBudW1iZXJcbiAgICBjYXV0aW9uQ2hhbmdlczogbnVtYmVyXG4gICAgZGVzdHJ1Y3RpdmVDaGFuZ2VzOiBudW1iZXJcbiAgICBlc3RpbWF0ZWREdXJhdGlvbjogbnVtYmVyXG4gIH1cbiAgZGF0YUZyZXNobmVzczoge1xuICAgIGFkbWluOiAnZnJlc2gnIHwgJ3N0YWxlJyB8ICdvdXRkYXRlZCdcbiAgICBmcm9udGVuZDogJ2ZyZXNoJyB8ICdzdGFsZScgfCAnb3V0ZGF0ZWQnXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTeW5jSGlzdG9yeSB7XG4gIG9wZXJhdGlvbnM6IFN5bmNPcGVyYXRpb25bXVxuICByb2xsYmFja1BvaW50czogQXJyYXk8e1xuICAgIGlkOiBzdHJpbmdcbiAgICB0aW1lc3RhbXA6IG51bWJlclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgICBjb25maWdTbmFwc2hvdDogQ29uZmlnRGF0YVxuICB9PlxufVxuXG5jbGFzcyBCaWRpcmVjdGlvbmFsU3luY1NlcnZpY2Uge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQmlkaXJlY3Rpb25hbFN5bmNTZXJ2aWNlXG4gIHByaXZhdGUgc3luY0hpc3Rvcnk6IFN5bmNIaXN0b3J5ID0geyBvcGVyYXRpb25zOiBbXSwgcm9sbGJhY2tQb2ludHM6IFtdIH1cbiAgcHJpdmF0ZSBsaXN0ZW5lcnM6ICgocHJldmlldzogU3luY1ByZXZpZXcpID0+IHZvaWQpW10gPSBbXVxuICBwcml2YXRlIGlzT3BlcmF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlXG5cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IEJpZGlyZWN0aW9uYWxTeW5jU2VydmljZSB7XG4gICAgaWYgKCFCaWRpcmVjdGlvbmFsU3luY1NlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgIEJpZGlyZWN0aW9uYWxTeW5jU2VydmljZS5pbnN0YW5jZSA9IG5ldyBCaWRpcmVjdGlvbmFsU3luY1NlcnZpY2UoKVxuICAgIH1cbiAgICByZXR1cm4gQmlkaXJlY3Rpb25hbFN5bmNTZXJ2aWNlLmluc3RhbmNlXG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubG9hZFN5bmNIaXN0b3J5KClcbiAgICAgIHRoaXMuc2V0dXBTdG9yYWdlTGlzdGVuZXJzKClcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgY3VycmVudCBhZG1pbiBjb25maWd1cmF0aW9uIGRhdGFcbiAgcHJpdmF0ZSBnZXRBZG1pbkNvbmZpZ0RhdGEoKTogQ29uZmlnRGF0YSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBxdWl6OiB7XG4gICAgICAgIHF1ZXN0aW9uczogcXVpekRhdGFNYW5hZ2VyLmdldFF1ZXN0aW9ucygpIHx8IFtdLFxuICAgICAgICBjYXRlZ29yaWVzOiBxdWl6RGF0YU1hbmFnZXIuZ2V0Q2F0ZWdvcmllcygpIHx8IFtdLFxuICAgICAgICBzZXR0aW5nczogcXVpekRhdGFNYW5hZ2VyLmdldFNldHRpbmdzKCkgfHwge30sXG4gICAgICAgIGxhc3RNb2RpZmllZDogcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FkbWluX3F1aXpfcXVlc3Rpb25zX3VwZGF0ZWQnKSB8fCBub3cudG9TdHJpbmcoKSksXG4gICAgICAgIHZlcnNpb246IHRoaXMuZ2VuZXJhdGVWZXJzaW9uKCdxdWl6JylcbiAgICAgIH0sXG4gICAgICByZXdhcmRzOiB7XG4gICAgICAgIGFjaGlldmVtZW50czogcmV3YXJkRGF0YU1hbmFnZXIuZ2V0QWNoaWV2ZW1lbnRzKCkgfHwgW10sXG4gICAgICAgIHBvcHVwU2V0dGluZ3M6IHJld2FyZERhdGFNYW5hZ2VyLmdldFJld2FyZENvbmZpZygpLnBvcHVwU2V0dGluZ3MgfHwge30sXG4gICAgICAgIGNvaW5NdWx0aXBsaWVyczogcmV3YXJkRGF0YU1hbmFnZXIuZ2V0UmV3YXJkQ29uZmlnKCkuY29pblZhbHVlcyB8fCB7fSxcbiAgICAgICAgbGFzdE1vZGlmaWVkOiBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWRtaW5fcmV3YXJkX2NvbmZpZ191cGRhdGVkJykgfHwgbm93LnRvU3RyaW5nKCkpLFxuICAgICAgICB2ZXJzaW9uOiB0aGlzLmdlbmVyYXRlVmVyc2lvbigncmV3YXJkcycpXG4gICAgICB9LFxuICAgICAgc3lzdGVtU2V0dGluZ3M6IHtcbiAgICAgICAgZmVhdHVyZUZsYWdzOiBzZXR0aW5nc0RhdGFNYW5hZ2VyLmdldFN5c3RlbVNldHRpbmdzKCkuZmVhdHVyZUZsYWdzIHx8IHt9LFxuICAgICAgICBjb25maWdWYWx1ZXM6IHNldHRpbmdzRGF0YU1hbmFnZXIuZ2V0U3lzdGVtU2V0dGluZ3MoKSB8fCB7fSxcbiAgICAgICAgYWRzQ29uZmlnOiBzZXR0aW5nc0RhdGFNYW5hZ2VyLmdldEludGVncmF0aW9uU2V0dGluZ3MoKS5hZHNlbnNlIHx8IHt9LFxuICAgICAgICBsYXN0TW9kaWZpZWQ6IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhZG1pbl9zZXR0aW5nc191cGRhdGVkJykgfHwgbm93LnRvU3RyaW5nKCkpLFxuICAgICAgICB2ZXJzaW9uOiB0aGlzLmdlbmVyYXRlVmVyc2lvbignc3lzdGVtU2V0dGluZ3MnKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBjdXJyZW50IGZyb250ZW5kIGNvbmZpZ3VyYXRpb24gZGF0YVxuICBwcml2YXRlIGdldEZyb250ZW5kQ29uZmlnRGF0YSgpOiBDb25maWdEYXRhIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHF1aXo6IHtcbiAgICAgICAgICBxdWVzdGlvbnM6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfcXVpel9kYXRhJykgfHwgJ1tdJyksXG4gICAgICAgICAgY2F0ZWdvcmllczogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZV9jYXRlZ29yaWVzJykgfHwgJ1tdJyksXG4gICAgICAgICAgc2V0dGluZ3M6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfcXVpel9zZXR0aW5ncycpIHx8ICd7fScpLFxuICAgICAgICAgIGxhc3RNb2RpZmllZDogcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfbGFzdF9zeW5jJykgfHwgbm93LnRvU3RyaW5nKCkpLFxuICAgICAgICAgIHZlcnNpb246IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX3F1aXpfdmVyc2lvbicpIHx8ICcxLjAuMCdcbiAgICAgICAgfSxcbiAgICAgICAgcmV3YXJkczoge1xuICAgICAgICAgIGFjaGlldmVtZW50czogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZV9yZXdhcmRfZGF0YScpIHx8ICdbXScpLFxuICAgICAgICAgIHBvcHVwU2V0dGluZ3M6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfcG9wdXBfc2V0dGluZ3MnKSB8fCAne30nKSxcbiAgICAgICAgICBjb2luTXVsdGlwbGllcnM6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfY29pbl9tdWx0aXBsaWVycycpIHx8ICd7fScpLFxuICAgICAgICAgIGxhc3RNb2RpZmllZDogcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfcmV3YXJkc19zeW5jJykgfHwgbm93LnRvU3RyaW5nKCkpLFxuICAgICAgICAgIHZlcnNpb246IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX3Jld2FyZHNfdmVyc2lvbicpIHx8ICcxLjAuMCdcbiAgICAgICAgfSxcbiAgICAgICAgc3lzdGVtU2V0dGluZ3M6IHtcbiAgICAgICAgICBmZWF0dXJlRmxhZ3M6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfZmVhdHVyZV9mbGFncycpIHx8ICd7fScpLFxuICAgICAgICAgIGNvbmZpZ1ZhbHVlczogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2FtZV9zZXR0aW5nc19kYXRhJykgfHwgJ3t9JyksXG4gICAgICAgICAgYWRzQ29uZmlnOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX2Fkc19jb25maWcnKSB8fCAne30nKSxcbiAgICAgICAgICBsYXN0TW9kaWZpZWQ6IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lX3NldHRpbmdzX3N5bmMnKSB8fCBub3cudG9TdHJpbmcoKSksXG4gICAgICAgICAgdmVyc2lvbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVfc2V0dGluZ3NfdmVyc2lvbicpIHx8ICcxLjAuMCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWFkaW5nIGZyb250ZW5kIGNvbmZpZyBkYXRhOicsIGVycm9yKVxuICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVmYXVsdENvbmZpZ0RhdGEoKVxuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyYXRlIHZlcnNpb24gc3RyaW5nIGJhc2VkIG9uIGRhdGEgaGFzaFxuICBwcml2YXRlIGdlbmVyYXRlVmVyc2lvbihjYXRlZ29yeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpXG4gICAgY29uc3QgaGFzaCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KVxuICAgIHJldHVybiBgJHtjYXRlZ29yeX0tJHt0aW1lc3RhbXB9LSR7aGFzaH1gXG4gIH1cblxuICAvLyBHZXQgZGVmYXVsdCBjb25maWd1cmF0aW9uIGRhdGFcbiAgcHJpdmF0ZSBnZXREZWZhdWx0Q29uZmlnRGF0YSgpOiBDb25maWdEYXRhIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gICAgcmV0dXJuIHtcbiAgICAgIHF1aXo6IHtcbiAgICAgICAgcXVlc3Rpb25zOiBbXSxcbiAgICAgICAgY2F0ZWdvcmllczogW10sXG4gICAgICAgIHNldHRpbmdzOiB7fSxcbiAgICAgICAgbGFzdE1vZGlmaWVkOiBub3csXG4gICAgICAgIHZlcnNpb246ICcxLjAuMCdcbiAgICAgIH0sXG4gICAgICByZXdhcmRzOiB7XG4gICAgICAgIGFjaGlldmVtZW50czogW10sXG4gICAgICAgIHBvcHVwU2V0dGluZ3M6IHt9LFxuICAgICAgICBjb2luTXVsdGlwbGllcnM6IHt9LFxuICAgICAgICBsYXN0TW9kaWZpZWQ6IG5vdyxcbiAgICAgICAgdmVyc2lvbjogJzEuMC4wJ1xuICAgICAgfSxcbiAgICAgIHN5c3RlbVNldHRpbmdzOiB7XG4gICAgICAgIGZlYXR1cmVGbGFnczoge30sXG4gICAgICAgIGNvbmZpZ1ZhbHVlczoge30sXG4gICAgICAgIGFkc0NvbmZpZzoge30sXG4gICAgICAgIGxhc3RNb2RpZmllZDogbm93LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gRGV0ZWN0IGNoYW5nZXMgYmV0d2VlbiBhZG1pbiBhbmQgZnJvbnRlbmQgZGF0YVxuICBkZXRlY3RDaGFuZ2VzKGFkbWluRGF0YTogQ29uZmlnRGF0YSwgZnJvbnRlbmREYXRhOiBDb25maWdEYXRhKTogQ2hhbmdlSXRlbVtdIHtcbiAgICBjb25zdCBjaGFuZ2VzOiBDaGFuZ2VJdGVtW10gPSBbXVxuXG4gICAgLy8gQ29tcGFyZSBxdWl6IGRhdGFcbiAgICBjaGFuZ2VzLnB1c2goLi4udGhpcy5jb21wYXJlUXVpekRhdGEoYWRtaW5EYXRhLnF1aXosIGZyb250ZW5kRGF0YS5xdWl6KSlcbiAgICBcbiAgICAvLyBDb21wYXJlIHJld2FyZHMgZGF0YVxuICAgIGNoYW5nZXMucHVzaCguLi50aGlzLmNvbXBhcmVSZXdhcmRzRGF0YShhZG1pbkRhdGEucmV3YXJkcywgZnJvbnRlbmREYXRhLnJld2FyZHMpKVxuICAgIFxuICAgIC8vIENvbXBhcmUgc3lzdGVtIHNldHRpbmdzXG4gICAgY2hhbmdlcy5wdXNoKC4uLnRoaXMuY29tcGFyZVN5c3RlbVNldHRpbmdzKGFkbWluRGF0YS5zeXN0ZW1TZXR0aW5ncywgZnJvbnRlbmREYXRhLnN5c3RlbVNldHRpbmdzKSlcblxuICAgIHJldHVybiBjaGFuZ2VzXG4gIH1cblxuICAvLyBDb21wYXJlIHF1aXogZGF0YSB3aXRoIGRldGFpbGVkIHF1ZXN0aW9uLWxldmVsIGFuYWx5c2lzXG4gIHByaXZhdGUgY29tcGFyZVF1aXpEYXRhKGFkbWluOiBhbnksIGZyb250ZW5kOiBhbnkpOiBDaGFuZ2VJdGVtW10ge1xuICAgIGNvbnN0IGNoYW5nZXM6IENoYW5nZUl0ZW1bXSA9IFtdXG5cbiAgICAvLyBEZXRhaWxlZCBxdWVzdGlvbiBjb21wYXJpc29uXG4gICAgY29uc3QgcXVlc3Rpb25DaGFuZ2VzID0gdGhpcy5jb21wYXJlUXVlc3Rpb25zKGFkbWluLnF1ZXN0aW9ucyB8fCBbXSwgZnJvbnRlbmQucXVlc3Rpb25zIHx8IFtdKVxuICAgIGNoYW5nZXMucHVzaCguLi5xdWVzdGlvbkNoYW5nZXMpXG5cbiAgICAvLyBDb21wYXJlIGNhdGVnb3JpZXNcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkoYWRtaW4uY2F0ZWdvcmllcykgIT09IEpTT04uc3RyaW5naWZ5KGZyb250ZW5kLmNhdGVnb3JpZXMpKSB7XG4gICAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgICBjYXRlZ29yeTogJ3F1aXonLFxuICAgICAgICBmaWVsZDogJ2NhdGVnb3JpZXMnLFxuICAgICAgICBhY3Rpb246ICdtb2RpZnknLFxuICAgICAgICBvbGRWYWx1ZTogZnJvbnRlbmQuY2F0ZWdvcmllcyxcbiAgICAgICAgbmV3VmFsdWU6IGFkbWluLmNhdGVnb3JpZXMsXG4gICAgICAgIHJpc2tMZXZlbDogJ3NhZmUnLFxuICAgICAgICBpbXBhY3Q6IGBDYXRlZ29yaWVzOiAke2Zyb250ZW5kLmNhdGVnb3JpZXMubGVuZ3RofSDihpIgJHthZG1pbi5jYXRlZ29yaWVzLmxlbmd0aH1gLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgYWRkZWQ6IGFkbWluLmNhdGVnb3JpZXMuZmlsdGVyKChjYXQ6IHN0cmluZykgPT4gIWZyb250ZW5kLmNhdGVnb3JpZXMuaW5jbHVkZXMoY2F0KSksXG4gICAgICAgICAgcmVtb3ZlZDogZnJvbnRlbmQuY2F0ZWdvcmllcy5maWx0ZXIoKGNhdDogc3RyaW5nKSA9PiAhYWRtaW4uY2F0ZWdvcmllcy5pbmNsdWRlcyhjYXQpKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIENvbXBhcmUgc2V0dGluZ3NcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkoYWRtaW4uc2V0dGluZ3MpICE9PSBKU09OLnN0cmluZ2lmeShmcm9udGVuZC5zZXR0aW5ncykpIHtcbiAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgIGNhdGVnb3J5OiAncXVpeicsXG4gICAgICAgIGZpZWxkOiAnc2V0dGluZ3MnLFxuICAgICAgICBhY3Rpb246ICdtb2RpZnknLFxuICAgICAgICBvbGRWYWx1ZTogZnJvbnRlbmQuc2V0dGluZ3MsXG4gICAgICAgIG5ld1ZhbHVlOiBhZG1pbi5zZXR0aW5ncyxcbiAgICAgICAgcmlza0xldmVsOiAnY2F1dGlvbicsXG4gICAgICAgIGltcGFjdDogJ1F1aXogc2V0dGluZ3MgY29uZmlndXJhdGlvbiB1cGRhdGVkJyxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHNldHRpbmdzQ2hhbmdlZDogdGhpcy5nZXRTZXR0aW5nc0NoYW5nZXMoZnJvbnRlbmQuc2V0dGluZ3MsIGFkbWluLnNldHRpbmdzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBjaGFuZ2VzXG4gIH1cblxuICAvLyBEZXRhaWxlZCBxdWVzdGlvbiBjb21wYXJpc29uIGF0IGluZGl2aWR1YWwgcXVlc3Rpb24gbGV2ZWxcbiAgcHJpdmF0ZSBjb21wYXJlUXVlc3Rpb25zKGFkbWluUXVlc3Rpb25zOiBhbnlbXSwgZnJvbnRlbmRRdWVzdGlvbnM6IGFueVtdKTogQ2hhbmdlSXRlbVtdIHtcbiAgICBjb25zdCBjaGFuZ2VzOiBDaGFuZ2VJdGVtW10gPSBbXVxuXG4gICAgLy8gQ3JlYXRlIG1hcHMgZm9yIGVmZmljaWVudCBsb29rdXBcbiAgICBjb25zdCBhZG1pbk1hcCA9IG5ldyBNYXAoYWRtaW5RdWVzdGlvbnMubWFwKHEgPT4gW3EuaWQsIHFdKSlcbiAgICBjb25zdCBmcm9udGVuZE1hcCA9IG5ldyBNYXAoZnJvbnRlbmRRdWVzdGlvbnMubWFwKHEgPT4gW3EuaWQsIHFdKSlcblxuICAgIC8vIEZpbmQgYWRkZWQgcXVlc3Rpb25zIChpbiBhZG1pbiBidXQgbm90IGluIGZyb250ZW5kKVxuICAgIGNvbnN0IGFkZGVkUXVlc3Rpb25zID0gYWRtaW5RdWVzdGlvbnMuZmlsdGVyKHEgPT4gIWZyb250ZW5kTWFwLmhhcyhxLmlkKSlcbiAgICBpZiAoYWRkZWRRdWVzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgY2F0ZWdvcnk6ICdxdWl6JyxcbiAgICAgICAgZmllbGQ6ICdxdWVzdGlvbnMnLFxuICAgICAgICBhY3Rpb246ICdhZGQnLFxuICAgICAgICBvbGRWYWx1ZTogbnVsbCxcbiAgICAgICAgbmV3VmFsdWU6IGFkZGVkUXVlc3Rpb25zLFxuICAgICAgICByaXNrTGV2ZWw6ICdzYWZlJyxcbiAgICAgICAgaW1wYWN0OiBgQWRkaW5nICR7YWRkZWRRdWVzdGlvbnMubGVuZ3RofSBuZXcgcXVlc3Rpb24ke2FkZGVkUXVlc3Rpb25zLmxlbmd0aCA+IDEgPyAncycgOiAnJ31gLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgcXVlc3Rpb25zOiBhZGRlZFF1ZXN0aW9ucy5tYXAocSA9PiAoe1xuICAgICAgICAgICAgaWQ6IHEuaWQsXG4gICAgICAgICAgICBxdWVzdGlvbjogcS5xdWVzdGlvbixcbiAgICAgICAgICAgIGNhdGVnb3J5OiBxLmNhdGVnb3J5LFxuICAgICAgICAgICAgZGlmZmljdWx0eTogcS5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgdHlwZTogcS50eXBlLFxuICAgICAgICAgICAgb3B0aW9uczogcS5vcHRpb25zLFxuICAgICAgICAgICAgY29ycmVjdEFuc3dlcjogcS5jb3JyZWN0QW5zd2VyLFxuICAgICAgICAgICAgZnVuRmFjdDogcS5mdW5GYWN0LFxuICAgICAgICAgICAgdGFnczogcS50YWdzXG4gICAgICAgICAgfSkpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gRmluZCByZW1vdmVkIHF1ZXN0aW9ucyAoaW4gZnJvbnRlbmQgYnV0IG5vdCBpbiBhZG1pbilcbiAgICBjb25zdCByZW1vdmVkUXVlc3Rpb25zID0gZnJvbnRlbmRRdWVzdGlvbnMuZmlsdGVyKHEgPT4gIWFkbWluTWFwLmhhcyhxLmlkKSlcbiAgICBpZiAocmVtb3ZlZFF1ZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgICBjYXRlZ29yeTogJ3F1aXonLFxuICAgICAgICBmaWVsZDogJ3F1ZXN0aW9ucycsXG4gICAgICAgIGFjdGlvbjogJ3JlbW92ZScsXG4gICAgICAgIG9sZFZhbHVlOiByZW1vdmVkUXVlc3Rpb25zLFxuICAgICAgICBuZXdWYWx1ZTogbnVsbCxcbiAgICAgICAgcmlza0xldmVsOiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgICBpbXBhY3Q6IGBSZW1vdmluZyAke3JlbW92ZWRRdWVzdGlvbnMubGVuZ3RofSBxdWVzdGlvbiR7cmVtb3ZlZFF1ZXN0aW9ucy5sZW5ndGggPiAxID8gJ3MnIDogJyd9YCxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHF1ZXN0aW9uczogcmVtb3ZlZFF1ZXN0aW9ucy5tYXAocSA9PiAoe1xuICAgICAgICAgICAgaWQ6IHEuaWQsXG4gICAgICAgICAgICBxdWVzdGlvbjogcS5xdWVzdGlvbixcbiAgICAgICAgICAgIGNhdGVnb3J5OiBxLmNhdGVnb3J5LFxuICAgICAgICAgICAgZGlmZmljdWx0eTogcS5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgdHlwZTogcS50eXBlLFxuICAgICAgICAgICAgb3B0aW9uczogcS5vcHRpb25zLFxuICAgICAgICAgICAgY29ycmVjdEFuc3dlcjogcS5jb3JyZWN0QW5zd2VyLFxuICAgICAgICAgICAgZnVuRmFjdDogcS5mdW5GYWN0LFxuICAgICAgICAgICAgdGFnczogcS50YWdzXG4gICAgICAgICAgfSkpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gRmluZCBtb2RpZmllZCBxdWVzdGlvbnMgKHNhbWUgSUQgYnV0IGRpZmZlcmVudCBjb250ZW50KVxuICAgIGNvbnN0IG1vZGlmaWVkUXVlc3Rpb25zOiBhbnlbXSA9IFtdXG4gICAgZm9yIChjb25zdCBhZG1pblEgb2YgYWRtaW5RdWVzdGlvbnMpIHtcbiAgICAgIGNvbnN0IGZyb250ZW5kUSA9IGZyb250ZW5kTWFwLmdldChhZG1pblEuaWQpXG4gICAgICBpZiAoZnJvbnRlbmRRICYmIEpTT04uc3RyaW5naWZ5KGFkbWluUSkgIT09IEpTT04uc3RyaW5naWZ5KGZyb250ZW5kUSkpIHtcbiAgICAgICAgY29uc3QgcXVlc3Rpb25EaWZmID0gdGhpcy5nZXRRdWVzdGlvbkRpZmYoZnJvbnRlbmRRLCBhZG1pblEpXG4gICAgICAgIG1vZGlmaWVkUXVlc3Rpb25zLnB1c2goe1xuICAgICAgICAgIGlkOiBhZG1pblEuaWQsXG4gICAgICAgICAgb2xkUXVlc3Rpb246IGZyb250ZW5kUSxcbiAgICAgICAgICBuZXdRdWVzdGlvbjogYWRtaW5RLFxuICAgICAgICAgIGNoYW5nZXM6IHF1ZXN0aW9uRGlmZlxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb2RpZmllZFF1ZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgICBjYXRlZ29yeTogJ3F1aXonLFxuICAgICAgICBmaWVsZDogJ3F1ZXN0aW9ucycsXG4gICAgICAgIGFjdGlvbjogJ21vZGlmeScsXG4gICAgICAgIG9sZFZhbHVlOiBtb2RpZmllZFF1ZXN0aW9ucy5tYXAobSA9PiBtLm9sZFF1ZXN0aW9uKSxcbiAgICAgICAgbmV3VmFsdWU6IG1vZGlmaWVkUXVlc3Rpb25zLm1hcChtID0+IG0ubmV3UXVlc3Rpb24pLFxuICAgICAgICByaXNrTGV2ZWw6ICdjYXV0aW9uJyxcbiAgICAgICAgaW1wYWN0OiBgTW9kaWZ5aW5nICR7bW9kaWZpZWRRdWVzdGlvbnMubGVuZ3RofSBxdWVzdGlvbiR7bW9kaWZpZWRRdWVzdGlvbnMubGVuZ3RoID4gMSA/ICdzJyA6ICcnfWAsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBxdWVzdGlvbnM6IG1vZGlmaWVkUXVlc3Rpb25zXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZXNcbiAgfVxuXG4gIC8vIEdldCBkZXRhaWxlZCBkaWZmIGZvciBhIHNpbmdsZSBxdWVzdGlvblxuICBwcml2YXRlIGdldFF1ZXN0aW9uRGlmZihvbGRRdWVzdGlvbjogYW55LCBuZXdRdWVzdGlvbjogYW55KTogYW55IHtcbiAgICBjb25zdCBkaWZmOiBhbnkgPSB7fVxuXG4gICAgaWYgKG9sZFF1ZXN0aW9uLnF1ZXN0aW9uICE9PSBuZXdRdWVzdGlvbi5xdWVzdGlvbikge1xuICAgICAgZGlmZi5xdWVzdGlvbiA9IHsgb2xkOiBvbGRRdWVzdGlvbi5xdWVzdGlvbiwgbmV3OiBuZXdRdWVzdGlvbi5xdWVzdGlvbiB9XG4gICAgfVxuXG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KG9sZFF1ZXN0aW9uLm9wdGlvbnMpICE9PSBKU09OLnN0cmluZ2lmeShuZXdRdWVzdGlvbi5vcHRpb25zKSkge1xuICAgICAgZGlmZi5vcHRpb25zID0geyBvbGQ6IG9sZFF1ZXN0aW9uLm9wdGlvbnMsIG5ldzogbmV3UXVlc3Rpb24ub3B0aW9ucyB9XG4gICAgfVxuXG4gICAgaWYgKG9sZFF1ZXN0aW9uLmNvcnJlY3RBbnN3ZXIgIT09IG5ld1F1ZXN0aW9uLmNvcnJlY3RBbnN3ZXIpIHtcbiAgICAgIGRpZmYuY29ycmVjdEFuc3dlciA9IHtcbiAgICAgICAgb2xkOiB7IGluZGV4OiBvbGRRdWVzdGlvbi5jb3JyZWN0QW5zd2VyLCB0ZXh0OiBvbGRRdWVzdGlvbi5vcHRpb25zW29sZFF1ZXN0aW9uLmNvcnJlY3RBbnN3ZXJdIH0sXG4gICAgICAgIG5ldzogeyBpbmRleDogbmV3UXVlc3Rpb24uY29ycmVjdEFuc3dlciwgdGV4dDogbmV3UXVlc3Rpb24ub3B0aW9uc1tuZXdRdWVzdGlvbi5jb3JyZWN0QW5zd2VyXSB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9sZFF1ZXN0aW9uLmNhdGVnb3J5ICE9PSBuZXdRdWVzdGlvbi5jYXRlZ29yeSkge1xuICAgICAgZGlmZi5jYXRlZ29yeSA9IHsgb2xkOiBvbGRRdWVzdGlvbi5jYXRlZ29yeSwgbmV3OiBuZXdRdWVzdGlvbi5jYXRlZ29yeSB9XG4gICAgfVxuXG4gICAgaWYgKG9sZFF1ZXN0aW9uLmRpZmZpY3VsdHkgIT09IG5ld1F1ZXN0aW9uLmRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmYuZGlmZmljdWx0eSA9IHsgb2xkOiBvbGRRdWVzdGlvbi5kaWZmaWN1bHR5LCBuZXc6IG5ld1F1ZXN0aW9uLmRpZmZpY3VsdHkgfVxuICAgIH1cblxuICAgIGlmIChvbGRRdWVzdGlvbi50eXBlICE9PSBuZXdRdWVzdGlvbi50eXBlKSB7XG4gICAgICBkaWZmLnR5cGUgPSB7IG9sZDogb2xkUXVlc3Rpb24udHlwZSwgbmV3OiBuZXdRdWVzdGlvbi50eXBlIH1cbiAgICB9XG5cbiAgICBpZiAob2xkUXVlc3Rpb24uZnVuRmFjdCAhPT0gbmV3UXVlc3Rpb24uZnVuRmFjdCkge1xuICAgICAgZGlmZi5mdW5GYWN0ID0geyBvbGQ6IG9sZFF1ZXN0aW9uLmZ1bkZhY3QsIG5ldzogbmV3UXVlc3Rpb24uZnVuRmFjdCB9XG4gICAgfVxuXG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KG9sZFF1ZXN0aW9uLnRhZ3MpICE9PSBKU09OLnN0cmluZ2lmeShuZXdRdWVzdGlvbi50YWdzKSkge1xuICAgICAgZGlmZi50YWdzID0geyBvbGQ6IG9sZFF1ZXN0aW9uLnRhZ3MgfHwgW10sIG5ldzogbmV3UXVlc3Rpb24udGFncyB8fCBbXSB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpZmZcbiAgfVxuXG4gIC8vIEdldCBzZXR0aW5ncyBjaGFuZ2VzXG4gIHByaXZhdGUgZ2V0U2V0dGluZ3NDaGFuZ2VzKG9sZFNldHRpbmdzOiBhbnksIG5ld1NldHRpbmdzOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IGNoYW5nZXM6IGFueSA9IHt9XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBuZXdTZXR0aW5ncykge1xuICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KG9sZFNldHRpbmdzW2tleV0pICE9PSBKU09OLnN0cmluZ2lmeShuZXdTZXR0aW5nc1trZXldKSkge1xuICAgICAgICBjaGFuZ2VzW2tleV0gPSB7IG9sZDogb2xkU2V0dGluZ3Nba2V5XSwgbmV3OiBuZXdTZXR0aW5nc1trZXldIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2hhbmdlc1xuICB9XG5cbiAgLy8gQ29tcGFyZSByZXdhcmRzIGRhdGFcbiAgcHJpdmF0ZSBjb21wYXJlUmV3YXJkc0RhdGEoYWRtaW46IGFueSwgZnJvbnRlbmQ6IGFueSk6IENoYW5nZUl0ZW1bXSB7XG4gICAgY29uc3QgY2hhbmdlczogQ2hhbmdlSXRlbVtdID0gW11cblxuICAgIC8vIENvbXBhcmUgYWNoaWV2ZW1lbnRzXG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGFkbWluLmFjaGlldmVtZW50cykgIT09IEpTT04uc3RyaW5naWZ5KGZyb250ZW5kLmFjaGlldmVtZW50cykpIHtcbiAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgIGNhdGVnb3J5OiAncmV3YXJkcycsXG4gICAgICAgIGZpZWxkOiAnYWNoaWV2ZW1lbnRzJyxcbiAgICAgICAgYWN0aW9uOiAnbW9kaWZ5JyxcbiAgICAgICAgb2xkVmFsdWU6IGZyb250ZW5kLmFjaGlldmVtZW50cyxcbiAgICAgICAgbmV3VmFsdWU6IGFkbWluLmFjaGlldmVtZW50cyxcbiAgICAgICAgcmlza0xldmVsOiAnc2FmZScsXG4gICAgICAgIGltcGFjdDogYEFjaGlldmVtZW50czogJHtmcm9udGVuZC5hY2hpZXZlbWVudHMubGVuZ3RofSDihpIgJHthZG1pbi5hY2hpZXZlbWVudHMubGVuZ3RofWBcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gQ29tcGFyZSBwb3B1cCBzZXR0aW5nc1xuICAgIGlmIChKU09OLnN0cmluZ2lmeShhZG1pbi5wb3B1cFNldHRpbmdzKSAhPT0gSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmQucG9wdXBTZXR0aW5ncykpIHtcbiAgICAgIGNoYW5nZXMucHVzaCh7XG4gICAgICAgIGNhdGVnb3J5OiAncmV3YXJkcycsXG4gICAgICAgIGZpZWxkOiAncG9wdXBTZXR0aW5ncycsXG4gICAgICAgIGFjdGlvbjogJ21vZGlmeScsXG4gICAgICAgIG9sZFZhbHVlOiBmcm9udGVuZC5wb3B1cFNldHRpbmdzLFxuICAgICAgICBuZXdWYWx1ZTogYWRtaW4ucG9wdXBTZXR0aW5ncyxcbiAgICAgICAgcmlza0xldmVsOiAnY2F1dGlvbicsXG4gICAgICAgIGltcGFjdDogJ1Jld2FyZCBwb3B1cCBjb25maWd1cmF0aW9uIHVwZGF0ZWQnXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIENvbXBhcmUgY29pbiBtdWx0aXBsaWVyc1xuICAgIGlmIChKU09OLnN0cmluZ2lmeShhZG1pbi5jb2luTXVsdGlwbGllcnMpICE9PSBKU09OLnN0cmluZ2lmeShmcm9udGVuZC5jb2luTXVsdGlwbGllcnMpKSB7XG4gICAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgICBjYXRlZ29yeTogJ3Jld2FyZHMnLFxuICAgICAgICBmaWVsZDogJ2NvaW5NdWx0aXBsaWVycycsXG4gICAgICAgIGFjdGlvbjogJ21vZGlmeScsXG4gICAgICAgIG9sZFZhbHVlOiBmcm9udGVuZC5jb2luTXVsdGlwbGllcnMsXG4gICAgICAgIG5ld1ZhbHVlOiBhZG1pbi5jb2luTXVsdGlwbGllcnMsXG4gICAgICAgIHJpc2tMZXZlbDogJ2NhdXRpb24nLFxuICAgICAgICBpbXBhY3Q6ICdDb2luIG11bHRpcGxpZXIgc2V0dGluZ3MgdXBkYXRlZCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZXNcbiAgfVxuXG4gIC8vIENvbXBhcmUgc3lzdGVtIHNldHRpbmdzXG4gIHByaXZhdGUgY29tcGFyZVN5c3RlbVNldHRpbmdzKGFkbWluOiBhbnksIGZyb250ZW5kOiBhbnkpOiBDaGFuZ2VJdGVtW10ge1xuICAgIGNvbnN0IGNoYW5nZXM6IENoYW5nZUl0ZW1bXSA9IFtdXG5cbiAgICAvLyBDb21wYXJlIGZlYXR1cmUgZmxhZ3NcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkoYWRtaW4uZmVhdHVyZUZsYWdzKSAhPT0gSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmQuZmVhdHVyZUZsYWdzKSkge1xuICAgICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgY2F0ZWdvcnk6ICdzeXN0ZW1TZXR0aW5ncycsXG4gICAgICAgIGZpZWxkOiAnZmVhdHVyZUZsYWdzJyxcbiAgICAgICAgYWN0aW9uOiAnbW9kaWZ5JyxcbiAgICAgICAgb2xkVmFsdWU6IGZyb250ZW5kLmZlYXR1cmVGbGFncyxcbiAgICAgICAgbmV3VmFsdWU6IGFkbWluLmZlYXR1cmVGbGFncyxcbiAgICAgICAgcmlza0xldmVsOiAnY2F1dGlvbicsXG4gICAgICAgIGltcGFjdDogJ0ZlYXR1cmUgZmxhZ3MgY29uZmlndXJhdGlvbiB1cGRhdGVkJ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBDb21wYXJlIGNvbmZpZyB2YWx1ZXNcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkoYWRtaW4uY29uZmlnVmFsdWVzKSAhPT0gSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmQuY29uZmlnVmFsdWVzKSkge1xuICAgICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgY2F0ZWdvcnk6ICdzeXN0ZW1TZXR0aW5ncycsXG4gICAgICAgIGZpZWxkOiAnY29uZmlnVmFsdWVzJyxcbiAgICAgICAgYWN0aW9uOiAnbW9kaWZ5JyxcbiAgICAgICAgb2xkVmFsdWU6IGZyb250ZW5kLmNvbmZpZ1ZhbHVlcyxcbiAgICAgICAgbmV3VmFsdWU6IGFkbWluLmNvbmZpZ1ZhbHVlcyxcbiAgICAgICAgcmlza0xldmVsOiAnY2F1dGlvbicsXG4gICAgICAgIGltcGFjdDogJ1N5c3RlbSBjb25maWd1cmF0aW9uIHZhbHVlcyB1cGRhdGVkJ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBDb21wYXJlIGFkcyBjb25maWdcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkoYWRtaW4uYWRzQ29uZmlnKSAhPT0gSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmQuYWRzQ29uZmlnKSkge1xuICAgICAgY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgY2F0ZWdvcnk6ICdzeXN0ZW1TZXR0aW5ncycsXG4gICAgICAgIGZpZWxkOiAnYWRzQ29uZmlnJyxcbiAgICAgICAgYWN0aW9uOiAnbW9kaWZ5JyxcbiAgICAgICAgb2xkVmFsdWU6IGZyb250ZW5kLmFkc0NvbmZpZyxcbiAgICAgICAgbmV3VmFsdWU6IGFkbWluLmFkc0NvbmZpZyxcbiAgICAgICAgcmlza0xldmVsOiAnc2FmZScsXG4gICAgICAgIGltcGFjdDogJ0FkcyBjb25maWd1cmF0aW9uIHVwZGF0ZWQnXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBjaGFuZ2VzXG4gIH1cblxuICAvLyBEZXRlY3QgY29uZmxpY3RzIGJldHdlZW4gYWRtaW4gYW5kIGZyb250ZW5kIGRhdGFcbiAgZGV0ZWN0Q29uZmxpY3RzKGFkbWluRGF0YTogQ29uZmlnRGF0YSwgZnJvbnRlbmREYXRhOiBDb25maWdEYXRhKTogQ29uZmxpY3RSZXNvbHV0aW9uW10ge1xuICAgIGNvbnN0IGNvbmZsaWN0czogQ29uZmxpY3RSZXNvbHV0aW9uW10gPSBbXVxuXG4gICAgLy8gQ2hlY2sgZm9yIHRpbWVzdGFtcCBjb25mbGljdHNcbiAgICBPYmplY3Qua2V5cyhhZG1pbkRhdGEpLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgICAgY29uc3QgYWRtaW5DYXQgPSBhZG1pbkRhdGFbY2F0ZWdvcnkgYXMga2V5b2YgQ29uZmlnRGF0YV1cbiAgICAgIGNvbnN0IGZyb250ZW5kQ2F0ID0gZnJvbnRlbmREYXRhW2NhdGVnb3J5IGFzIGtleW9mIENvbmZpZ0RhdGFdXG4gICAgICBcbiAgICAgIGlmIChhZG1pbkNhdC5sYXN0TW9kaWZpZWQgPiAwICYmIGZyb250ZW5kQ2F0Lmxhc3RNb2RpZmllZCA+IDApIHtcbiAgICAgICAgY29uc3QgdGltZURpZmYgPSBNYXRoLmFicyhhZG1pbkNhdC5sYXN0TW9kaWZpZWQgLSBmcm9udGVuZENhdC5sYXN0TW9kaWZpZWQpXG4gICAgICAgIFxuICAgICAgICAvLyBJZiBib3RoIHdlcmUgbW9kaWZpZWQgd2l0aGluIDUgbWludXRlcyBvZiBlYWNoIG90aGVyLCBpdCdzIGEgcG90ZW50aWFsIGNvbmZsaWN0XG4gICAgICAgIGlmICh0aW1lRGlmZiA8IDMwMDAwMCAmJiBhZG1pbkNhdC52ZXJzaW9uICE9PSBmcm9udGVuZENhdC52ZXJzaW9uKSB7XG4gICAgICAgICAgY29uZmxpY3RzLnB1c2goe1xuICAgICAgICAgICAgZmllbGQ6IGAke2NhdGVnb3J5fS52ZXJzaW9uYCxcbiAgICAgICAgICAgIGFkbWluVmFsdWU6IGFkbWluQ2F0LnZlcnNpb24sXG4gICAgICAgICAgICBmcm9udGVuZFZhbHVlOiBmcm9udGVuZENhdC52ZXJzaW9uLFxuICAgICAgICAgICAgYWRtaW5UaW1lc3RhbXA6IGFkbWluQ2F0Lmxhc3RNb2RpZmllZCxcbiAgICAgICAgICAgIGZyb250ZW5kVGltZXN0YW1wOiBmcm9udGVuZENhdC5sYXN0TW9kaWZpZWQsXG4gICAgICAgICAgICByZXNvbHV0aW9uOiBhZG1pbkNhdC5sYXN0TW9kaWZpZWQgPiBmcm9udGVuZENhdC5sYXN0TW9kaWZpZWQgPyAndXNlLWFkbWluJyA6ICd1c2UtZnJvbnRlbmQnXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gY29uZmxpY3RzXG4gIH1cblxuICAvLyBBc3Nlc3MgZGF0YSBmcmVzaG5lc3NcbiAgYXNzZXNzRGF0YUZyZXNobmVzcyh0aW1lc3RhbXA6IG51bWJlcik6ICdmcmVzaCcgfCAnc3RhbGUnIHwgJ291dGRhdGVkJyB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxuICAgIGNvbnN0IGFnZSA9IG5vdyAtIHRpbWVzdGFtcFxuICAgIFxuICAgIGlmIChhZ2UgPCAzMDAwMDApIHJldHVybiAnZnJlc2gnIC8vIDwgNSBtaW51dGVzXG4gICAgaWYgKGFnZSA8IDE4MDAwMDApIHJldHVybiAnc3RhbGUnIC8vIDwgMzAgbWludXRlc1xuICAgIHJldHVybiAnb3V0ZGF0ZWQnIC8vID4gMzAgbWludXRlc1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgc3luYyBwcmV2aWV3XG4gIGFzeW5jIGdlbmVyYXRlU3luY1ByZXZpZXcob3BlcmF0aW9uOiAncHVsbCcgfCAncHVzaCcgfCAnc21hcnQnIHwgJ3Jlc2V0Jyk6IFByb21pc2U8U3luY1ByZXZpZXc+IHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgIGNvbnNvbGUubG9nKGDwn5SEIEdlbmVyYXRpbmcgc3luYyBwcmV2aWV3IGZvciBvcGVyYXRpb246ICR7b3BlcmF0aW9ufWApXG5cbiAgICBjb25zdCBhZG1pbkRhdGEgPSB0aGlzLmdldEFkbWluQ29uZmlnRGF0YSgpXG4gICAgY29uc3QgZnJvbnRlbmREYXRhID0gdGhpcy5nZXRGcm9udGVuZENvbmZpZ0RhdGEoKVxuICAgIFxuICAgIGxldCBjaGFuZ2VzOiBDaGFuZ2VJdGVtW10gPSBbXVxuICAgIGxldCBkaXJlY3Rpb246ICdhZG1pbi10by1mcm9udGVuZCcgfCAnZnJvbnRlbmQtdG8tYWRtaW4nIHwgJ2JpZGlyZWN0aW9uYWwnID0gJ2JpZGlyZWN0aW9uYWwnXG5cbiAgICBzd2l0Y2ggKG9wZXJhdGlvbikge1xuICAgICAgY2FzZSAncHVsbCc6XG4gICAgICAgIGNoYW5nZXMgPSB0aGlzLmRldGVjdENoYW5nZXMoZnJvbnRlbmREYXRhLCBhZG1pbkRhdGEpXG4gICAgICAgIGRpcmVjdGlvbiA9ICdmcm9udGVuZC10by1hZG1pbidcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3B1c2gnOlxuICAgICAgICBjaGFuZ2VzID0gdGhpcy5kZXRlY3RDaGFuZ2VzKGFkbWluRGF0YSwgZnJvbnRlbmREYXRhKVxuICAgICAgICBkaXJlY3Rpb24gPSAnYWRtaW4tdG8tZnJvbnRlbmQnXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzbWFydCc6XG4gICAgICAgIGNoYW5nZXMgPSB0aGlzLmRldGVjdENoYW5nZXMoYWRtaW5EYXRhLCBmcm9udGVuZERhdGEpXG4gICAgICAgIGRpcmVjdGlvbiA9ICdiaWRpcmVjdGlvbmFsJ1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncmVzZXQnOlxuICAgICAgICBjaGFuZ2VzID0gdGhpcy5kZXRlY3RDaGFuZ2VzKGFkbWluRGF0YSwgZnJvbnRlbmREYXRhKVxuICAgICAgICBkaXJlY3Rpb24gPSAnYWRtaW4tdG8tZnJvbnRlbmQnXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgY29uc3QgY29uZmxpY3RzID0gdGhpcy5kZXRlY3RDb25mbGljdHMoYWRtaW5EYXRhLCBmcm9udGVuZERhdGEpXG4gICAgXG4gICAgY29uc3Qgc3luY09wZXJhdGlvbjogU3luY09wZXJhdGlvbiA9IHtcbiAgICAgIGlkOiBgc3luYy0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDgpfWAsXG4gICAgICB0eXBlOiBvcGVyYXRpb24sXG4gICAgICBkaXJlY3Rpb24sXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBjaGFuZ2VzLFxuICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICByaXNrTGV2ZWw6IHRoaXMuY2FsY3VsYXRlT3ZlcmFsbFJpc2tMZXZlbChjaGFuZ2VzKSxcbiAgICAgIHBlcmZvcm1hbmNlTWV0cmljczoge1xuICAgICAgICBkdXJhdGlvbjogcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgIGRhdGFTaXplOiBKU09OLnN0cmluZ2lmeSh7IGFkbWluRGF0YSwgZnJvbnRlbmREYXRhIH0pLmxlbmd0aCxcbiAgICAgICAgY29uZmxpY3RzUmVzb2x2ZWQ6IGNvbmZsaWN0cy5sZW5ndGhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwcmV2aWV3OiBTeW5jUHJldmlldyA9IHtcbiAgICAgIG9wZXJhdGlvbjogc3luY09wZXJhdGlvbixcbiAgICAgIGNvbmZsaWN0cyxcbiAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgdG90YWxDaGFuZ2VzOiBjaGFuZ2VzLmxlbmd0aCxcbiAgICAgICAgc2FmZUNoYW5nZXM6IGNoYW5nZXMuZmlsdGVyKGMgPT4gYy5yaXNrTGV2ZWwgPT09ICdzYWZlJykubGVuZ3RoLFxuICAgICAgICBjYXV0aW9uQ2hhbmdlczogY2hhbmdlcy5maWx0ZXIoYyA9PiBjLnJpc2tMZXZlbCA9PT0gJ2NhdXRpb24nKS5sZW5ndGgsXG4gICAgICAgIGRlc3RydWN0aXZlQ2hhbmdlczogY2hhbmdlcy5maWx0ZXIoYyA9PiBjLnJpc2tMZXZlbCA9PT0gJ2Rlc3RydWN0aXZlJykubGVuZ3RoLFxuICAgICAgICBlc3RpbWF0ZWREdXJhdGlvbjogdGhpcy5lc3RpbWF0ZVN5bmNEdXJhdGlvbihjaGFuZ2VzKVxuICAgICAgfSxcbiAgICAgIGRhdGFGcmVzaG5lc3M6IHtcbiAgICAgICAgYWRtaW46IHRoaXMuYXNzZXNzRGF0YUZyZXNobmVzcyhNYXRoLm1heChcbiAgICAgICAgICBhZG1pbkRhdGEucXVpei5sYXN0TW9kaWZpZWQsXG4gICAgICAgICAgYWRtaW5EYXRhLnJld2FyZHMubGFzdE1vZGlmaWVkLFxuICAgICAgICAgIGFkbWluRGF0YS5zeXN0ZW1TZXR0aW5ncy5sYXN0TW9kaWZpZWRcbiAgICAgICAgKSksXG4gICAgICAgIGZyb250ZW5kOiB0aGlzLmFzc2Vzc0RhdGFGcmVzaG5lc3MoTWF0aC5tYXgoXG4gICAgICAgICAgZnJvbnRlbmREYXRhLnF1aXoubGFzdE1vZGlmaWVkLFxuICAgICAgICAgIGZyb250ZW5kRGF0YS5yZXdhcmRzLmxhc3RNb2RpZmllZCxcbiAgICAgICAgICBmcm9udGVuZERhdGEuc3lzdGVtU2V0dGluZ3MubGFzdE1vZGlmaWVkXG4gICAgICAgICkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYPCflIQgU3luYyBwcmV2aWV3IGdlbmVyYXRlZCBpbiAke3ByZXZpZXcub3BlcmF0aW9uLnBlcmZvcm1hbmNlTWV0cmljcy5kdXJhdGlvbi50b0ZpeGVkKDIpfW1zYClcbiAgICByZXR1cm4gcHJldmlld1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIG92ZXJhbGwgcmlzayBsZXZlbFxuICBwcml2YXRlIGNhbGN1bGF0ZU92ZXJhbGxSaXNrTGV2ZWwoY2hhbmdlczogQ2hhbmdlSXRlbVtdKTogJ3NhZmUnIHwgJ2NhdXRpb24nIHwgJ2Rlc3RydWN0aXZlJyB7XG4gICAgaWYgKGNoYW5nZXMuc29tZShjID0+IGMucmlza0xldmVsID09PSAnZGVzdHJ1Y3RpdmUnKSkgcmV0dXJuICdkZXN0cnVjdGl2ZSdcbiAgICBpZiAoY2hhbmdlcy5zb21lKGMgPT4gYy5yaXNrTGV2ZWwgPT09ICdjYXV0aW9uJykpIHJldHVybiAnY2F1dGlvbidcbiAgICByZXR1cm4gJ3NhZmUnXG4gIH1cblxuICAvLyBFc3RpbWF0ZSBzeW5jIGR1cmF0aW9uXG4gIHByaXZhdGUgZXN0aW1hdGVTeW5jRHVyYXRpb24oY2hhbmdlczogQ2hhbmdlSXRlbVtdKTogbnVtYmVyIHtcbiAgICAvLyBCYXNlIHRpbWUgKyB0aW1lIHBlciBjaGFuZ2VcbiAgICByZXR1cm4gMTAwICsgKGNoYW5nZXMubGVuZ3RoICogNTApIC8vIG1pbGxpc2Vjb25kc1xuICB9XG5cbiAgLy8gU2V0dXAgc3RvcmFnZSBsaXN0ZW5lcnMgZm9yIHJlYWwtdGltZSB1cGRhdGVzXG4gIHByaXZhdGUgc2V0dXBTdG9yYWdlTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuXG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXk/LnN0YXJ0c1dpdGgoJ2FkbWluXycpIHx8IGUua2V5Py5zdGFydHNXaXRoKCdnYW1lXycpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFN0b3JhZ2UgY2hhbmdlIGRldGVjdGVkLCB1cGRhdGluZyBzeW5jIHByZXZpZXc6JywgZS5rZXkpXG4gICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gTG9hZCBzeW5jIGhpc3RvcnkgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgcHJpdmF0ZSBsb2FkU3luY0hpc3RvcnkoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmlkaXJlY3Rpb25hbF9zeW5jX2hpc3RvcnknKVxuICAgICAgaWYgKGhpc3RvcnkpIHtcbiAgICAgICAgdGhpcy5zeW5jSGlzdG9yeSA9IEpTT04ucGFyc2UoaGlzdG9yeSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBzeW5jIGhpc3Rvcnk6JywgZXJyb3IpXG4gICAgICB0aGlzLnN5bmNIaXN0b3J5ID0geyBvcGVyYXRpb25zOiBbXSwgcm9sbGJhY2tQb2ludHM6IFtdIH1cbiAgICB9XG4gIH1cblxuICAvLyBTYXZlIHN5bmMgaGlzdG9yeSB0byBsb2NhbFN0b3JhZ2VcbiAgcHJpdmF0ZSBzYXZlU3luY0hpc3RvcnkoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWRpcmVjdGlvbmFsX3N5bmNfaGlzdG9yeScsIEpTT04uc3RyaW5naWZ5KHRoaXMuc3luY0hpc3RvcnkpKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgc3luYyBoaXN0b3J5OicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8vIEFkZCBzeW5jIGxpc3RlbmVyXG4gIGFkZFN5bmNMaXN0ZW5lcihjYWxsYmFjazogKHByZXZpZXc6IFN5bmNQcmV2aWV3KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChjYWxsYmFjaylcbiAgfVxuXG4gIC8vIFJlbW92ZSBzeW5jIGxpc3RlbmVyXG4gIHJlbW92ZVN5bmNMaXN0ZW5lcihjYWxsYmFjazogKHByZXZpZXc6IFN5bmNQcmV2aWV3KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKVxuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICB0aGlzLmxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgfVxuICB9XG5cbiAgLy8gTm90aWZ5IGFsbCBsaXN0ZW5lcnNcbiAgcHJpdmF0ZSBhc3luYyBub3RpZnlMaXN0ZW5lcnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMubGlzdGVuZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHByZXZpZXcgPSBhd2FpdCB0aGlzLmdlbmVyYXRlU3luY1ByZXZpZXcoJ3NtYXJ0JylcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChjYWxsYmFjayA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHByZXZpZXcpXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHN5bmMgbGlzdGVuZXI6JywgZXJyb3IpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBwcmV2aWV3IGZvciBsaXN0ZW5lcnM6JywgZXJyb3IpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHN5bmMgaGlzdG9yeVxuICBnZXRTeW5jSGlzdG9yeSgpOiBTeW5jSGlzdG9yeSB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5zeW5jSGlzdG9yeSB9XG4gIH1cblxuICAvLyBFeGVjdXRlIHN5bmMgb3BlcmF0aW9uXG4gIGFzeW5jIGV4ZWN1dGVTeW5jT3BlcmF0aW9uKHByZXZpZXc6IFN5bmNQcmV2aWV3KTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZzsgb3BlcmF0aW9uOiBTeW5jT3BlcmF0aW9uIH0+IHtcbiAgICBpZiAodGhpcy5pc09wZXJhdGlvbkluUHJvZ3Jlc3MpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnQW5vdGhlciBzeW5jIG9wZXJhdGlvbiBpcyBpbiBwcm9ncmVzcycsIG9wZXJhdGlvbjogcHJldmlldy5vcGVyYXRpb24gfVxuICAgIH1cblxuICAgIHRoaXMuaXNPcGVyYXRpb25JblByb2dyZXNzID0gdHJ1ZVxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYPCflIQgRXhlY3V0aW5nIHN5bmMgb3BlcmF0aW9uOiAke3ByZXZpZXcub3BlcmF0aW9uLnR5cGV9YClcblxuICAgICAgLy8gQ3JlYXRlIHJvbGxiYWNrIHBvaW50XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZVJvbGxiYWNrUG9pbnQoYEJlZm9yZSAke3ByZXZpZXcub3BlcmF0aW9uLnR5cGV9IG9wZXJhdGlvbmApXG5cbiAgICAgIC8vIEFwcGx5IGNoYW5nZXMgYmFzZWQgb24gb3BlcmF0aW9uIHR5cGVcbiAgICAgIHN3aXRjaCAocHJldmlldy5vcGVyYXRpb24udHlwZSkge1xuICAgICAgICBjYXNlICdwdWxsJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnN5bmNGcm9tRnJvbnRlbmQocHJldmlldy5vcGVyYXRpb24uY2hhbmdlcylcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdwdXNoJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnN5bmNUb0Zyb250ZW5kKHByZXZpZXcub3BlcmF0aW9uLmNoYW5nZXMpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc21hcnQnOlxuICAgICAgICAgIGF3YWl0IHRoaXMuc21hcnRTeW5jKHByZXZpZXcub3BlcmF0aW9uLmNoYW5nZXMsIHByZXZpZXcuY29uZmxpY3RzKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3Jlc2V0JzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlc2V0RnJvbnRlbmQoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSBvcGVyYXRpb24gc3RhdHVzXG4gICAgICBwcmV2aWV3Lm9wZXJhdGlvbi5zdGF0dXMgPSAnY29tcGxldGVkJ1xuICAgICAgcHJldmlldy5vcGVyYXRpb24ucGVyZm9ybWFuY2VNZXRyaWNzLmR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcblxuICAgICAgLy8gQWRkIHRvIGhpc3RvcnlcbiAgICAgIHRoaXMuc3luY0hpc3Rvcnkub3BlcmF0aW9ucy5wdXNoKHByZXZpZXcub3BlcmF0aW9uKVxuICAgICAgdGhpcy5zYXZlU3luY0hpc3RvcnkoKVxuXG4gICAgICBjb25zb2xlLmxvZyhg8J+UhCBTeW5jIG9wZXJhdGlvbiBjb21wbGV0ZWQgaW4gJHtwcmV2aWV3Lm9wZXJhdGlvbi5wZXJmb3JtYW5jZU1ldHJpY3MuZHVyYXRpb24udG9GaXhlZCgyKX1tc2ApXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IGAke3ByZXZpZXcub3BlcmF0aW9uLnR5cGV9IG9wZXJhdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5YCxcbiAgICAgICAgb3BlcmF0aW9uOiBwcmV2aWV3Lm9wZXJhdGlvblxuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ/CflIQgU3luYyBvcGVyYXRpb24gZmFpbGVkOicsIGVycm9yKVxuXG4gICAgICAvLyBNYXJrIG9wZXJhdGlvbiBhcyBmYWlsZWRcbiAgICAgIHByZXZpZXcub3BlcmF0aW9uLnN0YXR1cyA9ICdmYWlsZWQnXG4gICAgICBwcmV2aWV3Lm9wZXJhdGlvbi5wZXJmb3JtYW5jZU1ldHJpY3MuZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuXG4gICAgICAvLyBBZGQgdG8gaGlzdG9yeVxuICAgICAgdGhpcy5zeW5jSGlzdG9yeS5vcGVyYXRpb25zLnB1c2gocHJldmlldy5vcGVyYXRpb24pXG4gICAgICB0aGlzLnNhdmVTeW5jSGlzdG9yeSgpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdTeW5jIG9wZXJhdGlvbiBmYWlsZWQnLFxuICAgICAgICBvcGVyYXRpb246IHByZXZpZXcub3BlcmF0aW9uXG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNPcGVyYXRpb25JblByb2dyZXNzID0gZmFsc2VcbiAgICB9XG4gIH1cblxuICAvLyBTeW5jIGZyb20gZnJvbnRlbmQgdG8gYWRtaW5cbiAgcHJpdmF0ZSBhc3luYyBzeW5jRnJvbUZyb250ZW5kKGNoYW5nZXM6IENoYW5nZUl0ZW1bXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGZyb250ZW5kRGF0YSA9IHRoaXMuZ2V0RnJvbnRlbmRDb25maWdEYXRhKClcblxuICAgIGZvciAoY29uc3QgY2hhbmdlIG9mIGNoYW5nZXMpIHtcbiAgICAgIHN3aXRjaCAoY2hhbmdlLmNhdGVnb3J5KSB7XG4gICAgICAgIGNhc2UgJ3F1aXonOlxuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwbHlRdWl6Q2hhbmdlcyhjaGFuZ2UsIGZyb250ZW5kRGF0YS5xdWl6KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3Jld2FyZHMnOlxuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwbHlSZXdhcmRDaGFuZ2VzKGNoYW5nZSwgZnJvbnRlbmREYXRhLnJld2FyZHMpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc3lzdGVtU2V0dGluZ3MnOlxuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwbHlTeXN0ZW1TZXR0aW5nc0NoYW5nZXMoY2hhbmdlLCBmcm9udGVuZERhdGEuc3lzdGVtU2V0dGluZ3MpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgYWRtaW4gdGltZXN0YW1wc1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9sYXN0X3N5bmNfZnJvbV9mcm9udGVuZCcsIERhdGUubm93KCkudG9TdHJpbmcoKSlcbiAgfVxuXG4gIC8vIFN5bmMgZnJvbSBhZG1pbiB0byBmcm9udGVuZFxuICBwcml2YXRlIGFzeW5jIHN5bmNUb0Zyb250ZW5kKGNoYW5nZXM6IENoYW5nZUl0ZW1bXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFkbWluRGF0YSA9IHRoaXMuZ2V0QWRtaW5Db25maWdEYXRhKClcblxuICAgIGZvciAoY29uc3QgY2hhbmdlIG9mIGNoYW5nZXMpIHtcbiAgICAgIHN3aXRjaCAoY2hhbmdlLmNhdGVnb3J5KSB7XG4gICAgICAgIGNhc2UgJ3F1aXonOlxuICAgICAgICAgIGF3YWl0IHRoaXMucHVzaFF1aXpUb0Zyb250ZW5kKGFkbWluRGF0YS5xdWl6KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3Jld2FyZHMnOlxuICAgICAgICAgIGF3YWl0IHRoaXMucHVzaFJld2FyZHNUb0Zyb250ZW5kKGFkbWluRGF0YS5yZXdhcmRzKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3N5c3RlbVNldHRpbmdzJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnB1c2hTeXN0ZW1TZXR0aW5nc1RvRnJvbnRlbmQoYWRtaW5EYXRhLnN5c3RlbVNldHRpbmdzKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGZyb250ZW5kIHRpbWVzdGFtcHNcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9sYXN0X3N5bmMnLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvLyBTbWFydCBzeW5jIHdpdGggY29uZmxpY3QgcmVzb2x1dGlvblxuICBwcml2YXRlIGFzeW5jIHNtYXJ0U3luYyhjaGFuZ2VzOiBDaGFuZ2VJdGVtW10sIGNvbmZsaWN0czogQ29uZmxpY3RSZXNvbHV0aW9uW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBSZXNvbHZlIGNvbmZsaWN0cyBmaXJzdFxuICAgIGZvciAoY29uc3QgY29uZmxpY3Qgb2YgY29uZmxpY3RzKSB7XG4gICAgICBhd2FpdCB0aGlzLnJlc29sdmVDb25mbGljdChjb25mbGljdClcbiAgICB9XG5cbiAgICAvLyBBcHBseSBub24tY29uZmxpY3RpbmcgY2hhbmdlc1xuICAgIGNvbnN0IG5vbkNvbmZsaWN0aW5nQ2hhbmdlcyA9IGNoYW5nZXMuZmlsdGVyKGNoYW5nZSA9PlxuICAgICAgIWNvbmZsaWN0cy5zb21lKGNvbmZsaWN0ID0+IGNvbmZsaWN0LmZpZWxkLmluY2x1ZGVzKGNoYW5nZS5maWVsZCkpXG4gICAgKVxuXG4gICAgYXdhaXQgdGhpcy5zeW5jVG9Gcm9udGVuZChub25Db25mbGljdGluZ0NoYW5nZXMpXG4gIH1cblxuICAvLyBSZXNldCBmcm9udGVuZCB3aXRoIGFkbWluIGRhdGFcbiAgcHJpdmF0ZSBhc3luYyByZXNldEZyb250ZW5kKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFkbWluRGF0YSA9IHRoaXMuZ2V0QWRtaW5Db25maWdEYXRhKClcblxuICAgIC8vIFB1c2ggYWxsIGFkbWluIGRhdGEgdG8gZnJvbnRlbmRcbiAgICBhd2FpdCB0aGlzLnB1c2hRdWl6VG9Gcm9udGVuZChhZG1pbkRhdGEucXVpeilcbiAgICBhd2FpdCB0aGlzLnB1c2hSZXdhcmRzVG9Gcm9udGVuZChhZG1pbkRhdGEucmV3YXJkcylcbiAgICBhd2FpdCB0aGlzLnB1c2hTeXN0ZW1TZXR0aW5nc1RvRnJvbnRlbmQoYWRtaW5EYXRhLnN5c3RlbVNldHRpbmdzKVxuXG4gICAgLy8gVXBkYXRlIHRpbWVzdGFtcHNcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9sYXN0X3N5bmMnLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfcmVzZXRfdGltZXN0YW1wJywgRGF0ZS5ub3coKS50b1N0cmluZygpKVxuICB9XG5cbiAgLy8gQXBwbHkgcXVpeiBjaGFuZ2VzIHRvIGFkbWluXG4gIHByaXZhdGUgYXN5bmMgYXBwbHlRdWl6Q2hhbmdlcyhjaGFuZ2U6IENoYW5nZUl0ZW0sIGZyb250ZW5kUXVpekRhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHN3aXRjaCAoY2hhbmdlLmZpZWxkKSB7XG4gICAgICBjYXNlICdxdWVzdGlvbnMnOlxuICAgICAgICAvLyBVcGRhdGUgYWRtaW4gcXVlc3Rpb25zIHdpdGggZnJvbnRlbmQgZGF0YVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcXVpel9xdWVzdGlvbnMnLCBKU09OLnN0cmluZ2lmeShmcm9udGVuZFF1aXpEYXRhLnF1ZXN0aW9ucykpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjYXRlZ29yaWVzJzpcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX3F1aXpfY2F0ZWdvcmllcycsIEpTT04uc3RyaW5naWZ5KGZyb250ZW5kUXVpekRhdGEuY2F0ZWdvcmllcykpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzZXR0aW5ncyc6XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9xdWl6X3NldHRpbmdzJywgSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmRRdWl6RGF0YS5zZXR0aW5ncykpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9xdWl6X3F1ZXN0aW9uc191cGRhdGVkJywgRGF0ZS5ub3coKS50b1N0cmluZygpKVxuICB9XG5cbiAgLy8gQXBwbHkgcmV3YXJkIGNoYW5nZXMgdG8gYWRtaW5cbiAgcHJpdmF0ZSBhc3luYyBhcHBseVJld2FyZENoYW5nZXMoY2hhbmdlOiBDaGFuZ2VJdGVtLCBmcm9udGVuZFJld2FyZERhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHN3aXRjaCAoY2hhbmdlLmZpZWxkKSB7XG4gICAgICBjYXNlICdhY2hpZXZlbWVudHMnOlxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcmV3YXJkX2FjaGlldmVtZW50cycsIEpTT04uc3RyaW5naWZ5KGZyb250ZW5kUmV3YXJkRGF0YS5hY2hpZXZlbWVudHMpKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncG9wdXBTZXR0aW5ncyc6XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9yZXdhcmRfcG9wdXBfc2V0dGluZ3MnLCBKU09OLnN0cmluZ2lmeShmcm9udGVuZFJld2FyZERhdGEucG9wdXBTZXR0aW5ncykpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjb2luTXVsdGlwbGllcnMnOlxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcmV3YXJkX2NvaW5fbXVsdGlwbGllcnMnLCBKU09OLnN0cmluZ2lmeShmcm9udGVuZFJld2FyZERhdGEuY29pbk11bHRpcGxpZXJzKSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX3Jld2FyZF9jb25maWdfdXBkYXRlZCcsIERhdGUubm93KCkudG9TdHJpbmcoKSlcbiAgfVxuXG4gIC8vIEFwcGx5IHN5c3RlbSBzZXR0aW5ncyBjaGFuZ2VzIHRvIGFkbWluXG4gIHByaXZhdGUgYXN5bmMgYXBwbHlTeXN0ZW1TZXR0aW5nc0NoYW5nZXMoY2hhbmdlOiBDaGFuZ2VJdGVtLCBmcm9udGVuZFNldHRpbmdzRGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgc3dpdGNoIChjaGFuZ2UuZmllbGQpIHtcbiAgICAgIGNhc2UgJ2ZlYXR1cmVGbGFncyc6XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9mZWF0dXJlX2ZsYWdzJywgSlNPTi5zdHJpbmdpZnkoZnJvbnRlbmRTZXR0aW5nc0RhdGEuZmVhdHVyZUZsYWdzKSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NvbmZpZ1ZhbHVlcyc6XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9zeXN0ZW1fc2V0dGluZ3MnLCBKU09OLnN0cmluZ2lmeShmcm9udGVuZFNldHRpbmdzRGF0YS5jb25maWdWYWx1ZXMpKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYWRzQ29uZmlnJzpcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX2Fkc19jb25maWcnLCBKU09OLnN0cmluZ2lmeShmcm9udGVuZFNldHRpbmdzRGF0YS5hZHNDb25maWcpKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fc2V0dGluZ3NfdXBkYXRlZCcsIERhdGUubm93KCkudG9TdHJpbmcoKSlcbiAgfVxuXG4gIC8vIFB1c2ggcXVpeiBkYXRhIHRvIGZyb250ZW5kXG4gIHByaXZhdGUgYXN5bmMgcHVzaFF1aXpUb0Zyb250ZW5kKGFkbWluUXVpekRhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX3F1aXpfZGF0YScsIEpTT04uc3RyaW5naWZ5KGFkbWluUXVpekRhdGEucXVlc3Rpb25zKSlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9jYXRlZ29yaWVzJywgSlNPTi5zdHJpbmdpZnkoYWRtaW5RdWl6RGF0YS5jYXRlZ29yaWVzKSlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9xdWl6X3NldHRpbmdzJywgSlNPTi5zdHJpbmdpZnkoYWRtaW5RdWl6RGF0YS5zZXR0aW5ncykpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVfcXVpel92ZXJzaW9uJywgYWRtaW5RdWl6RGF0YS52ZXJzaW9uKVxuICB9XG5cbiAgLy8gUHVzaCByZXdhcmRzIGRhdGEgdG8gZnJvbnRlbmRcbiAgcHJpdmF0ZSBhc3luYyBwdXNoUmV3YXJkc1RvRnJvbnRlbmQoYWRtaW5SZXdhcmREYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9yZXdhcmRfZGF0YScsIEpTT04uc3RyaW5naWZ5KGFkbWluUmV3YXJkRGF0YS5hY2hpZXZlbWVudHMpKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX3BvcHVwX3NldHRpbmdzJywgSlNPTi5zdHJpbmdpZnkoYWRtaW5SZXdhcmREYXRhLnBvcHVwU2V0dGluZ3MpKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX2NvaW5fbXVsdGlwbGllcnMnLCBKU09OLnN0cmluZ2lmeShhZG1pblJld2FyZERhdGEuY29pbk11bHRpcGxpZXJzKSlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9yZXdhcmRzX3ZlcnNpb24nLCBhZG1pblJld2FyZERhdGEudmVyc2lvbilcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2FtZV9yZXdhcmRzX3N5bmMnLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvLyBQdXNoIHN5c3RlbSBzZXR0aW5ncyB0byBmcm9udGVuZFxuICBwcml2YXRlIGFzeW5jIHB1c2hTeXN0ZW1TZXR0aW5nc1RvRnJvbnRlbmQoYWRtaW5TZXR0aW5nc0RhdGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX2ZlYXR1cmVfZmxhZ3MnLCBKU09OLnN0cmluZ2lmeShhZG1pblNldHRpbmdzRGF0YS5mZWF0dXJlRmxhZ3MpKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX3NldHRpbmdzX2RhdGEnLCBKU09OLnN0cmluZ2lmeShhZG1pblNldHRpbmdzRGF0YS5jb25maWdWYWx1ZXMpKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX2Fkc19jb25maWcnLCBKU09OLnN0cmluZ2lmeShhZG1pblNldHRpbmdzRGF0YS5hZHNDb25maWcpKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX3NldHRpbmdzX3ZlcnNpb24nLCBhZG1pblNldHRpbmdzRGF0YS52ZXJzaW9uKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lX3NldHRpbmdzX3N5bmMnLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpXG4gIH1cblxuICAvLyBSZXNvbHZlIGNvbmZsaWN0XG4gIHByaXZhdGUgYXN5bmMgcmVzb2x2ZUNvbmZsaWN0KGNvbmZsaWN0OiBDb25mbGljdFJlc29sdXRpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zb2xlLmxvZyhg8J+UhCBSZXNvbHZpbmcgY29uZmxpY3QgZm9yICR7Y29uZmxpY3QuZmllbGR9OiAke2NvbmZsaWN0LnJlc29sdXRpb259YClcblxuICAgIHN3aXRjaCAoY29uZmxpY3QucmVzb2x1dGlvbikge1xuICAgICAgY2FzZSAndXNlLWFkbWluJzpcbiAgICAgICAgLy8gQWRtaW4gZGF0YSB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICd1c2UtZnJvbnRlbmQnOlxuICAgICAgICAvLyBGcm9udGVuZCBkYXRhIHRha2VzIHByZWNlZGVuY2VcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21lcmdlJzpcbiAgICAgICAgLy8gVXNlIG1lcmdlZCB2YWx1ZSBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKGNvbmZsaWN0Lm1lcmdlZFZhbHVlKSB7XG4gICAgICAgICAgLy8gQXBwbHkgbWVyZ2VkIHZhbHVlIHRvIGJvdGggYWRtaW4gYW5kIGZyb250ZW5kXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21hbnVhbCc6XG4gICAgICAgIC8vIE1hbnVhbCByZXNvbHV0aW9uIHJlcXVpcmVkIC0gdGhyb3cgZXJyb3IgdG8gcHJvbXB0IHVzZXJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNYW51YWwgcmVzb2x1dGlvbiByZXF1aXJlZCBmb3IgJHtjb25mbGljdC5maWVsZH1gKVxuICAgIH1cbiAgfVxuXG4gIC8vIENyZWF0ZSByb2xsYmFjayBwb2ludFxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVJvbGxiYWNrUG9pbnQoZGVzY3JpcHRpb246IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGNvbmZpZ1NuYXBzaG90ID0gdGhpcy5nZXRBZG1pbkNvbmZpZ0RhdGEoKVxuXG4gICAgY29uc3Qgcm9sbGJhY2tQb2ludCA9IHtcbiAgICAgIGlkOiBgcm9sbGJhY2stJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KX1gLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBjb25maWdTbmFwc2hvdFxuICAgIH1cblxuICAgIHRoaXMuc3luY0hpc3Rvcnkucm9sbGJhY2tQb2ludHMucHVzaChyb2xsYmFja1BvaW50KVxuXG4gICAgLy8gS2VlcCBvbmx5IGxhc3QgMTAgcm9sbGJhY2sgcG9pbnRzXG4gICAgaWYgKHRoaXMuc3luY0hpc3Rvcnkucm9sbGJhY2tQb2ludHMubGVuZ3RoID4gMTApIHtcbiAgICAgIHRoaXMuc3luY0hpc3Rvcnkucm9sbGJhY2tQb2ludHMgPSB0aGlzLnN5bmNIaXN0b3J5LnJvbGxiYWNrUG9pbnRzLnNsaWNlKC0xMClcbiAgICB9XG5cbiAgICB0aGlzLnNhdmVTeW5jSGlzdG9yeSgpXG4gICAgY29uc29sZS5sb2coYPCflIQgUm9sbGJhY2sgcG9pbnQgY3JlYXRlZDogJHtkZXNjcmlwdGlvbn1gKVxuICB9XG5cbiAgLy8gUm9sbGJhY2sgdG8gc3BlY2lmaWMgcG9pbnRcbiAgYXN5bmMgcm9sbGJhY2tUb1BvaW50KHJvbGxiYWNrSWQ6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByb2xsYmFja1BvaW50ID0gdGhpcy5zeW5jSGlzdG9yeS5yb2xsYmFja1BvaW50cy5maW5kKHJwID0+IHJwLmlkID09PSByb2xsYmFja0lkKVxuXG4gICAgICBpZiAoIXJvbGxiYWNrUG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdSb2xsYmFjayBwb2ludCBub3QgZm91bmQnIH1cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYPCflIQgUm9sbGluZyBiYWNrIHRvOiAke3JvbGxiYWNrUG9pbnQuZGVzY3JpcHRpb259YClcblxuICAgICAgLy8gUmVzdG9yZSBhZG1pbiBjb25maWd1cmF0aW9uXG4gICAgICBjb25zdCBjb25maWcgPSByb2xsYmFja1BvaW50LmNvbmZpZ1NuYXBzaG90XG5cbiAgICAgIC8vIFJlc3RvcmUgcXVpeiBkYXRhXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fcXVpel9xdWVzdGlvbnMnLCBKU09OLnN0cmluZ2lmeShjb25maWcucXVpei5xdWVzdGlvbnMpKVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX3F1aXpfY2F0ZWdvcmllcycsIEpTT04uc3RyaW5naWZ5KGNvbmZpZy5xdWl6LmNhdGVnb3JpZXMpKVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX3F1aXpfc2V0dGluZ3MnLCBKU09OLnN0cmluZ2lmeShjb25maWcucXVpei5zZXR0aW5ncykpXG5cbiAgICAgIC8vIFJlc3RvcmUgcmV3YXJkIGRhdGFcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9yZXdhcmRfYWNoaWV2ZW1lbnRzJywgSlNPTi5zdHJpbmdpZnkoY29uZmlnLnJld2FyZHMuYWNoaWV2ZW1lbnRzKSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9yZXdhcmRfcG9wdXBfc2V0dGluZ3MnLCBKU09OLnN0cmluZ2lmeShjb25maWcucmV3YXJkcy5wb3B1cFNldHRpbmdzKSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9yZXdhcmRfY29pbl9tdWx0aXBsaWVycycsIEpTT04uc3RyaW5naWZ5KGNvbmZpZy5yZXdhcmRzLmNvaW5NdWx0aXBsaWVycykpXG5cbiAgICAgIC8vIFJlc3RvcmUgc3lzdGVtIHNldHRpbmdzXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5fZmVhdHVyZV9mbGFncycsIEpTT04uc3RyaW5naWZ5KGNvbmZpZy5zeXN0ZW1TZXR0aW5ncy5mZWF0dXJlRmxhZ3MpKVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX3N5c3RlbV9zZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KGNvbmZpZy5zeXN0ZW1TZXR0aW5ncy5jb25maWdWYWx1ZXMpKVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FkbWluX2Fkc19jb25maWcnLCBKU09OLnN0cmluZ2lmeShjb25maWcuc3lzdGVtU2V0dGluZ3MuYWRzQ29uZmlnKSlcblxuICAgICAgLy8gVXBkYXRlIHRpbWVzdGFtcHNcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhZG1pbl9yb2xsYmFja190aW1lc3RhbXAnLCBEYXRlLm5vdygpLnRvU3RyaW5nKCkpXG5cbiAgICAgIC8vIENyZWF0ZSBvcGVyYXRpb24gcmVjb3JkXG4gICAgICBjb25zdCByb2xsYmFja09wZXJhdGlvbjogU3luY09wZXJhdGlvbiA9IHtcbiAgICAgICAgaWQ6IGByb2xsYmFjay1vcC0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgdHlwZTogJ3B1c2gnLCAvLyBSb2xsYmFjayBpcyBlc3NlbnRpYWxseSBwdXNoaW5nIG9sZCBhZG1pbiBkYXRhXG4gICAgICAgIGRpcmVjdGlvbjogJ2FkbWluLXRvLWZyb250ZW5kJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBjaGFuZ2VzOiBbXSxcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgcmlza0xldmVsOiAnY2F1dGlvbicsXG4gICAgICAgIHBlcmZvcm1hbmNlTWV0cmljczoge1xuICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIGRhdGFTaXplOiBKU09OLnN0cmluZ2lmeShjb25maWcpLmxlbmd0aCxcbiAgICAgICAgICBjb25mbGljdHNSZXNvbHZlZDogMFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3luY0hpc3Rvcnkub3BlcmF0aW9ucy5wdXNoKHJvbGxiYWNrT3BlcmF0aW9uKVxuICAgICAgdGhpcy5zYXZlU3luY0hpc3RvcnkoKVxuXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBgU3VjY2Vzc2Z1bGx5IHJvbGxlZCBiYWNrIHRvOiAke3JvbGxiYWNrUG9pbnQuZGVzY3JpcHRpb259YCB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign8J+UhCBSb2xsYmFjayBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnUm9sbGJhY2sgZmFpbGVkJyB9XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGxhc3Qgb3BlcmF0aW9uXG4gIGdldExhc3RPcGVyYXRpb24oKTogU3luY09wZXJhdGlvbiB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnN5bmNIaXN0b3J5Lm9wZXJhdGlvbnMubGVuZ3RoID4gMFxuICAgICAgPyB0aGlzLnN5bmNIaXN0b3J5Lm9wZXJhdGlvbnNbdGhpcy5zeW5jSGlzdG9yeS5vcGVyYXRpb25zLmxlbmd0aCAtIDFdXG4gICAgICA6IG51bGxcbiAgfVxuXG4gIC8vIFVuZG8gbGFzdCBzeW5jXG4gIGFzeW5jIHVuZG9MYXN0U3luYygpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBsYXN0T3BlcmF0aW9uID0gdGhpcy5nZXRMYXN0T3BlcmF0aW9uKClcblxuICAgIGlmICghbGFzdE9wZXJhdGlvbikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdObyBzeW5jIG9wZXJhdGlvbnMgdG8gdW5kbycgfVxuICAgIH1cblxuICAgIGlmIChsYXN0T3BlcmF0aW9uLnN0YXR1cyA9PT0gJ3JvbGxlZC1iYWNrJykge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdMYXN0IG9wZXJhdGlvbiB3YXMgYWxyZWFkeSByb2xsZWQgYmFjaycgfVxuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIHJvbGxiYWNrIHBvaW50IGJlZm9yZSB0aGUgbGFzdCBvcGVyYXRpb25cbiAgICBjb25zdCByb2xsYmFja1BvaW50ID0gdGhpcy5zeW5jSGlzdG9yeS5yb2xsYmFja1BvaW50c1xuICAgICAgLmZpbHRlcihycCA9PiBycC50aW1lc3RhbXAgPCBsYXN0T3BlcmF0aW9uLnRpbWVzdGFtcClcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnRpbWVzdGFtcCAtIGEudGltZXN0YW1wKVswXVxuXG4gICAgaWYgKCFyb2xsYmFja1BvaW50KSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ05vIHJvbGxiYWNrIHBvaW50IGF2YWlsYWJsZSBiZWZvcmUgbGFzdCBvcGVyYXRpb24nIH1cbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJvbGxiYWNrVG9Qb2ludChyb2xsYmFja1BvaW50LmlkKVxuXG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAvLyBNYXJrIGxhc3Qgb3BlcmF0aW9uIGFzIHJvbGxlZCBiYWNrXG4gICAgICBsYXN0T3BlcmF0aW9uLnN0YXR1cyA9ICdyb2xsZWQtYmFjaydcbiAgICAgIHRoaXMuc2F2ZVN5bmNIaXN0b3J5KClcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICAvLyBDaGVjayBpZiBvcGVyYXRpb24gaXMgaW4gcHJvZ3Jlc3NcbiAgaXNPcGVyYXRpb25JblByb2dyZXNzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzT3BlcmF0aW9uSW5Qcm9ncmVzc1xuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBiaWRpcmVjdGlvbmFsU3luYyA9IEJpZGlyZWN0aW9uYWxTeW5jU2VydmljZS5nZXRJbnN0YW5jZSgpXG4iXSwibmFtZXMiOlsicXVpekRhdGFNYW5hZ2VyIiwicmV3YXJkRGF0YU1hbmFnZXIiLCJzZXR0aW5nc0RhdGFNYW5hZ2VyIiwiQmlkaXJlY3Rpb25hbFN5bmNTZXJ2aWNlIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImdldEFkbWluQ29uZmlnRGF0YSIsIm5vdyIsIkRhdGUiLCJxdWl6IiwicXVlc3Rpb25zIiwiZ2V0UXVlc3Rpb25zIiwiY2F0ZWdvcmllcyIsImdldENhdGVnb3JpZXMiLCJzZXR0aW5ncyIsImdldFNldHRpbmdzIiwibGFzdE1vZGlmaWVkIiwicGFyc2VJbnQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwidG9TdHJpbmciLCJ2ZXJzaW9uIiwiZ2VuZXJhdGVWZXJzaW9uIiwicmV3YXJkcyIsImFjaGlldmVtZW50cyIsImdldEFjaGlldmVtZW50cyIsInBvcHVwU2V0dGluZ3MiLCJnZXRSZXdhcmRDb25maWciLCJjb2luTXVsdGlwbGllcnMiLCJjb2luVmFsdWVzIiwic3lzdGVtU2V0dGluZ3MiLCJmZWF0dXJlRmxhZ3MiLCJnZXRTeXN0ZW1TZXR0aW5ncyIsImNvbmZpZ1ZhbHVlcyIsImFkc0NvbmZpZyIsImdldEludGVncmF0aW9uU2V0dGluZ3MiLCJhZHNlbnNlIiwiZ2V0RnJvbnRlbmRDb25maWdEYXRhIiwiSlNPTiIsInBhcnNlIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0RGVmYXVsdENvbmZpZ0RhdGEiLCJjYXRlZ29yeSIsInRpbWVzdGFtcCIsImhhc2giLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyaW5nIiwiZGV0ZWN0Q2hhbmdlcyIsImFkbWluRGF0YSIsImZyb250ZW5kRGF0YSIsImNoYW5nZXMiLCJwdXNoIiwiY29tcGFyZVF1aXpEYXRhIiwiY29tcGFyZVJld2FyZHNEYXRhIiwiY29tcGFyZVN5c3RlbVNldHRpbmdzIiwiYWRtaW4iLCJmcm9udGVuZCIsInF1ZXN0aW9uQ2hhbmdlcyIsImNvbXBhcmVRdWVzdGlvbnMiLCJzdHJpbmdpZnkiLCJmaWVsZCIsImFjdGlvbiIsIm9sZFZhbHVlIiwibmV3VmFsdWUiLCJyaXNrTGV2ZWwiLCJpbXBhY3QiLCJsZW5ndGgiLCJkZXRhaWxzIiwiYWRkZWQiLCJmaWx0ZXIiLCJjYXQiLCJpbmNsdWRlcyIsInJlbW92ZWQiLCJzZXR0aW5nc0NoYW5nZWQiLCJnZXRTZXR0aW5nc0NoYW5nZXMiLCJhZG1pblF1ZXN0aW9ucyIsImZyb250ZW5kUXVlc3Rpb25zIiwiYWRtaW5NYXAiLCJNYXAiLCJtYXAiLCJxIiwiaWQiLCJmcm9udGVuZE1hcCIsImFkZGVkUXVlc3Rpb25zIiwiaGFzIiwicXVlc3Rpb24iLCJkaWZmaWN1bHR5IiwidHlwZSIsIm9wdGlvbnMiLCJjb3JyZWN0QW5zd2VyIiwiZnVuRmFjdCIsInRhZ3MiLCJyZW1vdmVkUXVlc3Rpb25zIiwibW9kaWZpZWRRdWVzdGlvbnMiLCJhZG1pblEiLCJmcm9udGVuZFEiLCJnZXQiLCJxdWVzdGlvbkRpZmYiLCJnZXRRdWVzdGlvbkRpZmYiLCJvbGRRdWVzdGlvbiIsIm5ld1F1ZXN0aW9uIiwibSIsImRpZmYiLCJvbGQiLCJuZXciLCJpbmRleCIsInRleHQiLCJvbGRTZXR0aW5ncyIsIm5ld1NldHRpbmdzIiwia2V5IiwiZGV0ZWN0Q29uZmxpY3RzIiwiY29uZmxpY3RzIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJhZG1pbkNhdCIsImZyb250ZW5kQ2F0IiwidGltZURpZmYiLCJhYnMiLCJhZG1pblZhbHVlIiwiZnJvbnRlbmRWYWx1ZSIsImFkbWluVGltZXN0YW1wIiwiZnJvbnRlbmRUaW1lc3RhbXAiLCJyZXNvbHV0aW9uIiwiYXNzZXNzRGF0YUZyZXNobmVzcyIsImFnZSIsImdlbmVyYXRlU3luY1ByZXZpZXciLCJvcGVyYXRpb24iLCJzdGFydFRpbWUiLCJwZXJmb3JtYW5jZSIsImxvZyIsImRpcmVjdGlvbiIsInN5bmNPcGVyYXRpb24iLCJzdGF0dXMiLCJjYWxjdWxhdGVPdmVyYWxsUmlza0xldmVsIiwicGVyZm9ybWFuY2VNZXRyaWNzIiwiZHVyYXRpb24iLCJkYXRhU2l6ZSIsImNvbmZsaWN0c1Jlc29sdmVkIiwicHJldmlldyIsInN1bW1hcnkiLCJ0b3RhbENoYW5nZXMiLCJzYWZlQ2hhbmdlcyIsImMiLCJjYXV0aW9uQ2hhbmdlcyIsImRlc3RydWN0aXZlQ2hhbmdlcyIsImVzdGltYXRlZER1cmF0aW9uIiwiZXN0aW1hdGVTeW5jRHVyYXRpb24iLCJkYXRhRnJlc2huZXNzIiwibWF4IiwidG9GaXhlZCIsInNvbWUiLCJzZXR1cFN0b3JhZ2VMaXN0ZW5lcnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInN0YXJ0c1dpdGgiLCJub3RpZnlMaXN0ZW5lcnMiLCJsb2FkU3luY0hpc3RvcnkiLCJoaXN0b3J5Iiwic3luY0hpc3RvcnkiLCJvcGVyYXRpb25zIiwicm9sbGJhY2tQb2ludHMiLCJzYXZlU3luY0hpc3RvcnkiLCJzZXRJdGVtIiwiYWRkU3luY0xpc3RlbmVyIiwiY2FsbGJhY2siLCJsaXN0ZW5lcnMiLCJyZW1vdmVTeW5jTGlzdGVuZXIiLCJpbmRleE9mIiwic3BsaWNlIiwiZ2V0U3luY0hpc3RvcnkiLCJleGVjdXRlU3luY09wZXJhdGlvbiIsImlzT3BlcmF0aW9uSW5Qcm9ncmVzcyIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiY3JlYXRlUm9sbGJhY2tQb2ludCIsInN5bmNGcm9tRnJvbnRlbmQiLCJzeW5jVG9Gcm9udGVuZCIsInNtYXJ0U3luYyIsInJlc2V0RnJvbnRlbmQiLCJFcnJvciIsImNoYW5nZSIsImFwcGx5UXVpekNoYW5nZXMiLCJhcHBseVJld2FyZENoYW5nZXMiLCJhcHBseVN5c3RlbVNldHRpbmdzQ2hhbmdlcyIsInB1c2hRdWl6VG9Gcm9udGVuZCIsInB1c2hSZXdhcmRzVG9Gcm9udGVuZCIsInB1c2hTeXN0ZW1TZXR0aW5nc1RvRnJvbnRlbmQiLCJjb25mbGljdCIsInJlc29sdmVDb25mbGljdCIsIm5vbkNvbmZsaWN0aW5nQ2hhbmdlcyIsImZyb250ZW5kUXVpekRhdGEiLCJmcm9udGVuZFJld2FyZERhdGEiLCJmcm9udGVuZFNldHRpbmdzRGF0YSIsImFkbWluUXVpekRhdGEiLCJhZG1pblJld2FyZERhdGEiLCJhZG1pblNldHRpbmdzRGF0YSIsIm1lcmdlZFZhbHVlIiwiZGVzY3JpcHRpb24iLCJjb25maWdTbmFwc2hvdCIsInJvbGxiYWNrUG9pbnQiLCJzbGljZSIsInJvbGxiYWNrVG9Qb2ludCIsInJvbGxiYWNrSWQiLCJmaW5kIiwicnAiLCJjb25maWciLCJyb2xsYmFja09wZXJhdGlvbiIsImdldExhc3RPcGVyYXRpb24iLCJ1bmRvTGFzdFN5bmMiLCJsYXN0T3BlcmF0aW9uIiwic29ydCIsImEiLCJiIiwicmVzdWx0IiwiYmlkaXJlY3Rpb25hbFN5bmMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/utils/bidirectionalSync.ts\n"));

/***/ })

});