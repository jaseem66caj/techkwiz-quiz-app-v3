"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{263:(e,t,s)=>{s.d(t,{_:()=>o});var l=s(5155),i=s(2115),r=s(760),n=s(3463),a=s(1890);function o(e){let{isOpen:t,onClose:s,coinsEarned:o,onClaimReward:c,onSkipReward:d,canWatchAgain:u=!1,onWatchAgain:h,isCorrect:x=!0,rewardCoins:p=100,categoryId:f}=e,[m,y]=(0,i.useState)(!1),[g,j]=(0,i.useState)(!1),[w,b]=(0,i.useState)(null),[v,N]=(0,i.useState)(5);if((0,i.useEffect)(()=>{let e=async()=>{try{let e=a.env.REACT_APP_BACKEND_URL||"http://localhost:8001",t=await fetch("".concat(e).concat(f?"/api/quiz/rewarded-config/".concat(f):"/api/quiz/rewarded-config"));if(t.ok){let e=await t.json();b(e)}}catch(e){console.error("Failed to fetch reward config:",e),b({coin_reward:100,is_active:!0,show_on_insufficient_coins:!0,show_during_quiz:!0})}};t&&e()},[t,f]),(0,i.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="visible",()=>{document.body.style.overflow="visible"}),[t]),(0,i.useEffect)(()=>{let e;return m&&v>0&&(e=setTimeout(()=>N(v-1),1e3)),()=>clearTimeout(e)},[m,v]),!(null==w?void 0:w.is_active))return null;let k=(null==w?void 0:w.coin_reward)||p;return(0,l.jsx)(r.N,{children:t&&(0,l.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,l.jsx)(n.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3,ease:"easeOut"},className:"relative z-10 mx-4 w-full max-w-sm",children:(0,l.jsx)("div",{className:"relative bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl border-2 border-white/30 p-6 text-center shadow-2xl overflow-hidden",children:m?(0,l.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"py-8",children:[(0,l.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCFA"}),(0,l.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Watching Ad..."}),(0,l.jsx)("p",{className:"text-gray-300 mb-6 text-base",children:"Please wait while the ad loads"}),(0,l.jsx)("div",{className:"flex justify-center mb-4",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-3 border-purple-500 border-t-transparent"})}),(0,l.jsx)("p",{className:"text-yellow-400 text-lg font-medium",children:v>0?"".concat(v," seconds remaining..."):"Almost done..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.P.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",bounce:.6},className:"mb-6",children:(0,l.jsx)("div",{className:"relative mx-auto w-24 h-20",children:(0,l.jsxs)("svg",{viewBox:"0 0 120 100",className:"w-full h-full",children:[(0,l.jsx)("rect",{x:"20",y:"50",width:"80",height:"35",rx:"6",fill:"#D4910A",stroke:"#B8800A",strokeWidth:"2"}),(0,l.jsx)("ellipse",{cx:"60",cy:"50",rx:"40",ry:"15",fill:"#F4B942",stroke:"#D4910A",strokeWidth:"2"}),(0,l.jsx)("rect",{x:"57",y:"53",width:"6",height:"10",rx:"1",fill:"#C0C0C0",stroke:"#A0A0A0",strokeWidth:"1"}),(0,l.jsx)("circle",{cx:"60",cy:"56",r:"2",fill:"#A0A0A0"}),x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("circle",{cx:"50",cy:"35",r:"4",fill:"#FFD700",stroke:"#DAA520",strokeWidth:"1"}),(0,l.jsx)("circle",{cx:"60",cy:"32",r:"4",fill:"#FFD700",stroke:"#DAA520",strokeWidth:"1"}),(0,l.jsx)("circle",{cx:"70",cy:"35",r:"4",fill:"#FFD700",stroke:"#DAA520",strokeWidth:"1"}),(0,l.jsx)("circle",{cx:"55",cy:"40",r:"3",fill:"#FFD700",stroke:"#DAA520",strokeWidth:"1"}),(0,l.jsx)("circle",{cx:"65",cy:"40",r:"3",fill:"#FFD700",stroke:"#DAA520",strokeWidth:"1"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("circle",{cx:"55",cy:"35",r:"3",fill:"#FFD700",stroke:"#DAA520",strokeWidth:"1"}),(0,l.jsx)("circle",{cx:"65",cy:"35",r:"3",fill:"#FFD700",stroke:"#DAA520",strokeWidth:"1"})]}),(0,l.jsxs)(n.P.g,{animate:{opacity:[.4,1,.4],scale:[.8,1.2,.8]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[(0,l.jsx)("polygon",{points:"30,25 33,32 26,32",fill:"#FFD700"}),(0,l.jsx)("polygon",{points:"90,25 93,32 86,32",fill:"#FFD700"}),(0,l.jsx)("polygon",{points:"60,20 63,27 56,27",fill:"#FFD700"}),(0,l.jsx)("polygon",{points:"40,15 42,20 37,20",fill:"#FFD700"}),(0,l.jsx)("polygon",{points:"80,15 82,20 77,20",fill:"#FFD700"})]})]})})}),(0,l.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-yellow-400 mb-3",children:x?"Hurray!!":"Oops!!"}),(0,l.jsx)("p",{className:"text-lg font-medium text-yellow-300 mb-4",children:x?"Correct answer":"Wrong answer"}),x?(0,l.jsxs)("p",{className:"text-white text-base mb-3",children:["You won ",(0,l.jsxs)("span",{className:"text-yellow-400 font-bold",children:[o," coins"]})]}):(0,l.jsx)("p",{className:"text-white text-base mb-3",children:"You still have a chance to win coins."}),(0,l.jsxs)("p",{className:"text-white text-lg leading-relaxed",children:[(0,l.jsx)("span",{className:"block",children:"Just watch an ad & earn"}),(0,l.jsxs)("span",{className:"text-yellow-400 font-bold text-xl",children:[k," coins"]})]})]}),(0,l.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-4",children:[g?(0,l.jsxs)(l.Fragment,{children:[u&&h&&(0,l.jsx)("button",{onClick:()=>{h&&(y(!0),N(5),setTimeout(()=>{y(!1),h(),s()},5e3))},className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-lg",children:(0,l.jsxs)("span",{className:"flex items-center justify-center space-x-3",children:[(0,l.jsx)("span",{className:"text-lg",children:"Watch Again"}),(0,l.jsxs)("span",{className:"bg-green-800/70 px-3 py-1 rounded-md text-sm font-medium",children:["+",k]})]})}),(0,l.jsx)("button",{onClick:()=>s(),className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300",children:(0,l.jsx)("span",{className:"text-lg",children:"Continue"})})]}):(0,l.jsxs)("button",{onClick:()=>{y(!0),N(5),setTimeout(()=>{y(!1),j(!0),c(),u||s()},5e3)},className:"w-full bg-gradient-to-r from-purple-600 via-purple-700 to-purple-800 hover:from-purple-700 hover:via-purple-800 hover:to-purple-900 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-lg relative overflow-hidden",children:[(0,l.jsxs)("span",{className:"relative z-10 flex items-center justify-center space-x-3",children:[(0,l.jsx)("span",{className:"text-lg",children:"Claim"}),(0,l.jsx)("span",{className:"bg-purple-900/50 px-3 py-1 rounded-md text-sm font-medium",children:"Ad"})]}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-purple-300/20 to-purple-400/0 animate-pulse"})]}),(0,l.jsx)("button",{onClick:()=>{d(),s()},className:"text-gray-400 hover:text-white transition-colors text-base underline mt-4",children:"Close"})]})]})})})]})})}},760:(e,t,s)=>{s.d(t,{N:()=>g});var l=s(5155),i=s(2115),r=s(869),n=s(2885),a=s(7494),o=s(845),c=s(7351),d=s(1508);class u extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,c.s)(e)&&e.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h(e){let{children:t,isPresent:s,anchorX:r,root:n}=e,a=(0,i.useId)(),o=(0,i.useRef)(null),c=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,i.useContext)(d.Q);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:l,left:i,right:d}=c.current;if(s||!o.current||!e||!t)return;o.current.dataset.motionPopId=a;let u=document.createElement("style");h&&(u.nonce=h);let x=null!=n?n:document.head;return x.appendChild(u),u.sheet&&u.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===r?"left: ".concat(i):"right: ".concat(d),"px !important;\n            top: ").concat(l,"px !important;\n          }\n        ")),()=>{x.contains(u)&&x.removeChild(u)}},[s]),(0,l.jsx)(u,{isPresent:s,childRef:o,sizeRef:c,children:i.cloneElement(t,{ref:o})})}let x=e=>{let{children:t,initial:s,isPresent:r,onExitComplete:a,custom:c,presenceAffectsLayout:d,mode:u,anchorX:x,root:f}=e,m=(0,n.M)(p),y=(0,i.useId)(),g=!0,j=(0,i.useMemo)(()=>(g=!1,{id:y,initial:s,isPresent:r,custom:c,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;a&&a()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[r,m,a]);return d&&g&&(j={...j}),(0,i.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[r]),i.useEffect(()=>{r||m.size||!a||a()},[r]),"popLayout"===u&&(t=(0,l.jsx)(h,{isPresent:r,anchorX:x,root:f,children:t})),(0,l.jsx)(o.t.Provider,{value:j,children:t})};function p(){return new Map}var f=s(2082);let m=e=>e.key||"";function y(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}let g=e=>{let{children:t,custom:s,initial:o=!0,onExitComplete:c,presenceAffectsLayout:d=!0,mode:u="sync",propagate:h=!1,anchorX:p="left",root:g}=e,[j,w]=(0,f.xQ)(h),b=(0,i.useMemo)(()=>y(t),[t]),v=h&&!j?[]:b.map(m),N=(0,i.useRef)(!0),k=(0,i.useRef)(b),A=(0,n.M)(()=>new Map),[F,D]=(0,i.useState)(b),[C,E]=(0,i.useState)(b);(0,a.E)(()=>{N.current=!1,k.current=b;for(let e=0;e<C.length;e++){let t=m(C[e]);v.includes(t)?A.delete(t):!0!==A.get(t)&&A.set(t,!1)}},[C,v.length,v.join("-")]);let P=[];if(b!==F){let e=[...b];for(let t=0;t<C.length;t++){let s=C[t],l=m(s);v.includes(l)||(e.splice(t,0,s),P.push(s))}return"wait"===u&&P.length&&(e=P),E(y(e)),D(b),null}let{forceRender:_}=(0,i.useContext)(r.L);return(0,l.jsx)(l.Fragment,{children:C.map(e=>{let t=m(e),i=(!h||!!j)&&(b===C||v.includes(t));return(0,l.jsx)(x,{isPresent:i,initial:(!N.current||!!o)&&void 0,custom:s,presenceAffectsLayout:d,mode:u,root:g,onExitComplete:i?void 0:()=>{if(!A.has(t))return;A.set(t,!0);let e=!0;A.forEach(t=>{t||(e=!1)}),e&&(null==_||_(),E(k.current),h&&(null==w||w()),c&&c())},anchorX:p,children:e},t)})})}}}]);