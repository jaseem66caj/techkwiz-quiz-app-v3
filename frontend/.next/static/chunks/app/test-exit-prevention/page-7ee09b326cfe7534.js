(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{1595:(e,t,s)=>{"use strict";s.d(t,{K:()=>n});var r=s(2115);function n(e){let{isActive:t,onExitAttempt:s,customMessage:n="Are you sure you want to leave? Your progress will be lost!"}=e,o=(0,r.useRef)(t),a=(0,r.useRef)(s);(0,r.useEffect)(()=>{o.current=t,a.current=s},[t,s]);let l=(0,r.useCallback)(e=>{if(console.log("\uD83D\uDD27 beforeunload event triggered, isActive:",o.current),o.current)return console.log("\uD83D\uDEA8 beforeunload: Preventing exit and calling onExitAttempt"),e.preventDefault(),e.returnValue=n,a.current(),n},[n]),i=(0,r.useCallback)(e=>{console.log("\uD83D\uDD27 popstate event triggered, isActive:",o.current),o.current&&(console.log("\uD83D\uDEA8 popstate: Preventing navigation and calling onExitAttempt"),window.history.pushState(null,"",window.location.pathname),a.current())},[]),d=(0,r.useCallback)(e=>{o.current&&(e.altKey&&"F4"===e.key||e.ctrlKey&&"w"===e.key||e.ctrlKey&&"q"===e.key||e.metaKey&&"w"===e.key||e.metaKey&&"q"===e.key)&&(console.log("\uD83D\uDEA8 keyboard shortcut detected:",e.key,"calling onExitAttempt"),e.preventDefault(),a.current())},[]);return(0,r.useEffect)(()=>{if(console.log("\uD83D\uDD27 useExitPrevention: Effect running, isActive:",t),t)return console.log("\uD83D\uDD27 useExitPrevention: Adding event listeners..."),window.addEventListener("beforeunload",l),window.addEventListener("popstate",i),window.addEventListener("keydown",d),window.history.pushState(null,"",window.location.pathname),console.log("\uD83D\uDD27 useExitPrevention: Event listeners added successfully"),()=>{console.log("\uD83D\uDD27 useExitPrevention: Cleaning up event listeners..."),window.removeEventListener("beforeunload",l),window.removeEventListener("popstate",i),window.removeEventListener("keydown",d)}},[t,l,i,d]),{disablePrevention:(0,r.useCallback)(()=>{o.current=!1},[])}}},2343:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(5155),n=s(2115),o=s(5695),a=s(7062),l=s(1595);function i(){let e=(0,o.useRouter)(),[t,s]=(0,n.useState)(!1),[i,d]=(0,n.useState)(!0),[c,u]=(0,n.useState)([]),x=e=>{u(t=>[...t,"".concat(new Date().toLocaleTimeString(),": ").concat(e)])},{disablePrevention:m}=(0,l.K)({isActive:i,onExitAttempt:()=>{x("\uD83D\uDEA8 EXIT ATTEMPT DETECTED! Showing modal..."),s(!0)},customMessage:"Are you sure you want to leave? This is a test page!"});return(0,n.useEffect)(()=>{x("\uD83D\uDD27 Exit prevention initialized, isActive: ".concat(i))},[i]),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 p-8",children:[(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-8",children:"Exit Prevention System Test"}),(0,r.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Current Status"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:"Exit Prevention"}),(0,r.jsx)("p",{className:"text-lg font-bold ".concat(i?"text-green-400":"text-red-400"),children:i?"\uD83D\uDFE2 ACTIVE":"\uD83D\uDD34 INACTIVE"})]}),(0,r.jsxs)("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:"Modal State"}),(0,r.jsx)("p",{className:"text-lg font-bold ".concat(t?"text-yellow-400":"text-blue-400"),children:t?"⚠️ SHOWING":"✅ HIDDEN"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Test Controls"}),(0,r.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,r.jsx)("button",{onClick:()=>{d(!i),x("\uD83D\uDD04 Exit prevention toggled to: ".concat(!i))},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium",children:i?"Disable Prevention":"Enable Prevention"}),(0,r.jsx)("button",{onClick:()=>{x("\uD83E\uDDEA Manual trigger test"),s(!0)},className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium",children:"Test Modal (Manual)"}),(0,r.jsx)("button",{onClick:()=>window.history.back(),className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg font-medium",children:"Test Back Button"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Test Instructions"}),(0,r.jsxs)("div",{className:"text-gray-300 space-y-2",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"1. Back Button Test:"}),' Click browser back button or use "Test Back Button"']}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"2. Keyboard Test:"})," Try Ctrl+W, Alt+F4, or Cmd+W (Mac)"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"3. Tab Close:"})," Try to close the browser tab"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"4. Navigation:"})," Try to navigate to a different URL"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"5. Manual Test:"}),' Use "Test Modal" button to verify modal works']})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Debug Log"}),(0,r.jsx)("div",{className:"bg-gray-900/50 p-4 rounded-lg h-64 overflow-y-auto",children:0===c.length?(0,r.jsx)("p",{className:"text-gray-400",children:"No debug information yet..."}):c.map((e,t)=>(0,r.jsx)("p",{className:"text-gray-300 text-sm font-mono mb-1",children:e},t))}),(0,r.jsx)("button",{onClick:()=>u([]),className:"mt-4 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded text-sm",children:"Clear Log"})]})]}),(0,r.jsx)(a.B,{isOpen:t,onConfirm:()=>{x("✅ User confirmed exit"),s(!1),m(),e.push("/start")},onCancel:()=>{x("❌ User cancelled exit"),s(!1)},currentProgress:{questionNumber:3,totalQuestions:5,coinsAtRisk:150}})]})}},3762:(e,t,s)=>{Promise.resolve().then(s.bind(s,2343))},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},7062:(e,t,s)=>{"use strict";s.d(t,{B:()=>a});var r=s(5155),n=s(2115),o=s(3463);function a(e){let{isOpen:t,onConfirm:s,onCancel:a,currentProgress:l}=e,[i,d]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{if(t)d(!0);else{let e=setTimeout(()=>d(!1),200);return()=>clearTimeout(e)}},[t]),i)?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:(0,r.jsxs)(o.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:+!!t,scale:t?1:.9,y:20*!t},transition:{duration:.2,ease:"easeOut"},className:"bg-gradient-to-br from-red-900/95 to-orange-900/95 backdrop-blur-md rounded-2xl p-8 max-w-md mx-auto border border-red-400/30 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"⚠️"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Do you want to exit the quiz?"}),l&&(0,r.jsxs)("div",{className:"bg-red-500/20 backdrop-blur-sm rounded-xl p-4 border border-red-400/30 mb-6",children:[(0,r.jsx)("p",{className:"text-red-100 text-sm mb-2",children:(0,r.jsx)("strong",{children:"You're doing great!"})}),(0,r.jsxs)("div",{className:"space-y-1 text-sm text-red-200",children:[(0,r.jsxs)("div",{children:["\uD83D\uDCCA Progress: ",l.questionNumber,"/",l.totalQuestions]}),(0,r.jsxs)("div",{children:["\uD83E\uDE99 Potential coins at risk: ",l.coinsAtRisk]})]})]}),(0,r.jsx)("p",{className:"text-red-100 mb-8 leading-relaxed",children:l?"You've made good progress! Are you sure you want to leave and lose your current streak?":"Your progress will be lost if you exit now. Are you sure?"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(o.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-medium py-3 px-6 rounded-xl transition-all duration-200 shadow-lg",children:"Continue Playing"}),(0,r.jsx)(o.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"flex-1 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white font-medium py-3 px-6 rounded-xl transition-all duration-200 shadow-lg",children:"Yes, Exit"})]}),(0,r.jsx)("p",{className:"text-orange-200 text-xs mt-4 opacity-75",children:"\uD83D\uDCA1 Tip: Complete quizzes to maximize your coin earnings!"})]})}):null}}},e=>{e.O(0,[463,441,964,358],()=>e(e.s=3762)),_N_E=e.O()}]);