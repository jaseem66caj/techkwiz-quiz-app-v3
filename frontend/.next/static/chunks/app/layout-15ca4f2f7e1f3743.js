(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{210:(e,t,r)=>{"use strict";r.d(t,{$5:()=>i,Go:()=>S,HW:()=>u,R1:()=>c,iD:()=>n,ri:()=>l,wR:()=>s,z0:()=>_});let o={USER:"techkwiz_user",AUTH_TOKEN:"techkwiz_auth"},a=(e,t)=>({id:"user_"+Math.random().toString(36).substr(2,9),email:e.toLowerCase(),name:e.split("@")[0].replace(/[^a-zA-Z0-9]/g," ").trim()||"Tech Enthusiast",coins:500,level:1,totalQuizzes:0,correctAnswers:0,joinDate:new Date().toISOString(),quizHistory:[]}),n=(e,t)=>{let r=d(e);if(r)return localStorage.setItem(o.AUTH_TOKEN,"dummy_token_"+r.id),r;{let r=a(e,t);return c(r),localStorage.setItem(o.AUTH_TOKEN,"dummy_token_"+r.id),r}},i=(e,t,r)=>{let n=a(e,t);return r&&(n.name=r),c(n),localStorage.setItem(o.AUTH_TOKEN,"dummy_token_"+n.id),n},l=()=>{localStorage.removeItem(o.AUTH_TOKEN)},s=()=>!!localStorage.getItem(o.AUTH_TOKEN),u=()=>{let e=localStorage.getItem(o.AUTH_TOKEN);if(!e)return null;let t=e.replace("dummy_token_","");return m().find(e=>e.id===t)||null},c=e=>{let t=m(),r=t.findIndex(t=>t.id===e.id||t.email===e.email);r>=0?t[r]=e:t.push(e),localStorage.setItem(o.USER,JSON.stringify(t))},d=e=>m().find(t=>t.email===e.toLowerCase())||null,m=()=>{try{let e=localStorage.getItem(o.USER);return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing stored users:",e),[]}},_=(e,t)=>{let r=m(),a=r.findIndex(t=>t.id===e);a>=0&&(r[a].coins=t,localStorage.setItem(o.USER,JSON.stringify(r)))},S=(e,t)=>{let r=m(),a=r.findIndex(t=>t.id===e);if(a>=0){r[a].quizHistory.push(t),r[a].totalQuizzes+=1,r[a].correctAnswers+=t.correctAnswers||0;let e=Math.floor(r[a].totalQuizzes/5)+1;r[a].level=e,localStorage.setItem(o.USER,JSON.stringify(r))}}},347:()=>{},881:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>c,n:()=>d});var o=r(5155),a=r(2115),n=r(210),i=r(5431);let l={user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[],loading:!0},s=(0,a.createContext)(void 0);function u(e,t){switch(t.type){case"SET_LOADING":return{...e,loading:t.payload};case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,loading:!1};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[]};case"UPDATE_COINS":if(!e.user)return e;let r=Math.max(0,e.user.coins+t.payload),o={...e.user,coins:r};return(0,n.R1)(o),(0,n.z0)(o.id,r),{...e,user:o};case"START_QUIZ":return{...e,currentQuiz:t.payload};case"END_QUIZ":if(!e.user)return e;let a=t.payload,i={...e.user,totalQuizzes:e.user.totalQuizzes+1,correctAnswers:e.user.correctAnswers+a.correctAnswers},s=Math.floor(i.totalQuizzes/5)+1;return i.level=s,(0,n.Go)(e.user.id,a),(0,n.R1)(i),{...e,user:i,currentQuiz:null,quizHistory:[...e.quizHistory,a]};case"RESET_USER":return{...e,user:l.user};default:return e}}function c(e){let{children:t}=e,[r,c]=(0,a.useReducer)(u,l);return(0,a.useEffect)(()=>{if((0,n.wR)()){let e=(0,n.HW)();e?c({type:"LOGIN_SUCCESS",payload:e}):c({type:"SET_LOADING",payload:!1})}else c({type:"SET_LOADING",payload:!1})},[]),(0,o.jsx)(i.X,{children:(0,o.jsx)(s.Provider,{value:{state:r,dispatch:c},children:t})})}function d(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useApp must be used within a Providers");return e}},5431:(e,t,r)=>{"use strict";r.d(t,{X:()=>l,z:()=>s});var o=r(5155),a=r(2115),n=r(7358);let i=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[s,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("admin_token"),t=localStorage.getItem("admin_username");e&&t?c(e,t):u(!1)},[]);let c=async(e,t)=>{try{(await fetch("".concat(n.env.REACT_APP_BACKEND_URL,"/api/admin/verify"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})).ok?l({username:t,token:e}):(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"))}catch(e){console.error("Token verification failed:",e),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username")}finally{u(!1)}},d=async(e,t)=>{try{let r=await fetch("".concat(n.env.REACT_APP_BACKEND_URL,"/api/admin/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(r.ok){let t=(await r.json()).access_token;return localStorage.setItem("admin_token",t),localStorage.setItem("admin_username",e),l({username:e,token:t}),!0}return!1}catch(e){return console.error("Login failed:",e),!1}};return(0,o.jsx)(i.Provider,{value:{adminUser:r,isAuthenticated:!!r,login:d,logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),l(null)},loading:s},children:t})}let s=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},8018:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},8497:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,8018,23)),Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,881))}},e=>{e.O(0,[210,441,964,358],()=>e(e.s=8497)),_N_E=e.O()}]);