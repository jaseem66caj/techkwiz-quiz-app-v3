(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5263:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(5155),o=s(2115),a=s(5695),n=s(3463),i=s(881),l=s(3825),c=s(263);function d(e){let{onComplete:t,onSkip:s}=e,{dispatch:a}=(0,i.n)(),[l,c]=(0,o.useState)(0),[d,u]=(0,o.useState)(null),[m,x]=(0,o.useState)(0),[h,b]=(0,o.useState)(!1),[g,p]=(0,o.useState)(!1),w=[{id:"onboard-1",question:"Which tech company created the iPhone?",options:["Apple \uD83C\uDF4E","Google \uD83D\uDD0D","Samsung \uD83D\uDCF1","Microsoft \uD83D\uDCBB"],correct_answer:0,reward_coins:150},{id:"onboard-2",question:"What does 'www' stand for in website URLs?",options:["World Wide Web \uD83C\uDF10","World Web Works \uD83D\uDD27","Web World Wide \uD83C\uDF0D","Wide Web World \uD83D\uDCE1"],correct_answer:0,reward_coins:150}];if(g)return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)(n.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-green-800/90 to-emerald-900/90 backdrop-blur-md rounded-2xl p-8 max-w-md mx-auto border border-green-400/30 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:"Awesome!"}),(0,r.jsxs)("p",{className:"text-green-100 mb-4",children:["You've earned ",(0,r.jsx)("span",{className:"text-yellow-400 font-bold text-2xl",children:m})," coins!"]}),(0,r.jsx)("div",{className:"bg-green-500/20 backdrop-blur-sm rounded-xl p-4 border border-green-400/30",children:(0,r.jsx)("p",{className:"text-green-200 text-sm",children:"Ready to test your knowledge on more challenging quizzes?"})})]})});if(h){let e=d===w[l].correct_answer,t=e?w[l].reward_coins:75;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)(n.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"".concat(e?"bg-gradient-to-br from-purple-800/90 to-pink-900/90":"bg-gradient-to-br from-orange-800/90 to-red-900/90"," backdrop-blur-md rounded-2xl p-8 max-w-md mx-auto border ").concat(e?"border-purple-400/30":"border-orange-400/30"," text-center"),children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:e?"\uD83C\uDFAF":"\uD83D\uDCAA"}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:e?"Super!":"Good try!"}),(0,r.jsxs)("p",{className:"text-white mb-4",children:["You won ",(0,r.jsx)("span",{className:"text-yellow-400 font-bold text-2xl",children:t})," coins"]}),(0,r.jsx)("div",{className:"".concat(e?"bg-purple-500/20":"bg-orange-500/20"," backdrop-blur-sm rounded-xl p-4 border ").concat(e?"border-purple-400/30":"border-orange-400/30"),children:(0,r.jsx)("p",{className:"text-white text-sm",children:e?"Correct! Well done!":"Don't worry, you still earned coins!"})})]})})}return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-900/95 to-purple-900/95 backdrop-blur-md rounded-2xl p-8 max-w-lg mx-auto border border-blue-400/30",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Let's get started! \uD83D\uDE80"}),(0,r.jsxs)("p",{className:"text-yellow-300 text-lg font-medium mb-4",children:["Answer 2 simple questions to get ",(0,r.jsx)("span",{className:"text-yellow-400 font-bold",children:"300 coins"})," now"]}),(0,r.jsx)("div",{className:"bg-blue-500/20 backdrop-blur-sm rounded-full px-6 py-3 inline-block border border-blue-400/30 mb-6",children:(0,r.jsxs)("span",{className:"text-white font-bold text-lg",children:[l+1,"/2 - Question"]})})]}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white mb-6 text-center leading-relaxed",children:w[l].question}),(0,r.jsx)("div",{className:"space-y-3",children:w[l].options.map((e,s)=>(0,r.jsx)(n.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{null===d&&(u(s),setTimeout(()=>{let e=w[l],r=s===e.correct_answer?e.reward_coins:75;a({type:"UPDATE_COINS",payload:r}),x(e=>e+r),b(!0),setTimeout(()=>{b(!1),l<w.length-1?(c(l+1),u(null)):(p(!0),setTimeout(()=>{t(m+r)},2e3))},2e3)},1e3))},disabled:null!==d,className:"w-full p-4 rounded-xl text-left font-medium transition-all duration-300 border-2 ".concat(d===s?"bg-purple-500 text-white border-purple-400 shadow-lg shadow-purple-500/30":"bg-gray-700/50 text-white border-gray-600 hover:bg-gray-600/50 hover:border-purple-400/50"," ").concat(null!==d?"cursor-not-allowed":"cursor-pointer"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-lg",children:e}),(0,r.jsx)("span",{className:"text-2xl",children:d===s?"✅":"\uD83D\uDC46"})]})},s))})]},l),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors duration-200 text-sm underline",children:"Skip onboarding"})})]})})}var u=s(7062),m=s(8587),x=s(1595),h=s(2484),b=s(2302);function g(){var e,t;let{state:s,dispatch:g}=(0,i.n)(),p=(0,a.useRouter)(),[w,f]=(0,o.useState)(!1),[j,y]=(0,o.useState)(!1),[N,v]=(0,o.useState)(!1),[_,k]=(0,o.useState)(!1),{awardCoins:S,getCurrentMultiplier:D}=(0,h.d)(),[z,C]=(0,o.useState)(0),[P,q]=(0,o.useState)(null),[A,E]=(0,o.useState)(0),[W,T]=(0,o.useState)(!1),[I,O]=(0,o.useState)(!1),[H,F]=(0,o.useState)(!1),[G,Q]=(0,o.useState)(!1),[R,Y]=(0,o.useState)(0),[L,U]=(0,o.useState)(null),{disablePrevention:K}=(0,x.K)({isActive:!w&&!j&&!I&&!W,onExitAttempt:()=>{k(!0)},customMessage:"Are you sure you want to leave? Your progress will be lost!"});(0,o.useEffect)(()=>{var e;console.log("\uD83D\uDD27 HomePage: Onboarding state -",{showOnboarding:w,onboardingCompleted:j,onboardingSkipped:N,userCoins:null==(e=s.user)?void 0:e.coins})},[w,j,N,null==(e=s.user)?void 0:e.coins]),(0,o.useEffect)(()=>{console.log("\uD83D\uDD27 HomePage: showRewardPopup state changed to:",H)},[H]),(0,o.useEffect)(()=>{setTimeout(async()=>{try{let e=await (0,b.cQ)("/api/quiz/rewarded-config");U(e),console.log("✅ HomePage: Reward config loaded successfully:",e)}catch(e){console.error("❌ HomePage: Failed to fetch reward config:",e),U({coin_reward:100,is_active:!0,show_on_insufficient_coins:!0,show_during_quiz:!0})}},1e3)},[]),(0,o.useEffect)(()=>{if(!s.isAuthenticated&&!s.loading)if(localStorage.getItem("techkwiz_onboarding_completed")){console.log("\uD83D\uDD04 Returning user - creating guest user and skipping onboarding");let e={id:"guest_".concat(Date.now()),name:"Guest User",email:"guest_".concat(Date.now(),"@techkwiz.com"),coins:0,level:1,totalQuizzes:0,correctAnswers:0,joinDate:new Date().toISOString(),quizHistory:[],achievements:[]};localStorage.setItem("techkwiz_auth","dummy_token_"+e.id);let t=JSON.parse(localStorage.getItem("techkwiz_user")||"[]");t.push(e),localStorage.setItem("techkwiz_user",JSON.stringify(t)),g({type:"LOGIN_SUCCESS",payload:e}),v(!0)}else console.log("\uD83C\uDFAF New user detected - showing onboarding flow"),f(!0)},[s.isAuthenticated,s.loading,g]);let B=[{id:"quick-0",question:"Your vibe check: Pick your aesthetic",options:["Dark Academia ☕\uD83D\uDCDA","Soft Girl \uD83C\uDF38✨","Y2K Cyber \uD83D\uDCBF\uD83D\uDD2E","Cottagecore \uD83C\uDF44\uD83C\uDF3F"],correct_answer:-1,difficulty:"beginner",question_type:"this_or_that",fun_fact:"Your aesthetic choice reflects your inner personality and how you want to be perceived by others!",category:"swipe-personality",subcategory:"Aesthetic"},{id:"quick-1",question:"Decode this viral trend: \uD83D\uDC83\uD83D\uDD25\uD83C\uDFB5",options:["Buss It Challenge","Renegade Dance","WAP Dance","Savage Challenge"],correct_answer:0,difficulty:"beginner",question_type:"emoji_decode",fun_fact:"The Buss It Challenge went viral during the pandemic, with millions participating worldwide!",category:"pop-culture-flash",subcategory:"TikTok"}],J=()=>{F(!1),z<B.length-1?(C(z+1),q(null)):(O(!0),T(!0),setTimeout(()=>{p.push("/start")},3e3))};return s.loading?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[(0,r.jsx)("nav",{className:"bg-gray-800/90 backdrop-blur-sm border-b border-white/10 sticky top-0 z-50",children:(0,r.jsx)("div",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"text-xl font-bold text-white",children:[(0,r.jsx)("span",{className:"text-orange-400",children:"Tech"}),"Kwiz"]})})})}),(0,r.jsx)("main",{className:"flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"glass-effect p-8 rounded-2xl text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-white",children:"Loading TechKwiz..."})]})})]}):w?(0,r.jsx)(d,{onComplete:e=>{console.log("\uD83C\uDF89 Onboarding completed! Earned ".concat(e," coins"));let t={id:"guest_".concat(Date.now()),name:"Guest User",email:"guest_".concat(Date.now(),"@techkwiz.com"),coins:e,level:1,totalQuizzes:0,correctAnswers:0,joinDate:new Date().toISOString(),quizHistory:[],achievements:[]};localStorage.setItem("techkwiz_auth","dummy_token_"+t.id);let s=JSON.parse(localStorage.getItem("techkwiz_user")||"[]");s.push(t),localStorage.setItem("techkwiz_user",JSON.stringify(s)),g({type:"LOGIN_SUCCESS",payload:t}),y(!0),f(!1),localStorage.setItem("techkwiz_onboarding_completed","true"),setTimeout(()=>{y(!0)},500)},onSkip:()=>{console.log("⏭️ Onboarding skipped"),v(!0),f(!1),localStorage.setItem("techkwiz_onboarding_completed","true")}}):W&&I?(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[(0,r.jsx)("nav",{className:"bg-gray-800/90 backdrop-blur-sm border-b border-white/10 sticky top-0 z-50",children:(0,r.jsx)("div",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"text-xl font-bold text-white",children:[(0,r.jsx)("span",{className:"text-orange-400",children:"Tech"}),"Kwiz"]})})})}),(0,r.jsx)("main",{className:"flex-1 flex items-center justify-center p-4",children:(0,r.jsxs)(n.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"glass-effect p-8 rounded-2xl text-center max-w-md",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Quiz Completed!"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"bg-green-500/20 backdrop-blur-sm rounded-xl p-4 border border-green-400/30",children:[(0,r.jsx)("p",{className:"text-green-300 text-sm font-medium",children:"Score"}),(0,r.jsxs)("p",{className:"text-white text-2xl font-bold",children:[A,"/",B.length]})]}),(0,r.jsxs)("div",{className:"bg-orange-500/20 backdrop-blur-sm rounded-xl p-4 border border-orange-400/30",children:[(0,r.jsx)("p",{className:"text-orange-300 text-sm font-medium",children:"Coins Earned"}),(0,r.jsx)("p",{className:"text-white text-2xl font-bold",children:100*A})]})]}),(0,r.jsx)("p",{className:"text-blue-200 text-sm mt-6",children:"Redirecting to categories..."})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[(0,r.jsx)("nav",{className:"bg-gray-800/90 backdrop-blur-sm border-b border-white/10 sticky top-0 z-50",children:(0,r.jsx)("div",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"text-xl font-bold text-white",children:[(0,r.jsx)("span",{className:"text-orange-400",children:"Tech"}),"Kwiz"]})})})}),(0,r.jsxs)("main",{className:"flex-1 p-4 flex flex-col items-center justify-center",children:[(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-6",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:["\uD83C\uDF89 Welcome to ",(0,r.jsx)("span",{className:"text-orange-400",children:"Youth Quiz Hub!"})]}),(0,r.jsx)("p",{className:"text-blue-200 text-base mb-2",children:"Level up with interactive quizzes designed for Gen Z!"}),j&&(0,r.jsx)("div",{className:"bg-green-500/20 backdrop-blur-sm rounded-xl p-3 border border-green-400/30 inline-block",children:(0,r.jsxs)("p",{className:"text-green-200 text-sm",children:["\uD83D\uDE80 Great job! You're all set with ",(0,r.jsxs)("span",{className:"text-yellow-400 font-bold",children:[(null==(t=s.user)?void 0:t.coins)||0," coins"]}),"!"]})})]}),(0,r.jsx)("div",{className:"w-full max-w-md",children:(0,r.jsx)(l.H,{question:B[z],selectedAnswer:P,onAnswerSelect:e=>{console.log("\uD83D\uDD27 HomePage: handleAnswerSelect called with answerIndex:",e,"currentQuestion:",z,"selectedAnswer:",P),null===P&&(q(e),setTimeout(()=>{console.log("\uD83D\uDD27 HomePage: Processing answer after timeout...");let t=e===B[z].correct_answer,s=-1===B[z].correct_answer,r=s||t;if(console.log("\uD83D\uDD27 HomePage: Answer processed - isCorrect:",r),Q(r),r){E(A+1);let e=S(100,"quiz");Y(e),console.log("✅ ".concat(s?"Great choice":"Correct answer","! Earned ").concat(e," coins"))}else Y(0),console.log("❌ Wrong answer, no coins earned");let o=(null==L?void 0:L.trigger_after_questions)||1,a=(null==L?void 0:L.is_active)&&(null==L?void 0:L.show_during_quiz)&&(z+1)%o==0;if(console.log("\uD83D\uDD27 HomePage: Popup trigger check - currentQuestion:",z,"triggerAfterQuestions:",o,"shouldShowPopup:",a,"is_active:",null==L?void 0:L.is_active,"show_during_quiz:",null==L?void 0:L.show_during_quiz),a){console.log("\uD83D\uDD27 HomePage: Triggering reward popup after",o,"questions"),F(!0);return}z<B.length-1?(C(z+1),q(null)):(O(!0),T(!0),setTimeout(()=>{p.push("/start")},3e3))},1e3))},questionAnswered:null!==P,questionNumber:z+1,totalQuestions:B.length,showProgress:!0,encouragementMessages:!0})}),(0,r.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-8",children:(0,r.jsx)(m.S,{position:"bottom",variant:"detailed",showLive:!0})}),(0,r.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-8 text-center",children:(0,r.jsxs)("div",{className:"bg-gray-800/30 backdrop-blur-sm p-4 rounded-xl border border-white/10",children:[(0,r.jsxs)("p",{className:"text-blue-200 text-sm mb-2",children:["\uD83D\uDE80 ",(0,r.jsx)("strong",{children:"What's Next:"})]}),(0,r.jsxs)("div",{className:"text-xs text-blue-200 space-y-1",children:[(0,r.jsx)("div",{children:"\uD83D\uDCB0 Earn more coins in category quizzes (20-45 coins entry)"}),(0,r.jsx)("div",{children:"\uD83C\uDFC6 Get 50 coins per correct answer"}),(0,r.jsx)("div",{children:"\uD83C\uDFAF Challenge yourself with timer-based questions"}),(0,r.jsx)("div",{children:"\uD83D\uDCFA Watch ads to earn bonus coins"})]})]})})]})]}),(0,r.jsx)(c._,{isOpen:H,onClose:J,coinsEarned:R,onClaimReward:()=>{console.log("\uD83D\uDCFA Ad watched! Earned ".concat(100," coins")),g({type:"UPDATE_COINS",payload:100})},onSkipReward:J,isCorrect:G,rewardCoins:100}),(0,r.jsx)(u.B,{isOpen:_,onConfirm:()=>{k(!1),K(),p.push("/start")},onCancel:()=>{k(!1)},currentProgress:{questionNumber:z+1,totalQuestions:B.length,coinsAtRisk:100*A}})]})}},6535:(e,t,s)=>{Promise.resolve().then(s.bind(s,5263))}},e=>{e.O(0,[463,401,585,263,441,964,358],()=>e(e.s=6535)),_N_E=e.O()}]);