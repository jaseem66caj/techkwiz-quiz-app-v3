(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{210:(e,t,r)=>{"use strict";r.d(t,{$5:()=>o,Go:()=>_,HW:()=>u,R1:()=>c,iD:()=>i,ri:()=>n,wR:()=>a,z0:()=>S});let s={USER:"techkwiz_user",AUTH_TOKEN:"techkwiz_auth"},l=(e,t)=>({id:"user_"+Math.random().toString(36).substr(2,9),email:e.toLowerCase(),name:e.split("@")[0].replace(/[^a-zA-Z0-9]/g," ").trim()||"Tech Enthusiast",coins:500,level:1,totalQuizzes:0,correctAnswers:0,joinDate:new Date().toISOString(),quizHistory:[]}),i=(e,t)=>{let r=d(e);if(r)return localStorage.setItem(s.AUTH_TOKEN,"dummy_token_"+r.id),r;{let r=l(e,t);return c(r),localStorage.setItem(s.AUTH_TOKEN,"dummy_token_"+r.id),r}},o=(e,t,r)=>{let i=l(e,t);return r&&(i.name=r),c(i),localStorage.setItem(s.AUTH_TOKEN,"dummy_token_"+i.id),i},n=()=>{localStorage.removeItem(s.AUTH_TOKEN)},a=()=>!!localStorage.getItem(s.AUTH_TOKEN),u=()=>{let e=localStorage.getItem(s.AUTH_TOKEN);if(!e)return null;let t=e.replace("dummy_token_","");return m().find(e=>e.id===t)||null},c=e=>{let t=m(),r=t.findIndex(t=>t.id===e.id||t.email===e.email);r>=0?t[r]=e:t.push(e),localStorage.setItem(s.USER,JSON.stringify(t))},d=e=>m().find(t=>t.email===e.toLowerCase())||null,m=()=>{try{let e=localStorage.getItem(s.USER);return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing stored users:",e),[]}},S=(e,t)=>{let r=m(),l=r.findIndex(t=>t.id===e);l>=0&&(r[l].coins=t,localStorage.setItem(s.USER,JSON.stringify(r)))},_=(e,t)=>{let r=m(),l=r.findIndex(t=>t.id===e);if(l>=0){r[l].quizHistory.push(t),r[l].totalQuizzes+=1,r[l].correctAnswers+=t.correctAnswers||0;let e=Math.floor(r[l].totalQuizzes/5)+1;r[l].level=e,localStorage.setItem(s.USER,JSON.stringify(r))}}},347:()=>{},881:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>u,n:()=>c});var s=r(5155),l=r(2115),i=r(210);let o={user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[],loading:!0},n=(0,l.createContext)(void 0);function a(e,t){switch(t.type){case"SET_LOADING":return{...e,loading:t.payload};case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,loading:!1};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[]};case"UPDATE_COINS":if(!e.user)return e;let r=Math.max(0,e.user.coins+t.payload),s={...e.user,coins:r};return(0,i.R1)(s),(0,i.z0)(s.id,r),{...e,user:s};case"START_QUIZ":return{...e,currentQuiz:t.payload};case"END_QUIZ":if(!e.user)return e;let l=t.payload,n={...e.user,totalQuizzes:e.user.totalQuizzes+1,correctAnswers:e.user.correctAnswers+l.correctAnswers},a=Math.floor(n.totalQuizzes/5)+1;return n.level=a,(0,i.Go)(e.user.id,l),(0,i.R1)(n),{...e,user:n,currentQuiz:null,quizHistory:[...e.quizHistory,l]};case"RESET_USER":return{...e,user:o.user};default:return e}}function u(e){let{children:t}=e,[r,u]=(0,l.useReducer)(a,o);return(0,l.useEffect)(()=>{if((0,i.wR)()){let e=(0,i.HW)();e?u({type:"LOGIN_SUCCESS",payload:e}):u({type:"SET_LOADING",payload:!1})}else u({type:"SET_LOADING",payload:!1})},[]),(0,s.jsx)(n.Provider,{value:{state:r,dispatch:u},children:t})}function c(){let e=(0,l.useContext)(n);if(void 0===e)throw Error("useApp must be used within a Providers");return e}},8018:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},8497:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,8018,23)),Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,881))}},e=>{e.O(0,[210,441,964,358],()=>e(e.s=8497)),_N_E=e.O()}]);