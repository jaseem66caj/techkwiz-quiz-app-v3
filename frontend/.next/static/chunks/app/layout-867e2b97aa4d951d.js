(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{210:(e,t,r)=>{"use strict";r.d(t,{$5:()=>a,Go:()=>_,HW:()=>l,R1:()=>u,iD:()=>n,ri:()=>i,z0:()=>m});let s={USER:"techkwiz_user",AUTH_TOKEN:"techkwiz_auth",SESSION_COINS:"techkwiz_session_coins"},o=(e,t)=>({id:"user_"+Math.random().toString(36).substr(2,9),email:e.toLowerCase(),name:e.split("@")[0].replace(/[^a-zA-Z0-9]/g," ").trim()||"Tech Enthusiast",coins:0,level:1,totalQuizzes:0,correctAnswers:0,joinDate:new Date().toISOString(),quizHistory:[]}),n=(e,t)=>{let r=d(e);if(r)return localStorage.setItem(s.AUTH_TOKEN,"dummy_token_"+r.id),r;{let r=o(e,t);return u(r),localStorage.setItem(s.AUTH_TOKEN,"dummy_token_"+r.id),r}},a=(e,t,r)=>{let n=o(e,t);return r&&(n.name=r),u(n),localStorage.setItem(s.AUTH_TOKEN,"dummy_token_"+n.id),n},i=()=>{localStorage.removeItem(s.AUTH_TOKEN)},c=(e,t)=>{try{let r=sessionStorage.getItem(s.SESSION_COINS),o=r?JSON.parse(r):{};o[e]=Math.max(0,t),sessionStorage.setItem(s.SESSION_COINS,JSON.stringify(o)),console.log("\uD83D\uDCB0 Session coins updated for ".concat(e,": ").concat(t))}catch(e){console.error("Error setting session coins:",e)}},l=()=>{let e=localStorage.getItem(s.AUTH_TOKEN);if(!e)return null;let t=e.replace("dummy_token_",""),r=S().find(e=>e.id===t);return r&&(r.coins=(e=>{try{let t=sessionStorage.getItem(s.SESSION_COINS);if(!t)return 0;return JSON.parse(t)[e]||0}catch(e){return console.error("Error getting session coins:",e),0}})(t)),r||null},u=e=>{let t=S(),r=t.findIndex(t=>t.id===e.id||t.email===e.email);c(e.id,e.coins);let o={...e,coins:0};r>=0?t[r]=o:t.push(o),localStorage.setItem(s.USER,JSON.stringify(t))},d=e=>S().find(t=>t.email===e.toLowerCase())||null,S=()=>{try{let e=localStorage.getItem(s.USER);return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing stored users:",e),[]}},m=(e,t)=>{c(e,t)},_=(e,t)=>{let r=S(),o=r.findIndex(t=>t.id===e);if(o>=0){r[o].quizHistory.push(t),r[o].totalQuizzes+=1,r[o].correctAnswers+=t.correctAnswers||0;let e=Math.floor(r[o].totalQuizzes/5)+1;r[o].level=e,localStorage.setItem(s.USER,JSON.stringify(r))}}},347:()=>{},881:(e,t,r)=>{"use strict";r.d(t,{b:()=>l,n:()=>u});var s=r(5155),o=r(2115),n=r(210);let a={user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[],loading:!0},i=(0,o.createContext)(void 0);function c(e,t){switch(t.type){case"SET_LOADING":return{...e,loading:t.payload};case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,loading:!1};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[]};case"UPDATE_COINS":if(!e.user)return e;let r=e.user.coins,s=r+t.payload;s=Math.min(500,s=Math.max(0,s));let o={...e.user,coins:s};return(0,n.R1)(o),(0,n.z0)(o.id,s),console.log("\uD83D\uDCB0 COINS UPDATE: ".concat(r," + ").concat(t.payload," = ").concat(s)),{...e,user:o};case"START_QUIZ":return{...e,currentQuiz:t.payload};case"END_QUIZ":if(!e.user)return e;let i=t.payload,c={...e.user,totalQuizzes:e.user.totalQuizzes+1,correctAnswers:e.user.correctAnswers+i.correctAnswers},l=i.coinsEarned||0;c.coins=e.user.coins+l,console.log("\uD83C\uDF89 Quiz completed! Earned ".concat(l," coins (").concat(i.correctAnswers," correct \xd7 50)"));let u=Math.floor(c.totalQuizzes/5)+1;return c.level=u,(0,n.Go)(e.user.id,i),(0,n.R1)(c),(0,n.z0)(c.id,c.coins),{...e,user:c,currentQuiz:null,quizHistory:[...e.quizHistory,i]};case"RESET_USER":return{...e,user:a.user};default:return e}}function l(e){let{children:t}=e,[r,l]=(0,o.useReducer)(c,a);return(0,o.useEffect)(()=>{(async()=>{console.log("\uD83D\uDE80 Initializing auth with session-based coins...");let e=(0,n.HW)();e?(console.log("\uD83D\uDC64 Found user: ".concat(e.name," with ").concat(e.coins," session coins")),l({type:"LOGIN_SUCCESS",payload:e})):console.log("\uD83D\uDC64 No authenticated user found"),l({type:"SET_LOADING",payload:!1})})()},[]),(0,s.jsx)(i.Provider,{value:{state:r,dispatch:l},children:t})}function u(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useApp must be used within a Providers");return e}},6903:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),o=r(2115),n=r(8346),a=r.n(n),i=r(881);function c(e){let{children:t}=e;return(0,o.useEffect)(()=>{console.log("\uD83D\uDD27 Global coins system enforcement activated"),["techkwiz_user","techkwiz_token","USER","AUTH_TOKEN","users","user_data","quiz_data","app_data","coins"].forEach(e=>{try{localStorage.removeItem(e)}catch(e){}}),console.log("âœ… Global coin data cleared on page load")},[]),(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:a().className,children:(0,s.jsx)(i.b,{children:t})})})}r(347)},8346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},9886:(e,t,r)=>{Promise.resolve().then(r.bind(r,6903))}},e=>{e.O(0,[838,441,964,358],()=>e(e.s=9886)),_N_E=e.O()}]);