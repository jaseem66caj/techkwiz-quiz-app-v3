(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{2302:(e,t,o)=>{"use strict";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.startsWith("http")?e:"".concat("").concat(e.startsWith("/")?"":"/").concat(e),r={method:"GET",headers:{"Content-Type":"application/json",...t.headers},signal:AbortSignal.timeout(1e4),...t};console.log("\uD83C\uDF10 API Request: ".concat(t.method||"GET"," ").concat(o));try{let e=await fetch(o,r);if(!e.ok)throw console.error("❌ API Error: ".concat(e.status," ").concat(e.statusText)),Error("HTTP ".concat(e.status,": ").concat(e.statusText));return console.log("✅ API Success: ".concat(t.method||"GET"," ").concat(o)),e}catch(e){throw console.error("❌ API Request Failed: ".concat(o),e),e}}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await r(e,t)).json()}o.d(t,{AT:()=>r,cQ:()=>a})},4221:(e,t,o)=>{Promise.resolve().then(o.bind(o,7220))},5431:(e,t,o)=>{"use strict";o.d(t,{X:()=>i,z:()=>l});var r=o(5155),a=o(2115),n=o(2302);let s=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[o,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=localStorage.getItem("admin_token"),t=localStorage.getItem("admin_username");e&&t?(console.log("\uD83D\uDD04 Found stored credentials, setting admin user immediately"),i({username:t,token:e}),d(e,t).catch(console.error)):c(!1)},[]);let d=async(e,t)=>{try{console.log("\uD83D\uDD10 Verifying admin token for:",t),(await (0,n.AT)("/api/admin/verify",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})).ok?console.log("✅ Admin token verified successfully"):(console.log("❌ Admin token verification failed"),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),i(null)),c(!1)}catch(e){console.error("❌ Admin token verification error:",e),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),i(null),c(!1)}},u=async(e,t)=>{try{console.log("\uD83D\uDD0D Admin login attempt:",e);let o=(await (0,n.cQ)("/api/admin/login",{method:"POST",body:JSON.stringify({username:e,password:t})})).access_token;return console.log("✅ Admin login successful, token received"),localStorage.setItem("admin_token",o),localStorage.setItem("admin_username",e),i({username:e,token:o}),!0}catch(e){return console.error("❌ Admin login error:",e),!1}};return(0,r.jsx)(s.Provider,{value:{adminUser:o,isAuthenticated:!!o,login:u,logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),i(null)},loading:l},children:t})}let l=()=>{let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},7220:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c});var r=o(5155),a=o(2115),n=o(5431),s=o(3463),i=o(6874),l=o.n(i);function c(){let{login:e,isAuthenticated:t}=(0,n.z)(),[o,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)("");if(t)return window.location.href="/admin/dashboard",null;let p=async t=>{t.preventDefault(),m(!0),g("");try{await e(o,c)?window.location.href="/admin/dashboard":g("Invalid credentials. Please try again.")}catch(e){g("Login failed. Please check your connection.")}finally{m(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"TechKwiz Admin"}),(0,r.jsx)("p",{className:"text-blue-200",children:"Sign in to manage your quiz platform"})]}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-white mb-2",children:"Username"}),(0,r.jsx)("input",{type:"text",id:"username",value:o,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Enter your username",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-white mb-2",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"password",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Enter your password",required:!0})]}),h&&(0,r.jsx)(s.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-red-500/20 border border-red-400/50 rounded-lg p-3 text-red-200 text-sm",children:h}),(0,r.jsx)(s.P.button,{type:"submit",disabled:u,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign In"})]}),(0,r.jsxs)("div",{className:"mt-8 pt-6 border-t border-white/20",children:[(0,r.jsx)("p",{className:"text-center text-sm text-blue-200 mb-4",children:(0,r.jsx)(l(),{href:"/admin/forgot-password",className:"hover:text-white transition-colors underline",children:"Forgot your password?"})}),(0,r.jsx)("p",{className:"text-center text-sm text-blue-200",children:"Need help? Contact your administrator"})]})]})})}}},e=>{e.O(0,[463,874,441,964,358],()=>e(e.s=4221)),_N_E=e.O()}]);