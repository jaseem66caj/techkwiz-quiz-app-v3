(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{4221:(e,t,o)=>{Promise.resolve().then(o.bind(o,7220))},5431:(e,t,o)=>{"use strict";o.d(t,{X:()=>s,z:()=>i});var r=o(5155),a=o(2115);let n=(0,a.createContext)(void 0);function s(e){let{children:t}=e,[o,s]=(0,a.useState)(null),[i,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=localStorage.getItem("admin_token"),t=localStorage.getItem("admin_username");e&&t?(console.log("\uD83D\uDD04 Found stored credentials, setting admin user immediately"),s({username:t,token:e}),c(e,t).catch(console.error)):l(!1)},[]);let c=async(e,t)=>{try{console.log("\uD83D\uDD10 Verifying token for:",t);let o="https://a7600ffa-234c-454b-9044-5bce3717794f.preview.emergentagent.com";console.log("\uD83C\uDF10 Using backend URL for verification:",o);let r=await fetch("".concat(o,"/api/admin/verify"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("\uD83D\uDD0D Verify response status:",r.status),r.ok){let o=await r.json();console.log("✅ Token verified successfully:",o),s({username:t,token:e})}else console.log("❌ Token verification failed, clearing storage"),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),s(null)}catch(e){console.error("❌ Token verification error:",e),console.log("⚠️ Network error during verification, keeping token for now")}finally{l(!1)}},d=async(e,t)=>{try{console.log("\uD83D\uDD0D Admin login attempt:",e);let o="https://a7600ffa-234c-454b-9044-5bce3717794f.preview.emergentagent.com";console.log("\uD83C\uDF10 Using backend URL:",o);let r=await fetch("".concat(o,"/api/admin/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(console.log("\uD83D\uDCE1 Login response status:",r.status),r.ok){let t=(await r.json()).access_token;return console.log("✅ Login successful, token received"),localStorage.setItem("admin_token",t),localStorage.setItem("admin_username",e),s({username:e,token:t}),!0}{let e=await r.json().catch(()=>({}));console.error("❌ Login failed:",r.status,e)}return!1}catch(e){return console.error("❌ Login error:",e),!1}};return(0,r.jsx)(n.Provider,{value:{adminUser:o,isAuthenticated:!!o,login:d,logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),s(null)},loading:i},children:t})}let i=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},7220:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c});var r=o(5155),a=o(2115),n=o(5431),s=o(3463),i=o(6874),l=o.n(i);function c(){let{login:e,isAuthenticated:t}=(0,n.z)(),[o,i]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)("");if(t)return window.location.href="/admin/dashboard",null;let f=async t=>{t.preventDefault(),m(!0),g("");try{await e(o,c)?window.location.href="/admin/dashboard":g("Invalid credentials. Please try again.")}catch(e){g("Login failed. Please check your connection.")}finally{m(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,r.jsxs)(s.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"TechKwiz Admin"}),(0,r.jsx)("p",{className:"text-blue-200",children:"Sign in to manage your quiz platform"})]}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-white mb-2",children:"Username"}),(0,r.jsx)("input",{type:"text",id:"username",value:o,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Enter your username",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-white mb-2",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"password",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Enter your password",required:!0})]}),h&&(0,r.jsx)(s.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-red-500/20 border border-red-400/50 rounded-lg p-3 text-red-200 text-sm",children:h}),(0,r.jsx)(s.P.button,{type:"submit",disabled:u,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign In"})]}),(0,r.jsxs)("div",{className:"mt-8 pt-6 border-t border-white/20",children:[(0,r.jsx)("p",{className:"text-center text-sm text-blue-200 mb-4",children:(0,r.jsx)(l(),{href:"/admin/forgot-password",className:"hover:text-white transition-colors underline",children:"Forgot your password?"})}),(0,r.jsx)("p",{className:"text-center text-sm text-blue-200",children:"Need help? Contact your administrator"})]})]})})}}},e=>{e.O(0,[463,874,441,964,358],()=>e(e.s=4221)),_N_E=e.O()}]);