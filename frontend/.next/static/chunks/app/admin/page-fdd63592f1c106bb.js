(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{4221:(e,t,r)=>{Promise.resolve().then(r.bind(r,7220))},5431:(e,t,r)=>{"use strict";r.d(t,{X:()=>s,z:()=>i});var a=r(5155),o=r(2115);let n=(0,o.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,o.useState)(null),[i,l]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=localStorage.getItem("admin_token"),t=localStorage.getItem("admin_username");e&&t&&d(e,t).catch(console.error),l(!1)},[]);let d=async(e,t)=>{try{(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/verify"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})).ok?s({username:t,token:e}):(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"))}catch(e){console.error("Token verification failed:",e),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username")}finally{l(!1)}},c=async(e,t)=>{try{console.log("\uD83D\uDD0D Admin login attempt:",e);let r="https://status-monitor-4.preview.emergentagent.com";console.log("\uD83C\uDF10 Using backend URL:",r);let a=await fetch("".concat(r,"/api/admin/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(console.log("\uD83D\uDCE1 Login response status:",a.status),a.ok){let t=(await a.json()).access_token;return console.log("✅ Login successful, token received"),localStorage.setItem("admin_token",t),localStorage.setItem("admin_username",e),s({username:e,token:t}),!0}{let e=await a.json().catch(()=>({}));console.error("❌ Login failed:",a.status,e)}return!1}catch(e){return console.error("❌ Login error:",e),!1}};return(0,a.jsx)(n.Provider,{value:{adminUser:r,isAuthenticated:!!r,login:c,logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),s(null)},loading:i},children:t})}let i=()=>{let e=(0,o.useContext)(n);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},7220:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),o=r(2115),n=r(5431),s=r(3463),i=r(6874),l=r.n(i);function d(){let{login:e,isAuthenticated:t}=(0,n.z)(),[r,i]=(0,o.useState)(""),[d,c]=(0,o.useState)(""),[m,u]=(0,o.useState)(!1),[h,p]=(0,o.useState)("");if(t)return window.location.href="/admin/dashboard",null;let g=async t=>{t.preventDefault(),u(!0),p("");try{await e(r,d)?window.location.href="/admin/dashboard":p("Invalid credentials. Please try again.")}catch(e){p("Login failed. Please check your connection.")}finally{u(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,a.jsxs)(s.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"TechKwiz Admin"}),(0,a.jsx)("p",{className:"text-blue-200",children:"Sign in to manage your quiz platform"})]}),(0,a.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-white mb-2",children:"Username"}),(0,a.jsx)("input",{type:"text",id:"username",value:r,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Enter your username",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-white mb-2",children:"Password"}),(0,a.jsx)("input",{type:"password",id:"password",value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Enter your password",required:!0})]}),h&&(0,a.jsx)(s.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-red-500/20 border border-red-400/50 rounded-lg p-3 text-red-200 text-sm",children:h}),(0,a.jsx)(s.P.button,{type:"submit",disabled:m,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:m?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign In"})]}),(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-white/20",children:[(0,a.jsx)("p",{className:"text-center text-sm text-blue-200 mb-4",children:(0,a.jsx)(l(),{href:"/admin/forgot-password",className:"hover:text-white transition-colors underline",children:"Forgot your password?"})}),(0,a.jsx)("p",{className:"text-center text-sm text-blue-200",children:"Need help? Contact your administrator"})]})]})})}}},e=>{e.O(0,[463,874,441,964,358],()=>e(e.s=4221)),_N_E=e.O()}]);