(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{2199:(e,t,s)=>{Promise.resolve().then(s.bind(s,6810))},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},6810:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(5155),a=s(2115),i=s(3463),l=s(6874),n=s.n(l),o=s(5695),d=s(7358);function c(){let e=(0,o.useSearchParams)(),[t,s]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[m,w]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),[x,f]=(0,a.useState)("");(0,a.useEffect)(()=>{let t=e.get("token");t?s(t):f("Invalid reset link. Please request a new password reset.")},[e]);let g=async e=>{if(e.preventDefault(),w(!0),f(""),l!==u){f("Passwords do not match"),w(!1);return}if(l.length<8){f("Password must be at least 8 characters long"),w(!1);return}try{let e=await fetch("".concat(d.env.REACT_APP_BACKEND_URL,"/api/admin/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,new_password:l})});if(e.ok)b(!0);else{let t=await e.json();f(t.detail||"Failed to reset password. Please try again.")}}catch(e){f("Failed to reset password. Please check your connection.")}finally{w(!1)}};return p?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-8 w-full max-w-md shadow-2xl text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-6",children:"\uD83C\uDF89"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"Password Reset!"}),(0,r.jsx)("p",{className:"text-blue-200 mb-8",children:"Your password has been successfully reset."}),(0,r.jsx)(n(),{href:"/admin",className:"inline-block bg-gradient-to-r from-purple-500 to-blue-500 text-white py-3 px-6 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:"Sign In Now"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Reset Password"}),(0,r.jsx)("p",{className:"text-blue-200",children:"Enter your new password"})]}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-white mb-2",children:"New Password"}),(0,r.jsx)("input",{type:"password",id:"newPassword",value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Enter new password",required:!0,minLength:8})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-white mb-2",children:"Confirm New Password"}),(0,r.jsx)("input",{type:"password",id:"confirmPassword",value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Confirm new password",required:!0,minLength:8})]}),x&&(0,r.jsx)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-red-500/20 border border-red-400/50 rounded-lg p-3 text-red-200 text-sm",children:x}),(0,r.jsx)(i.P.button,{type:"submit",disabled:m||!t,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:m?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Resetting Password..."]}):"Reset Password"})]}),(0,r.jsx)("div",{className:"mt-8 pt-6 border-t border-white/20 text-center",children:(0,r.jsx)(n(),{href:"/admin",className:"text-blue-200 hover:text-white text-sm transition-colors",children:"← Back to Login"})})]})})}function u(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"text-white",children:"Loading..."})}),children:(0,r.jsx)(c,{})})}}},e=>{e.O(0,[463,874,441,964,358],()=>e(e.s=2199)),_N_E=e.O()}]);