(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{760:(e,t,s)=>{"use strict";s.d(t,{N:()=>b});var a=s(5155),i=s(2115),r=s(869),n=s(2885),l=s(7494),o=s(845),c=s(7351),d=s(1508);class m extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,c.s)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function x(e){let{children:t,isPresent:s,anchorX:r,root:n}=e,l=(0,i.useId)(),o=(0,i.useRef)(null),c=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=(0,i.useContext)(d.Q);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:i,right:d}=c.current;if(s||!o.current||!e||!t)return;o.current.dataset.motionPopId=l;let m=document.createElement("style");x&&(m.nonce=x);let u=null!=n?n:document.head;return u.appendChild(m),m.sheet&&m.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===r?"left: ".concat(i):"right: ".concat(d),"px !important;\n            top: ").concat(a,"px !important;\n          }\n        ")),()=>{u.contains(m)&&u.removeChild(m)}},[s]),(0,a.jsx)(m,{isPresent:s,childRef:o,sizeRef:c,children:i.cloneElement(t,{ref:o})})}let u=e=>{let{children:t,initial:s,isPresent:r,onExitComplete:l,custom:c,presenceAffectsLayout:d,mode:m,anchorX:u,root:g}=e,h=(0,n.M)(p),f=(0,i.useId)(),b=!0,y=(0,i.useMemo)(()=>(b=!1,{id:f,initial:s,isPresent:r,custom:c,onExitComplete:e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;l&&l()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[r,h,l]);return d&&b&&(y={...y}),(0,i.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[r]),i.useEffect(()=>{r||h.size||!l||l()},[r]),"popLayout"===m&&(t=(0,a.jsx)(x,{isPresent:r,anchorX:u,root:g,children:t})),(0,a.jsx)(o.t.Provider,{value:y,children:t})};function p(){return new Map}var g=s(2082);let h=e=>e.key||"";function f(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}let b=e=>{let{children:t,custom:s,initial:o=!0,onExitComplete:c,presenceAffectsLayout:d=!0,mode:m="sync",propagate:x=!1,anchorX:p="left",root:b}=e,[y,j]=(0,g.xQ)(x),v=(0,i.useMemo)(()=>f(t),[t]),N=x&&!y?[]:v.map(h),w=(0,i.useRef)(!0),k=(0,i.useRef)(v),_=(0,n.M)(()=>new Map),[C,D]=(0,i.useState)(v),[S,P]=(0,i.useState)(v);(0,l.E)(()=>{w.current=!1,k.current=v;for(let e=0;e<S.length;e++){let t=h(S[e]);N.includes(t)?_.delete(t):!0!==_.get(t)&&_.set(t,!1)}},[S,N.length,N.join("-")]);let A=[];if(v!==C){let e=[...v];for(let t=0;t<S.length;t++){let s=S[t],a=h(s);N.includes(a)||(e.splice(t,0,s),A.push(s))}return"wait"===m&&A.length&&(e=A),P(f(e)),D(v),null}let{forceRender:X}=(0,i.useContext)(r.L);return(0,a.jsx)(a.Fragment,{children:S.map(e=>{let t=h(e),i=(!x||!!y)&&(v===S||N.includes(t));return(0,a.jsx)(u,{isPresent:i,initial:(!w.current||!!o)&&void 0,custom:s,presenceAffectsLayout:d,mode:m,root:b,onExitComplete:i?void 0:()=>{if(!_.has(t))return;_.set(t,!0);let e=!0;_.forEach(t=>{t||(e=!1)}),e&&(null==X||X(),P(k.current),x&&(null==j||j()),c&&c())},anchorX:p,children:e},t)})})}},2710:(e,t,s)=>{Promise.resolve().then(s.bind(s,9759))},5431:(e,t,s)=>{"use strict";s.d(t,{X:()=>n,z:()=>l});var a=s(5155),i=s(2115);let r=(0,i.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,i.useState)(null),[l,o]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=localStorage.getItem("admin_token"),t=localStorage.getItem("admin_username");e&&t?(console.log("\uD83D\uDD04 Found stored credentials, setting admin user immediately"),n({username:t,token:e}),c(e,t).catch(console.error)):o(!1)},[]);let c=async(e,t)=>{try{console.log("\uD83D\uDD10 Verifying token for:",t);let s="https://status-monitor-4.preview.emergentagent.com";console.log("\uD83C\uDF10 Using backend URL for verification:",s);let a=await fetch("".concat(s,"/api/admin/verify"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("\uD83D\uDD0D Verify response status:",a.status),a.ok){let s=await a.json();console.log("✅ Token verified successfully:",s),n({username:t,token:e})}else console.log("❌ Token verification failed, clearing storage"),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),n(null)}catch(e){console.error("❌ Token verification error:",e),console.log("⚠️ Network error during verification, keeping token for now")}finally{o(!1)}},d=async(e,t)=>{try{console.log("\uD83D\uDD0D Admin login attempt:",e);let s="https://status-monitor-4.preview.emergentagent.com";console.log("\uD83C\uDF10 Using backend URL:",s);let a=await fetch("".concat(s,"/api/admin/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(console.log("\uD83D\uDCE1 Login response status:",a.status),a.ok){let t=(await a.json()).access_token;return console.log("✅ Login successful, token received"),localStorage.setItem("admin_token",t),localStorage.setItem("admin_username",e),n({username:e,token:t}),!0}{let e=await a.json().catch(()=>({}));console.error("❌ Login failed:",a.status,e)}return!1}catch(e){return console.error("❌ Login error:",e),!1}};return(0,a.jsx)(r.Provider,{value:{adminUser:s,isAuthenticated:!!s,login:d,logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),n(null)},loading:l},children:t})}let l=()=>{let e=(0,i.useContext)(r);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},9759:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(5155),i=s(2115),r=s(5431),n=s(3463),l=s(760);function o(){let{adminUser:e}=(0,r.z)(),[t,s]=(0,i.useState)("categories"),[o,c]=(0,i.useState)([]),[d,m]=(0,i.useState)([]),[x,u]=(0,i.useState)(!0),[p,g]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!1),[b,y]=(0,i.useState)(!1),[j,v]=(0,i.useState)(!1),[N,w]=(0,i.useState)(""),[k,_]=(0,i.useState)("all"),[C,D]=(0,i.useState)("all"),[S,P]=(0,i.useState)({name:"",icon:"",color:"",description:"",subcategories:"",entry_fee:100,prize_pool:2e3}),[A,X]=(0,i.useState)({question:"",options:["","","",""],correct_answer:0,difficulty:"beginner",fun_fact:"",category:"",subcategory:""});(0,i.useEffect)(()=>{let t=!0;return(async()=>{(null==e?void 0:e.token)&&t?(console.log("\uD83D\uDE80 QuizManagement: Starting data load"),await new Promise(e=>setTimeout(e,300)),t&&(await z(),t&&(await new Promise(e=>setTimeout(e,100)),await F()))):(null==e?void 0:e.token)||console.log("⚠️ QuizManagement: No admin token yet")})(),()=>{t=!1}},[e]);let q=()=>({Authorization:"Bearer ".concat((null==e?void 0:e.token)||""),"Content-Type":"application/json"}),T=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(null==e?void 0:e.token))return void console.log("❌ No admin token available for categories fetch");if(p)return void console.log("⚠️ Categories already loading, skipping request");try{g(!0),console.log("\uD83D\uDCE6 Fetching categories... (attempt ".concat(t+1,")")),await new Promise(e=>setTimeout(e,100+200*t));let e=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/categories"),{headers:q()});if(e.ok){let t=await e.json();c(t),console.log("✅ Loaded ".concat(t.length," categories"))}else console.error("❌ Categories fetch failed:",e.status),t<2&&e.status>=500&&(console.log("\uD83D\uDD04 Retrying categories fetch..."),setTimeout(()=>T(t+1),1e3))}catch(e){console.error("❌ Categories fetch error:",e),t<2&&(console.log("\uD83D\uDD04 Retrying categories fetch after error..."),setTimeout(()=>T(t+1),1e3))}finally{0===t&&(g(!1),u(!1))}},z=()=>T(0),E=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(null==e?void 0:e.token))return void console.log("❌ No admin token available for questions fetch");if(h)return void console.log("⚠️ Questions already loading, skipping request");try{f(!0),console.log("❓ Fetching questions... (attempt ".concat(t+1,")")),await new Promise(e=>setTimeout(e,200+300*t));let e=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/questions"),{headers:q()});if(e.ok){let t=await e.json();m(t),console.log("✅ Loaded ".concat(t.length," questions"))}else console.error("❌ Questions fetch failed:",e.status),t<2&&e.status>=500&&(console.log("\uD83D\uDD04 Retrying questions fetch..."),setTimeout(()=>E(t+1),1e3))}catch(e){console.error("❌ Questions fetch error:",e),t<2&&(console.log("\uD83D\uDD04 Retrying questions fetch after error..."),setTimeout(()=>E(t+1),1e3))}finally{0===t&&f(!1)}},F=()=>E(0),I=async e=>{e.preventDefault();try{let e={...S,subcategories:S.subcategories.split(",").map(e=>e.trim())};(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/categories"),{method:"POST",headers:q(),body:JSON.stringify(e)})).ok&&(await z(),y(!1),P({name:"",icon:"",color:"",description:"",subcategories:"",entry_fee:100,prize_pool:2e3}))}catch(e){console.error("Failed to add category:",e)}},L=async e=>{e.preventDefault();try{(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/questions"),{method:"POST",headers:q(),body:JSON.stringify(A)})).ok&&(await F(),v(!1),X({question:"",options:["","","",""],correct_answer:0,difficulty:"beginner",fun_fact:"",category:"",subcategory:""}))}catch(e){console.error("Failed to add question:",e)}},R=async e=>{if(confirm("Are you sure you want to delete this category? This will also delete all questions in this category."))try{(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/categories/").concat(e),{method:"DELETE",headers:q()})).ok&&(await z(),await F())}catch(e){console.error("Failed to delete category:",e)}},O=async e=>{if(confirm("Are you sure you want to delete this question?"))try{(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/questions/").concat(e),{method:"DELETE",headers:q()})).ok&&await F()}catch(e){console.error("Failed to delete question:",e)}},B=d.filter(e=>{let t=e.question.toLowerCase().includes(N.toLowerCase())||e.category.toLowerCase().includes(N.toLowerCase())||e.subcategory.toLowerCase().includes(N.toLowerCase()),s="all"===k||e.category===k,a="all"===C||e.difficulty===C;return t&&s&&a});return x?(0,a.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading quiz data..."})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl p-8 text-white",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"\uD83D\uDCDA Quiz Management Dashboard"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white/20 rounded-xl p-6 text-center min-h-[100px] flex flex-col justify-center hover:bg-white/30 transition-all",children:[(0,a.jsx)("div",{className:"text-4xl font-bold",children:o.length}),(0,a.jsx)("div",{className:"text-base opacity-90 mt-2",children:"Total Categories"})]}),(0,a.jsxs)("div",{className:"bg-white/20 rounded-xl p-6 text-center min-h-[100px] flex flex-col justify-center hover:bg-white/30 transition-all",children:[(0,a.jsx)("div",{className:"text-4xl font-bold",children:d.length}),(0,a.jsx)("div",{className:"text-base opacity-90 mt-2",children:"Total Questions"})]}),(0,a.jsxs)("div",{className:"bg-white/20 rounded-xl p-6 text-center min-h-[100px] flex flex-col justify-center hover:bg-white/30 transition-all",children:[(0,a.jsx)("div",{className:"text-4xl font-bold",children:d.filter(e=>"beginner"===e.difficulty).length}),(0,a.jsx)("div",{className:"text-base opacity-90 mt-2",children:"Beginner Questions"})]}),(0,a.jsxs)("div",{className:"bg-white/20 rounded-xl p-6 text-center min-h-[100px] flex flex-col justify-center hover:bg-white/30 transition-all",children:[(0,a.jsx)("div",{className:"text-4xl font-bold",children:d.filter(e=>"advanced"===e.difficulty).length}),(0,a.jsx)("div",{className:"text-base opacity-90 mt-2",children:"Advanced Questions"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 bg-gray-100 p-3 rounded-xl",children:[(0,a.jsxs)("button",{onClick:()=>s("categories"),className:"px-8 py-4 rounded-xl font-semibold text-base transition-all ".concat("categories"===t?"bg-white text-purple-700 shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-white/50"),children:["\uD83C\uDFF7️ Categories (",o.length,")"]}),(0,a.jsxs)("button",{onClick:()=>s("questions"),className:"px-8 py-4 rounded-xl font-semibold text-base transition-all ".concat("questions"===t?"bg-white text-purple-700 shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-white/50"),children:["❓ Questions (",d.length,")"]})]}),"categories"===t&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCCB Quiz Categories"}),(0,a.jsxs)("button",{onClick:()=>y(!0),className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white px-8 py-4 rounded-xl flex items-center font-semibold shadow-lg text-base",children:[(0,a.jsx)("span",{className:"mr-3 text-xl",children:"✨"}),"Add New Category"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8 mb-12",children:o.map(e=>{let t;return(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-2xl p-8 hover:shadow-xl transition-all duration-300 hover:border-purple-300 min-h-[320px] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center flex-1",children:[(0,a.jsx)("span",{className:"text-5xl mr-5",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-bold text-gray-900 text-xl leading-tight",children:e.name}),(0,a.jsx)("p",{className:"text-base text-gray-600 mt-2 line-clamp-2",children:e.description})]})]}),(0,a.jsx)("button",{onClick:()=>R(e.id),className:"text-red-500 hover:text-red-700 text-sm bg-red-50 hover:bg-red-100 px-4 py-2 rounded-xl transition-colors ml-3 flex-shrink-0 font-medium",children:"\uD83D\uDDD1️ Delete"})]}),(0,a.jsxs)("div",{className:"space-y-5 flex-1",children:[(0,a.jsx)("div",{className:"bg-gray-50 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:"\uD83D\uDCB0 Entry Fee:"}),(0,a.jsxs)("span",{className:"font-bold text-green-600 text-lg",children:[e.entry_fee," coins"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:"\uD83C\uDFC6 Prize Pool:"}),(0,a.jsxs)("span",{className:"font-bold text-blue-600 text-lg",children:[e.prize_pool," coins"]})]})]})}),(0,a.jsx)("div",{className:"bg-purple-50 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-700 font-semibold",children:"\uD83D\uDCCA Questions:"}),(0,a.jsx)("span",{className:"bg-purple-600 text-white px-4 py-2 rounded-full font-bold text-lg",children:(t=e.id,d.filter(e=>e.category===t).length)})]})}),(0,a.jsxs)("div",{className:"mt-auto",children:[(0,a.jsx)("span",{className:"text-gray-700 font-semibold mb-3 block",children:"\uD83C\uDFF7️ Topics:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.subcategories.map((e,t)=>(0,a.jsx)("span",{className:"bg-gradient-to-r from-purple-100 to-blue-100 text-purple-800 px-4 py-2 rounded-full font-medium",children:e},t))})]})]})]},e.id)})})]}),"questions"===t&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"❓ Quiz Questions"}),(0,a.jsxs)("button",{onClick:()=>v(!0),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-8 py-4 rounded-xl flex items-center font-semibold shadow-lg text-base",children:[(0,a.jsx)("span",{className:"mr-3 text-xl",children:"➕"}),"Add New Question"]})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83D\uDD0D Search Questions"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by question, category, or topic...",value:N,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83D\uDCC2 Filter by Category"}),(0,a.jsxs)("select",{value:k,onChange:e=>_(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),o.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"⚡ Filter by Difficulty"}),(0,a.jsxs)("select",{value:C,onChange:e=>D(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Difficulties"}),(0,a.jsx)("option",{value:"beginner",children:"\uD83D\uDFE2 Beginner"}),(0,a.jsx)("option",{value:"intermediate",children:"\uD83D\uDFE1 Intermediate"}),(0,a.jsx)("option",{value:"advanced",children:"\uD83D\uDD34 Advanced"})]})]})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-xl border-l-4 border-blue-500",children:(0,a.jsxs)("span",{className:"text-blue-800 font-semibold text-base",children:["\uD83D\uDCCA Showing ",B.length," of ",d.length," questions"]})}),B.map((e,t)=>{var s;return(0,a.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"bg-white border border-gray-200 rounded-2xl p-8 hover:shadow-lg transition-all duration-300 min-h-[200px]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat("beginner"===e.difficulty?"bg-green-100 text-green-800":"intermediate"===e.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["beginner"===e.difficulty?"\uD83D\uDFE2":"intermediate"===e.difficulty?"\uD83D\uDFE1":"\uD83D\uDD34"," ",e.difficulty.toUpperCase()]}),(0,a.jsx)("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-xs font-bold",children:(null==(s=o.find(t=>t.id===e.category))?void 0:s.name)||e.category}),(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs font-bold",children:e.subcategory})]}),(0,a.jsx)("h4",{className:"font-semibold text-gray-900 text-lg mb-3",children:e.question})]}),(0,a.jsx)("button",{onClick:()=>O(e.id),className:"text-red-500 hover:text-red-700 text-sm bg-red-50 hover:bg-red-100 px-3 py-1 rounded-lg transition-colors ml-4",children:"\uD83D\uDDD1️ Delete"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:e.options.map((t,s)=>(0,a.jsx)("div",{className:"p-3 rounded-lg border-2 ".concat(s===e.correct_answer?"bg-green-50 border-green-300 text-green-800":"bg-gray-50 border-gray-200 text-gray-700"),children:(0,a.jsxs)("span",{className:"font-medium",children:[String.fromCharCode(65+s),". ",t,s===e.correct_answer&&" ✅"]})},s))}),e.fun_fact&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,a.jsxs)("span",{className:"text-blue-800 text-sm",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Fun Fact:"})," ",e.fun_fact]})})]},e.id)})]})]}),(0,a.jsx)(l.N,{children:b&&(0,a.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>y(!1),children:(0,a.jsxs)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Add New Category"}),(0,a.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Name"}),(0,a.jsx)("input",{type:"text",value:S.name,onChange:e=>P({...S,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Icon (Emoji)"}),(0,a.jsx)("input",{type:"text",value:S.icon,onChange:e=>P({...S,icon:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"\uD83D\uDCBB",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Color (Tailwind classes)"}),(0,a.jsx)("input",{type:"text",value:S.color,onChange:e=>P({...S,color:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"from-blue-500 to-purple-600",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description"}),(0,a.jsx)("input",{type:"text",value:S.description,onChange:e=>P({...S,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Subcategories (comma separated)"}),(0,a.jsx)("input",{type:"text",value:S.subcategories,onChange:e=>P({...S,subcategories:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"JavaScript, Python, Java",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Entry Fee"}),(0,a.jsx)("input",{type:"number",value:S.entry_fee,onChange:e=>P({...S,entry_fee:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Prize Pool"}),(0,a.jsx)("input",{type:"number",value:S.prize_pool,onChange:e=>P({...S,prize_pool:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg",children:"Add Category"})]})]})]})})}),(0,a.jsx)(l.N,{children:j&&(0,a.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>v(!1),children:(0,a.jsxs)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Add New Question"}),(0,a.jsxs)("form",{onSubmit:L,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Question"}),(0,a.jsx)("textarea",{value:A.question,onChange:e=>X({...A,question:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 h-24 resize-none",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Options"}),A.options.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("input",{type:"radio",name:"correct_answer",checked:A.correct_answer===t,onChange:()=>X({...A,correct_answer:t}),className:"mr-3"}),(0,a.jsx)("input",{type:"text",value:e,onChange:e=>{let s=[...A.options];s[t]=e.target.value,X({...A,options:s})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Option ".concat(String.fromCharCode(65+t)),required:!0})]},t))]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Difficulty"}),(0,a.jsxs)("select",{value:A.difficulty,onChange:e=>X({...A,difficulty:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"beginner",children:"Beginner"}),(0,a.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,a.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Category"}),(0,a.jsxs)("select",{value:A.category,onChange:e=>X({...A,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Category"}),o.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Subcategory"}),(0,a.jsx)("input",{type:"text",value:A.subcategory,onChange:e=>X({...A,subcategory:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Fun Fact"}),(0,a.jsx)("textarea",{value:A.fun_fact,onChange:e=>X({...A,fun_fact:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 h-20 resize-none",required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg",children:"Add Question"})]})]})]})})})]})}function c(){let{adminUser:e}=(0,r.z)(),[t,s]=(0,i.useState)([]),[o,c]=(0,i.useState)(!0),[d,m]=(0,i.useState)(!1),[x,u]=(0,i.useState)(null),[p,g]=(0,i.useState)({name:"",script_code:"",placement:"header",is_active:!0}),h=()=>({Authorization:"Bearer ".concat(null==e?void 0:e.token),"Content-Type":"application/json"});(0,i.useEffect)(()=>{f()},[]);let f=async()=>{try{let e=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/scripts"),{headers:h()});if(e.ok){let t=await e.json();s(t)}}catch(e){console.error("Failed to fetch scripts:",e)}finally{c(!1)}},b=async e=>{e.preventDefault();try{(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/scripts"),{method:"POST",headers:h(),body:JSON.stringify(p)})).ok&&(await f(),m(!1),g({name:"",script_code:"",placement:"header",is_active:!0}))}catch(e){console.error("Failed to add script:",e)}},y=async(e,t)=>{try{(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/scripts/").concat(e),{method:"PUT",headers:h(),body:JSON.stringify(t)})).ok&&(await f(),u(null))}catch(e){console.error("Failed to update script:",e)}},j=async e=>{if(confirm("Are you sure you want to delete this script?"))try{(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/scripts/").concat(e),{method:"DELETE",headers:h()})).ok&&await f()}catch(e){console.error("Failed to delete script:",e)}},v=async e=>{await y(e.id,{is_active:!e.is_active})};return o?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Scripts & Tracking"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage Google Analytics, Facebook Pixel, and custom scripts"})]}),(0,a.jsxs)("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"+"}),"Add Script"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border rounded-xl p-6 hover:shadow-md transition-all ".concat(e.is_active?"border-green-200":"border-gray-200"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mr-3",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.is_active?"Active":"Inactive"}),(0,a.jsx)("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:e.placement})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Added ",new Date(e.created_at).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>v(e),className:"px-3 py-1 rounded text-sm font-medium ".concat(e.is_active?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:e.is_active?"Deactivate":"Activate"}),(0,a.jsx)("button",{onClick:()=>u(e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 overflow-x-auto",children:(0,a.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:e.script_code})})]},e.id))}),0===t.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCCA"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Scripts Added"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Start by adding Google Analytics, Facebook Pixel, or custom tracking scripts."})]}),(0,a.jsx)(l.N,{children:d&&(0,a.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>m(!1),children:(0,a.jsxs)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Add New Script"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Quick Templates"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[{name:"Google Analytics 4",placement:"header",code:"\x3c!-- Google Analytics 4 --\x3e\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID\"><\/script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n  gtag('config', 'GA_MEASUREMENT_ID');\n<\/script>"},{name:"Facebook Pixel",placement:"header",code:"\x3c!-- Facebook Pixel --\x3e\n<script>\n!function(f,b,e,v,n,t,s)\n{if(f.fbq)return;n=f.fbq=function(){n.callMethod?\nn.callMethod.apply(n,arguments):n.queue.push(arguments)};\nif(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\nn.queue=[];t=b.createElement(e);t.async=!0;\nt.src=v;s=b.getElementsByTagName(e)[0];\ns.parentNode.insertBefore(t,s)}(window, document,'script',\n'https://connect.facebook.net/en_US/fbevents.js');\nfbq('init', 'YOUR_PIXEL_ID');\nfbq('track', 'PageView');\n<\/script>\n<noscript><img height=\"1\" width=\"1\" style=\"display:none\"\nsrc=\"https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1\"\n/></noscript>"},{name:"Google Tag Manager",placement:"header",code:"\x3c!-- Google Tag Manager --\x3e\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-XXXXXXX');<\/script>\n\x3c!-- End Google Tag Manager --\x3e"}].map((e,t)=>(0,a.jsxs)("button",{onClick:()=>{g({name:e.name,script_code:e.code,placement:e.placement,is_active:!0})},className:"p-4 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 text-left transition-all",children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Click to use template"})]},t))})]}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Script Name"}),(0,a.jsx)("input",{type:"text",value:p.name,onChange:e=>g({...p,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g., Google Analytics",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Placement"}),(0,a.jsxs)("select",{value:p.placement,onChange:e=>g({...p,placement:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"header",children:"Header"}),(0,a.jsx)("option",{value:"footer",children:"Footer"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Script Code"}),(0,a.jsx)("textarea",{value:p.script_code,onChange:e=>g({...p,script_code:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono text-sm",rows:12,placeholder:"Paste your script code here...",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"is_active",checked:p.is_active,onChange:e=>g({...p,is_active:e.target.checked}),className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"is_active",className:"text-sm font-medium",children:"Activate immediately"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg",children:"Add Script"})]})]})]})})}),(0,a.jsx)(l.N,{children:x&&(0,a.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>u(null),children:(0,a.jsxs)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Edit Script"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData(e.currentTarget);y(x.id,{name:t.get("name"),script_code:t.get("script_code"),placement:t.get("placement"),is_active:"on"===t.get("is_active")})},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Script Name"}),(0,a.jsx)("input",{type:"text",name:"name",defaultValue:x.name,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Placement"}),(0,a.jsxs)("select",{name:"placement",defaultValue:x.placement,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"header",children:"Header"}),(0,a.jsx)("option",{value:"footer",children:"Footer"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Script Code"}),(0,a.jsx)("textarea",{name:"script_code",defaultValue:x.script_code,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono text-sm",rows:12,required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",name:"is_active",id:"edit_is_active",defaultChecked:x.is_active,className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"edit_is_active",className:"text-sm font-medium",children:"Active"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>u(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg",children:"Update Script"})]})]})]})})})]})}function d(){let{adminUser:e}=(0,r.z)(),[t,s]=(0,i.useState)(null),[l,o]=(0,i.useState)(!0),[c,d]=(0,i.useState)(!1),[m,x]=(0,i.useState)("tracking"),[u,p]=(0,i.useState)({}),g=()=>({Authorization:"Bearer ".concat(null==e?void 0:e.token),"Content-Type":"application/json"});(0,i.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/site-config"),{headers:g()});if(e.ok){let t=await e.json();s(t),p(t)}}catch(e){console.error("Failed to fetch site config:",e)}finally{o(!1)}},f=async()=>{if(u){d(!0);try{let e=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/site-config"),{method:"PUT",headers:g(),body:JSON.stringify(u)});if(e.ok){let t=await e.json();s(t),p(t),alert("Configuration saved successfully!")}}catch(e){console.error("Failed to update config:",e),alert("Failed to save configuration")}finally{d(!1)}}};if(l)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});let b=JSON.stringify(t)!==JSON.stringify(u);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Site Configuration"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage tracking codes, pixels, and site files"})]}),(0,a.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit mb-6",children:[(0,a.jsx)("button",{onClick:()=>x("tracking"),className:"px-4 py-2 rounded-md font-medium transition-colors ".concat("tracking"===m?"bg-white text-purple-700 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"\uD83D\uDCCA Tracking & Pixels"}),(0,a.jsx)("button",{onClick:()=>x("files"),className:"px-4 py-2 rounded-md font-medium transition-colors ".concat("files"===m?"bg-white text-purple-700 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"\uD83D\uDCC1 Site Files"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:["tracking"===m&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tracking Codes & Pixels"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:"google_analytics_id",name:"Google Analytics 4",placeholder:"G-XXXXXXXXXX",icon:"\uD83D\uDCCA",description:"Google Analytics measurement ID"},{id:"google_search_console_id",name:"Google Search Console",placeholder:"google-site-verification=xxxxxxxxxxxxxx",icon:"\uD83D\uDD0D",description:"Google Search Console verification code"},{id:"facebook_pixel_id",name:"Facebook Pixel",placeholder:"xxxxxxxxxxxxxxxxx",icon:"\uD83D\uDCD8",description:"Facebook Pixel ID for tracking conversions"},{id:"google_tag_manager_id",name:"Google Tag Manager",placeholder:"GTM-XXXXXXX",icon:"\uD83C\uDFF7️",description:"Google Tag Manager container ID"},{id:"twitter_pixel_id",name:"Twitter Pixel",placeholder:"o-xxxxx",icon:"\uD83D\uDC26",description:"Twitter advertising pixel ID"},{id:"linkedin_pixel_id",name:"LinkedIn Insight",placeholder:"xxxxxxx",icon:"\uD83D\uDCBC",description:"LinkedIn Insight Tag partner ID"},{id:"tiktok_pixel_id",name:"TikTok Pixel",placeholder:"CXXXXXXXXXXXXXXXXX",icon:"\uD83C\uDFB5",description:"TikTok advertising pixel ID"},{id:"snapchat_pixel_id",name:"Snapchat Pixel",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",icon:"\uD83D\uDC7B",description:"Snapchat advertising pixel ID"}].map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e.name})]}),(0,a.jsx)("input",{type:"text",value:u[e.id]||"",onChange:t=>p({...u,[e.id]:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm",placeholder:e.placeholder}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.id))}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCA1 Setup Instructions"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"Google Analytics:"})," Create property at analytics.google.com and copy Measurement ID"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"Search Console:"})," Verify your site and copy the verification meta tag content"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"Facebook Pixel:"})," Create pixel at business.facebook.com and copy the Pixel ID"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"Other Pixels:"})," Get tracking IDs from respective advertising platforms"]})]})]})]}),"files"===m&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Site Files"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83E\uDD16"}),(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"ads.txt Content"})]}),(0,a.jsx)("textarea",{value:u.ads_txt_content||"",onChange:e=>p({...u,ads_txt_content:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono text-sm",rows:8,placeholder:"google.com, pub-xxxxxxxxxxxxxxxxx, DIRECT, f08c47fec0942fa0 facebook.com, xxxxxxxxxxxxxxxxx, DIRECT # Add more ad network entries here"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Add authorized sellers for your ad networks. This helps prevent unauthorized inventory sales."})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDD77️"}),(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"robots.txt Content"})]}),(0,a.jsx)("textarea",{value:u.robots_txt_content||"",onChange:e=>p({...u,robots_txt_content:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono text-sm",rows:8,placeholder:"User-agent: * Allow: /  User-agent: Googlebot Allow: /  Sitemap: https://techkwiz.com/sitemap.xml"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Control how search engines crawl your site. Current robots.txt is auto-generated."})]})]}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"\uD83D\uDCC4 File Information"}),(0,a.jsxs)("div",{className:"text-sm text-green-800 space-y-1",children:[(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"ads.txt:"})," Accessible at /ads.txt - tells advertisers who can sell your ad inventory"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"robots.txt:"})," Accessible at /robots.txt - guides search engine crawlers"]}),(0,a.jsx)("p",{children:"• Changes take effect immediately and are served at their respective URLs"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 mt-6 border-t",children:[(0,a.jsx)("button",{onClick:()=>{t&&p(t)},disabled:!b,className:"px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reset Changes"}),(0,a.jsx)(n.P.button,{onClick:f,disabled:!b||c,whileHover:b?{scale:1.02}:{},whileTap:b?{scale:.98}:{},className:"px-6 py-2 rounded-lg font-medium transition-all ".concat(b?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:c?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Configuration"})]})]})]})}function m(){let{adminUser:e}=(0,r.z)(),[t,s]=(0,i.useState)([]),[o,c]=(0,i.useState)(!0),[d,m]=(0,i.useState)(!1),[x,u]=(0,i.useState)(null),[p,g]=(0,i.useState)({name:"",ad_unit_id:"",ad_code:"",placement:"header",ad_type:"adsense",is_active:!0}),h=()=>({Authorization:"Bearer ".concat(null==e?void 0:e.token),"Content-Type":"application/json"});(0,i.useEffect)(()=>{f()},[]);let f=async()=>{try{let e=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/ad-slots"),{headers:h()});if(e.ok){let t=await e.json();s(t)}}catch(e){console.error("Failed to fetch ad slots:",e)}finally{c(!1)}},b=async e=>{e.preventDefault();try{(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/ad-slots"),{method:"POST",headers:h(),body:JSON.stringify(p)})).ok&&(await f(),m(!1),g({name:"",ad_unit_id:"",ad_code:"",placement:"header",ad_type:"adsense",is_active:!0}))}catch(e){console.error("Failed to add ad slot:",e)}},y=async(e,t)=>{try{(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/ad-slots/").concat(e),{method:"PUT",headers:h(),body:JSON.stringify(t)})).ok&&(await f(),u(null))}catch(e){console.error("Failed to update ad slot:",e)}},j=async e=>{if(confirm("Are you sure you want to delete this ad slot?"))try{(await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/ad-slots/").concat(e),{method:"DELETE",headers:h()})).ok&&await f()}catch(e){console.error("Failed to delete ad slot:",e)}},v=async e=>{await y(e.id,{is_active:!e.is_active})},N={adsense:"bg-blue-100 text-blue-800",adx:"bg-purple-100 text-purple-800",prebid:"bg-green-100 text-green-800"},w=[{id:"header",name:"Header Banner - Top of the page"},{id:"sidebar",name:"Sidebar Right - Right side of the page"},{id:"between-questions",name:"Between Questions - Between quiz questions"},{id:"footer",name:"Footer Banner - Bottom of the page"},{id:"popup",name:"Popup Interstitial - In-game pop-ups"},{id:"quiz-result",name:"Quiz Result - After quiz completion"},{id:"category-top",name:"Category Page Top - Top of category page"},{id:"category-bottom",name:"Category Page Bottom - Bottom of category page"}];return o?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Ad Slot Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure AdSense/AdX/Prebid slots matching quizwinz.com structure"})]}),(0,a.jsxs)("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"+"}),"Add Ad Slot"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border rounded-xl p-6 hover:shadow-md transition-all ".concat(e.is_active?"border-green-200":"border-gray-200"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mr-3",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.is_active?"Active":"Inactive"}),(0,a.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium ".concat(N[e.ad_type]),children:e.ad_type.toUpperCase()}),(0,a.jsx)("span",{className:"ml-2 px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium",children:e.placement})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Ad Unit ID:"})," ",e.ad_unit_id]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Added:"})," ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>v(e),className:"px-3 py-1 rounded text-sm font-medium ".concat(e.is_active?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:e.is_active?"Deactivate":"Activate"}),(0,a.jsx)("button",{onClick:()=>u(e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 overflow-x-auto",children:(0,a.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:e.ad_code})})]},e.id))}),0===t.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCB0"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Ad Slots Created"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Start monetizing by adding AdSense, AdX, or Prebid ad slots."})]}),(0,a.jsx)(l.N,{children:d&&(0,a.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>m(!1),children:(0,a.jsxs)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Add New Ad Slot"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Ad Type Examples"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:Object.entries({adsense:{name:"Google AdSense",example:'<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXX"><\/script>\n<ins class="adsbygoogle"\n     style="display:block"\n     data-ad-client="ca-pub-XXXXXXXXX"\n     data-ad-slot="XXXXXXXXX"\n     data-ad-format="auto"\n     data-full-width-responsive="true"></ins>\n<script>\n     (adsbygoogle = window.adsbygoogle || []).push({});\n<\/script>'},adx:{name:"Google AdX",example:"<script async src=\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\"><\/script>\n<script>\n  window.googletag = window.googletag || {cmd: []};\n  googletag.cmd.push(function() {\n    googletag.defineSlot('/XXXXXXX/slot_name', [728, 90], 'div-gpt-ad').addService(googletag.pubads());\n    googletag.pubads().enableSingleRequest();\n    googletag.enableServices();\n  });\n<\/script>\n<div id='div-gpt-ad'>\n  <script>googletag.cmd.push(function() { googletag.display('div-gpt-ad'); });<\/script>\n</div>"},prebid:{name:"Prebid Header Bidding",example:"<script>\nvar adUnits = [{\n  code: 'div-gpt-ad',\n  mediaTypes: {\n    banner: {\n      sizes: [[300, 250], [728, 90]]\n    }\n  },\n  bids: [{\n    bidder: 'appnexus',\n    params: {\n      placementId: 13144370\n    }\n  }]\n}];\n<\/script>"}}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"p-4 border rounded-lg cursor-pointer transition-all ".concat(p.ad_type===t?"border-purple-300 bg-purple-50":"border-gray-200 hover:border-gray-300"),onClick:()=>{g({...p,ad_type:t,ad_code:s.example})},children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900",children:s.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Click to use template"})]},t)})})]}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ad Slot Name"}),(0,a.jsx)("input",{type:"text",value:p.name,onChange:e=>g({...p,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g., Header Banner",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ad Unit ID"}),(0,a.jsx)("input",{type:"text",value:p.ad_unit_id,onChange:e=>g({...p,ad_unit_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"ca-pub-XXXXXXXXX/XXXXXXXXX",required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Placement"}),(0,a.jsx)("select",{value:p.placement,onChange:e=>g({...p,placement:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:w.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ad Type"}),(0,a.jsxs)("select",{value:p.ad_type,onChange:e=>g({...p,ad_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"adsense",children:"Google AdSense"}),(0,a.jsx)("option",{value:"adx",children:"Google AdX"}),(0,a.jsx)("option",{value:"prebid",children:"Prebid"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ad Code"}),(0,a.jsx)("textarea",{value:p.ad_code,onChange:e=>g({...p,ad_code:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono text-sm",rows:12,placeholder:"Paste your ad code here...",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"ad_is_active",checked:p.is_active,onChange:e=>g({...p,is_active:e.target.checked}),className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"ad_is_active",className:"text-sm font-medium",children:"Activate immediately"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg",children:"Add Ad Slot"})]})]})]})})}),(0,a.jsx)(l.N,{children:x&&(0,a.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>u(null),children:(0,a.jsxs)(n.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Edit Ad Slot"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData(e.currentTarget);y(x.id,{name:t.get("name"),ad_unit_id:t.get("ad_unit_id"),ad_code:t.get("ad_code"),placement:t.get("placement"),ad_type:t.get("ad_type"),is_active:"on"===t.get("is_active")})},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ad Slot Name"}),(0,a.jsx)("input",{type:"text",name:"name",defaultValue:x.name,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ad Unit ID"}),(0,a.jsx)("input",{type:"text",name:"ad_unit_id",defaultValue:x.ad_unit_id,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Placement"}),(0,a.jsx)("select",{name:"placement",defaultValue:x.placement,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:w.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ad Type"}),(0,a.jsxs)("select",{name:"ad_type",defaultValue:x.ad_type,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,a.jsx)("option",{value:"adsense",children:"Google AdSense"}),(0,a.jsx)("option",{value:"adx",children:"Google AdX"}),(0,a.jsx)("option",{value:"prebid",children:"Prebid"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Ad Code"}),(0,a.jsx)("textarea",{name:"ad_code",defaultValue:x.ad_code,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono text-sm",rows:12,required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",name:"is_active",id:"edit_ad_is_active",defaultChecked:x.is_active,className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"edit_ad_is_active",className:"text-sm font-medium",children:"Active"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>u(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg",children:"Update Ad Slot"})]})]})]})})})]})}function x(){let{adminUser:e}=(0,r.z)(),[t,s]=(0,i.useState)(null),[l,o]=(0,i.useState)(!0),[c,d]=(0,i.useState)(!1),[m,x]=(0,i.useState)({}),u=()=>({Authorization:"Bearer ".concat(null==e?void 0:e.token),"Content-Type":"application/json"});(0,i.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/rewarded-config"),{headers:u()});if(e.ok){let t=await e.json();s(t),x(t)}}catch(e){console.error("Failed to fetch config:",e)}finally{o(!1)}},g=async()=>{if(m){d(!0);try{let e=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/rewarded-config"),{method:"PUT",headers:u(),body:JSON.stringify(m)});if(e.ok){let t=await e.json();s(t),x(t)}}catch(e){console.error("Failed to update config:",e)}finally{d(!1)}}};if(l)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!t)return(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"⚠️"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Config Not Found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Failed to load rewarded popup configuration."})]});let h=JSON.stringify(t)!==JSON.stringify(m);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Rewarded Popup Configuration"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Control when and how rewarded video ads appear to users"})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Rewarded Popups"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Enable or disable rewarded video advertisements"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium ".concat(m.is_active?"text-green-600":"text-red-600"),children:m.is_active?"Active":"Inactive"}),(0,a.jsx)("button",{onClick:()=>x({...m,is_active:!m.is_active}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(m.is_active?"bg-purple-600":"bg-gray-300"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(m.is_active?"translate-x-6":"translate-x-1")})})]})]}),(0,a.jsx)("div",{className:"border-t pt-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Trigger Settings"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Show popup after every X correct answers"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"number",min:"1",max:"50",value:m.trigger_after_questions||5,onChange:e=>x({...m,trigger_after_questions:parseInt(e.target.value)||5}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"questions"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: 5-10 questions for better user experience"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coin reward amount"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"number",min:"50",max:"1000",step:"50",value:m.coin_reward||200,onChange:e=>x({...m,coin_reward:parseInt(e.target.value)||200}),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"coins"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Amount of coins users receive for watching ads"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Display Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Show when user has insufficient coins"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Display popup on category page when user can't afford quiz entry"})]}),(0,a.jsx)("button",{onClick:()=>x({...m,show_on_insufficient_coins:!m.show_on_insufficient_coins}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(m.show_on_insufficient_coins?"bg-purple-600":"bg-gray-300"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(m.show_on_insufficient_coins?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Show during quiz gameplay"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Display popup during quiz after correct answers"})]}),(0,a.jsx)("button",{onClick:()=>x({...m,show_during_quiz:!m.show_during_quiz}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(m.show_during_quiz?"bg-purple-600":"bg-gray-300"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(m.show_during_quiz?"translate-x-6":"translate-x-1")})})]})]})]})]})}),(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Preview"}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-lg p-6",children:(0,a.jsx)("div",{className:"bg-white rounded-lg p-4 max-w-sm mx-auto shadow-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83C\uDF81"}),(0,a.jsx)("h4",{className:"font-bold text-gray-900 mb-2",children:"Watch Ad & Earn Coins!"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Watch a short video to earn ",m.coin_reward," coins"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("button",{className:"w-full bg-purple-600 text-white py-2 rounded-lg font-medium",children:["Watch Ad (",m.coin_reward," coins)"]}),(0,a.jsx)("button",{className:"w-full text-gray-500 text-sm",children:"No thanks"})]})]})})})]}),(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Configuration"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Status:"}),(0,a.jsx)("span",{className:"ml-2 ".concat(m.is_active?"text-green-600":"text-red-600"),children:m.is_active?"Active":"Inactive"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Trigger Frequency:"}),(0,a.jsxs)("span",{className:"ml-2 text-gray-900",children:["Every ",m.trigger_after_questions," correct answers"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Coin Reward:"}),(0,a.jsxs)("span",{className:"ml-2 text-gray-900",children:[m.coin_reward," coins"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Insufficient Coins:"}),(0,a.jsx)("span",{className:"ml-2 ".concat(m.show_on_insufficient_coins?"text-green-600":"text-red-600"),children:m.show_on_insufficient_coins?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"During Quiz:"}),(0,a.jsx)("span",{className:"ml-2 ".concat(m.show_during_quiz?"text-green-600":"text-red-600"),children:m.show_during_quiz?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Last Updated:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-900",children:new Date(t.updated_at).toLocaleDateString()})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,a.jsx)("button",{onClick:()=>{t&&x(t)},disabled:!h,className:"px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reset Changes"}),(0,a.jsx)(n.P.button,{onClick:g,disabled:!h||c,whileHover:h?{scale:1.02}:{},whileTap:h?{scale:.98}:{},className:"px-6 py-2 rounded-lg font-medium transition-all ".concat(h?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:c?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Configuration"})]})]})})]})}function u(){let{adminUser:e}=(0,r.z)(),[t,s]=(0,i.useState)(!1),[l,o]=(0,i.useState)(!1),c=()=>({Authorization:"Bearer ".concat(null==e?void 0:e.token),"Content-Type":"application/json"}),d=async()=>{s(!0);try{let e=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/export/quiz-data"),{headers:c()});if(e.ok){let t=await e.json(),s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),i=document.createElement("a");i.href=a,i.download="techkwiz-quiz-data-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}else alert("Failed to export data")}catch(e){console.error("Export failed:",e),alert("Failed to export data")}finally{s(!1)}},m=async e=>{o(!0);try{let t=await e.text(),s=JSON.parse(t),a=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/import/quiz-data"),{method:"POST",headers:c(),body:JSON.stringify(s)});if(a.ok)alert("Data imported successfully! The page will refresh."),window.location.reload();else{let e=await a.json();alert("Failed to import data: ".concat(e.detail||"Unknown error"))}}catch(e){console.error("Import failed:",e),alert("Failed to import data. Please check the file format.")}finally{o(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Data Export & Import"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Backup and restore your quiz data"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"text-3xl mr-3",children:"\uD83D\uDCE4"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Export Data"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Download your complete quiz database"})]})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"What's included:"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3",children:[{icon:"\uD83D\uDDC2️",title:"Quiz Categories",description:"All quiz categories with their settings, entry fees, and prize pools"},{icon:"❓",title:"Quiz Questions",description:"Complete question database with answers, fun facts, and difficulty levels"},{icon:"\uD83D\uDCC5",title:"Timestamps",description:"Creation and modification dates for all data entries"},{icon:"\uD83D\uDD17",title:"Relationships",description:"Category-question relationships and subcategory mappings"}].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"text-xl mr-3 mt-1",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 text-sm",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]})]},t))})]}),(0,a.jsx)(n.P.button,{onClick:d,disabled:t,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:t?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Exporting..."]}):"Export Quiz Data"}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,a.jsx)("strong",{children:"Tip:"})," Export regularly to keep backups of your quiz content. The file will be named with today's date."]})})]}),(0,a.jsxs)(n.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"text-3xl mr-3",children:"\uD83D\uDCE5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Import Data"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Restore from a previous export"})]})]}),(0,a.jsx)("div",{className:"space-y-4 mb-6",children:(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-yellow-900 mb-2",children:"⚠️ Important Notes:"}),(0,a.jsx)("ul",{className:"text-sm text-yellow-800 space-y-1",children:["Import will replace ALL existing quiz data","Make sure to export current data as backup first","File must be in valid JSON format","Categories and questions will be completely overwritten"].map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)("span",{className:"mr-2",children:"•"}),(0,a.jsx)("span",{children:e})]},t))})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];s&&(confirm("Are you sure you want to import this data? This will replace ALL existing quiz content and cannot be undone.")&&m(s),e.target.value="")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-medium file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100",disabled:l}),l&&(0,a.jsxs)("div",{className:"flex items-center justify-center p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600 mr-2"}),(0,a.jsx)("span",{className:"text-gray-700",children:"Importing data..."})]})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-red-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-red-800",children:[(0,a.jsx)("strong",{children:"Warning:"})," Import will permanently delete all current quiz data. Make sure you have a backup before proceeding."]})})]})]}),(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Management Best Practices"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCCB"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:"Regular Backups"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Export your data weekly to prevent loss"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDD04"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:"Version Control"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Keep multiple export files with different dates"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83E\uDDEA"}),(0,a.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:"Test Imports"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Always test import files in a safe environment first"})]})]})]})]})}function p(){let{adminUser:e}=(0,r.z)(),[t,s]=(0,i.useState)(!1),[l,o]=(0,i.useState)(!1),[c,d]=(0,i.useState)(""),[m,x]=(0,i.useState)({username:(null==e?void 0:e.username)||"",email:"jaseem@adops.in",currentPassword:"",newPassword:"",confirmPassword:""}),u=async t=>{if(t.preventDefault(),s(!0),d(""),o(!1),!m.currentPassword){d("Current password is required"),s(!1);return}if(m.newPassword&&m.newPassword!==m.confirmPassword){d("New passwords do not match"),s(!1);return}if(m.newPassword&&m.newPassword.length<8){d("New password must be at least 8 characters long"),s(!1);return}try{let t={current_password:m.currentPassword};m.username!==(null==e?void 0:e.username)&&(t.username=m.username),"jaseem@adops.in"!==m.email&&(t.email=m.email),m.newPassword&&(t.new_password=m.newPassword);let s=await fetch("".concat("https://status-monitor-4.preview.emergentagent.com","/api/admin/profile"),{method:"PUT",headers:{Authorization:"Bearer ".concat(null==e?void 0:e.token),"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok)o(!0),x({...m,currentPassword:"",newPassword:"",confirmPassword:""}),m.newPassword&&setTimeout(()=>{alert("Password updated successfully! Please log in again."),window.location.href="/admin"},2e3);else{let e=await s.json();d(e.detail||"Failed to update profile")}}catch(e){console.error("Failed to update profile:",e),d("Failed to update profile. Please try again.")}finally{s(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your admin account details and security"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,a.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),(0,a.jsx)("input",{type:"text",value:m.username,onChange:e=>x({...m,username:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,a.jsx)("input",{type:"email",value:m.email,onChange:e=>x({...m,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password *"}),(0,a.jsx)("input",{type:"password",value:m.currentPassword,onChange:e=>x({...m,currentPassword:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Required to save any changes",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password (Optional)"}),(0,a.jsx)("input",{type:"password",value:m.newPassword,onChange:e=>x({...m,newPassword:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Leave empty to keep current",minLength:8})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,a.jsx)("input",{type:"password",value:m.confirmPassword,onChange:e=>x({...m,confirmPassword:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Confirm new password",minLength:8})]})]})]})]}),c&&(0,a.jsx)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-800",children:c}),l&&(0,a.jsx)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-green-50 border border-green-200 rounded-lg p-4 text-green-800",children:"Profile updated successfully!"}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{x({username:(null==e?void 0:e.username)||"",email:"jaseem@adops.in",currentPassword:"",newPassword:"",confirmPassword:""}),d(""),o(!1)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Reset Form"}),(0,a.jsx)(n.P.button,{type:"submit",disabled:t,whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg font-medium shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:t?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Changes"})]})]}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDD12 Security Information"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("p",{children:"• Only you have access to the admin dashboard"}),(0,a.jsx)("p",{children:"• Sessions expire automatically for security"}),(0,a.jsx)("p",{children:"• Password changes require re-authentication"}),(0,a.jsx)("p",{children:"• Email changes affect password reset functionality"})]})]})]})]})}function g(){let{adminUser:e,logout:t,loading:s}=(0,r.z)(),[l,g]=(0,i.useState)("quizzes");return((0,i.useEffect)(()=>{let t=setTimeout(()=>{s||e||(console.log("\uD83D\uDD04 Dashboard: Redirecting to login - no admin user found"),window.location.href="/admin")},1e3);return()=>clearTimeout(t)},[e,s]),s)?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600 mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading admin dashboard..."})]}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"w-full px-6 sm:px-8 lg:px-12",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"TechKwiz Admin"}),(0,a.jsxs)("span",{className:"ml-6 text-base text-gray-600 bg-gray-100 px-4 py-2 rounded-full",children:["Welcome, ",e.username]})]}),(0,a.jsx)("button",{onClick:t,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg transition-colors font-medium text-base",children:"Logout"})]})})}),(0,a.jsx)("div",{className:"w-full px-6 sm:px-8 lg:px-12 py-8",children:(0,a.jsxs)("div",{className:"flex gap-8",children:[(0,a.jsx)("div",{className:"w-80 flex-shrink-0",children:(0,a.jsx)("nav",{className:"space-y-3",children:[{id:"quizzes",name:"Quiz Management",icon:"\uD83D\uDCDD"},{id:"site-config",name:"Site Configuration",icon:"⚙️"},{id:"scripts",name:"Scripts & Tracking",icon:"\uD83D\uDCCA"},{id:"ads",name:"Ad Management",icon:"\uD83D\uDCB0"},{id:"rewards",name:"Rewarded Popups",icon:"\uD83C\uDF81"},{id:"export",name:"Data Export",icon:"\uD83D\uDCBE"},{id:"profile",name:"Profile Settings",icon:"\uD83D\uDC64"}].map(e=>(0,a.jsxs)(n.P.button,{onClick:()=>g(e.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center px-6 py-4 text-left rounded-xl transition-all text-base ".concat(l===e.id?"bg-gradient-to-r from-purple-600 to-purple-700 text-white shadow-lg":"bg-white text-gray-700 hover:bg-purple-50 hover:text-purple-700 shadow-sm border border-gray-100"),children:[(0,a.jsx)("span",{className:"text-2xl mr-4",children:e.icon}),(0,a.jsx)("span",{className:"font-semibold",children:e.name})]},e.id))})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white rounded-2xl shadow-lg p-10 min-h-[700px] border border-gray-100",children:(()=>{switch(l){case"quizzes":default:return(0,a.jsx)(o,{});case"site-config":return(0,a.jsx)(d,{});case"scripts":return(0,a.jsx)(c,{});case"ads":return(0,a.jsx)(m,{});case"rewards":return(0,a.jsx)(x,{});case"export":return(0,a.jsx)(u,{});case"profile":return(0,a.jsx)(p,{})}})()},l)})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Authenticating..."})]})}}},e=>{e.O(0,[463,441,964,358],()=>e(e.s=2710)),_N_E=e.O()}]);