(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[912],{3977:(e,t,r)=>{Promise.resolve().then(r.bind(r,7434))},7434:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(5155),a=r(2115),i=r(3463),n=r(1890);function l(){let[e,t]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(""),[p,b]=(0,a.useState)(!0),[f,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("".concat(n.env.REACT_APP_BACKEND_URL,"/api/admin/categories"));if(401===e.status)w(!0);else{window.location.href="/admin";return}}catch(e){console.error("Setup check failed:",e),w(!0)}finally{b(!1)}},g=async t=>{if(t.preventDefault(),m(""),r!==o)return void m("Passwords do not match");if(r.length<8)return void m("Password must be at least 8 characters long");u(!0);try{let t=await fetch("".concat(n.env.REACT_APP_BACKEND_URL,"/api/admin/setup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})});if(t.ok)alert("Admin user created successfully! You can now sign in."),window.location.href="/admin";else{let e=await t.json();m(e.detail||"Setup failed. Please try again.")}}catch(e){m("Setup failed. Please check your connection.")}finally{u(!1)}};return p?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"text-center text-white",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),(0,s.jsx)("p",{children:"Checking setup status..."})]})}):f?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Setup TechKwiz Admin"}),(0,s.jsx)("p",{className:"text-blue-200",children:"Create your admin account to get started"})]}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-white mb-2",children:"Admin Username"}),(0,s.jsx)("input",{type:"text",id:"username",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Enter admin username",required:!0,minLength:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-white mb-2",children:"Password"}),(0,s.jsx)("input",{type:"password",id:"password",value:r,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Enter password",required:!0,minLength:8})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-white mb-2",children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",id:"confirmPassword",value:o,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent",placeholder:"Confirm password",required:!0,minLength:8})]}),h&&(0,s.jsx)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-red-500/20 border border-red-400/50 rounded-lg p-3 text-red-200 text-sm",children:h}),(0,s.jsx)(i.P.button,{type:"submit",disabled:c,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Admin..."]}):"Create Admin Account"})]}),(0,s.jsx)("div",{className:"mt-8 pt-6 border-t border-white/20",children:(0,s.jsx)("p",{className:"text-center text-sm text-blue-200",children:"This will create the first admin user for TechKwiz. Keep your credentials secure."})})]})}):null}}},e=>{e.O(0,[463,441,964,358],()=>e(e.s=3977)),_N_E=e.O()}]);