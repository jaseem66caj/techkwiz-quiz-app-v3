"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{210:(e,t,r)=>{r.d(t,{$5:()=>i,Go:()=>f,HW:()=>c,R1:()=>u,iD:()=>a,ri:()=>s,z0:()=>h});let n={USER:"techkwiz_user",AUTH_TOKEN:"techkwiz_auth",SESSION_COINS:"techkwiz_session_coins"},o=(e,t)=>({id:"user_"+Math.random().toString(36).substr(2,9),email:e.toLowerCase(),name:e.split("@")[0].replace(/[^a-zA-Z0-9]/g," ").trim()||"Tech Enthusiast",coins:0,level:1,totalQuizzes:0,correctAnswers:0,joinDate:new Date().toISOString(),quizHistory:[]}),a=(e,t)=>{let r=d(e);if(r)return localStorage.setItem(n.AUTH_TOKEN,"dummy_token_"+r.id),r;{let r=o(e,t);return u(r),localStorage.setItem(n.AUTH_TOKEN,"dummy_token_"+r.id),r}},i=(e,t,r)=>{let a=o(e,t);return r&&(a.name=r),u(a),localStorage.setItem(n.AUTH_TOKEN,"dummy_token_"+a.id),a},s=()=>{localStorage.removeItem(n.AUTH_TOKEN)},l=(e,t)=>{try{let r=sessionStorage.getItem(n.SESSION_COINS),o=r?JSON.parse(r):{};o[e]=Math.max(0,t),sessionStorage.setItem(n.SESSION_COINS,JSON.stringify(o)),console.log("\uD83D\uDCB0 Session coins updated for ".concat(e,": ").concat(t))}catch(e){console.error("Error setting session coins:",e)}},c=()=>{let e=localStorage.getItem(n.AUTH_TOKEN);if(!e)return null;let t=e.replace("dummy_token_",""),r=m().find(e=>e.id===t);return r&&(r.coins=(e=>{try{let t=sessionStorage.getItem(n.SESSION_COINS);if(!t)return 0;return JSON.parse(t)[e]||0}catch(e){return console.error("Error getting session coins:",e),0}})(t)),r||null},u=e=>{let t=m(),r=t.findIndex(t=>t.id===e.id||t.email===e.email);l(e.id,e.coins);let o={...e,coins:0};r>=0?t[r]=o:t.push(o),localStorage.setItem(n.USER,JSON.stringify(t))},d=e=>m().find(t=>t.email===e.toLowerCase())||null,m=()=>{try{let e=localStorage.getItem(n.USER);return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing stored users:",e),[]}},h=(e,t)=>{l(e,t)},f=(e,t)=>{let r=m(),o=r.findIndex(t=>t.id===e);if(o>=0){r[o].quizHistory.push(t),r[o].totalQuizzes+=1,r[o].correctAnswers+=t.correctAnswers||0;let e=Math.floor(r[o].totalQuizzes/5)+1;r[o].level=e,localStorage.setItem(n.USER,JSON.stringify(r))}}},760:(e,t,r)=>{r.d(t,{N:()=>y});var n=r(5155),o=r(2115),a=r(869),i=r(2885),s=r(7494),l=r(845),c=r(7351),u=r(1508);class d extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,c.s)(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=r-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m(e){let{children:t,isPresent:r,anchorX:a,root:i}=e,s=(0,o.useId)(),l=(0,o.useRef)(null),c=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:m}=(0,o.useContext)(u.Q);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:o,right:u}=c.current;if(r||!l.current||!e||!t)return;l.current.dataset.motionPopId=s;let d=document.createElement("style");m&&(d.nonce=m);let h=null!=i?i:document.head;return h.appendChild(d),d.sheet&&d.sheet.insertRule('\n          [data-motion-pop-id="'.concat(s,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===a?"left: ".concat(o):"right: ".concat(u),"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{h.contains(d)&&h.removeChild(d)}},[r]),(0,n.jsx)(d,{isPresent:r,childRef:l,sizeRef:c,children:o.cloneElement(t,{ref:l})})}let h=e=>{let{children:t,initial:r,isPresent:a,onExitComplete:s,custom:c,presenceAffectsLayout:u,mode:d,anchorX:h,root:g}=e,p=(0,i.M)(f),S=(0,o.useId)(),y=!0,_=(0,o.useMemo)(()=>(y=!1,{id:S,initial:r,isPresent:a,custom:c,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;s&&s()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[a,p,s]);return u&&y&&(_={..._}),(0,o.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[a]),o.useEffect(()=>{a||p.size||!s||s()},[a]),"popLayout"===d&&(t=(0,n.jsx)(m,{isPresent:a,anchorX:h,root:g,children:t})),(0,n.jsx)(l.t.Provider,{value:_,children:t})};function f(){return new Map}var g=r(2082);let p=e=>e.key||"";function S(e){let t=[];return o.Children.forEach(e,e=>{(0,o.isValidElement)(e)&&t.push(e)}),t}let y=e=>{let{children:t,custom:r,initial:l=!0,onExitComplete:c,presenceAffectsLayout:u=!0,mode:d="sync",propagate:m=!1,anchorX:f="left",root:y}=e,[_,E]=(0,g.xQ)(m),w=(0,o.useMemo)(()=>S(t),[t]),I=m&&!_?[]:w.map(p),k=(0,o.useRef)(!0),v=(0,o.useRef)(w),A=(0,i.M)(()=>new Map),[C,z]=(0,o.useState)(w),[D,T]=(0,o.useState)(w);(0,s.E)(()=>{k.current=!1,v.current=w;for(let e=0;e<D.length;e++){let t=p(D[e]);I.includes(t)?A.delete(t):!0!==A.get(t)&&A.set(t,!1)}},[D,I.length,I.join("-")]);let N=[];if(w!==C){let e=[...w];for(let t=0;t<D.length;t++){let r=D[t],n=p(r);I.includes(n)||(e.splice(t,0,r),N.push(r))}return"wait"===d&&N.length&&(e=N),T(S(e)),z(w),null}let{forceRender:O}=(0,o.useContext)(a.L);return(0,n.jsx)(n.Fragment,{children:D.map(e=>{let t=p(e),o=(!m||!!_)&&(w===D||I.includes(t));return(0,n.jsx)(h,{isPresent:o,initial:(!k.current||!!l)&&void 0,custom:r,presenceAffectsLayout:u,mode:d,root:y,onExitComplete:o?void 0:()=>{if(!A.has(t))return;A.set(t,!0);let e=!0;A.forEach(t=>{t||(e=!1)}),e&&(null==O||O(),T(v.current),m&&(null==E||E()),c&&c())},anchorX:f,children:e},t)})})}},881:(e,t,r)=>{r.d(t,{b:()=>u,n:()=>d});var n=r(5155),o=r(2115),a=r(210),i=r(5431);let s={user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[],loading:!0},l=(0,o.createContext)(void 0);function c(e,t){switch(t.type){case"SET_LOADING":return{...e,loading:t.payload};case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,loading:!1};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[]};case"UPDATE_COINS":if(!e.user)return e;let r=e.user.coins,n=r+t.payload;n=Math.min(500,n=Math.max(0,n));let o={...e.user,coins:n};return(0,a.R1)(o),(0,a.z0)(o.id,n),console.log("\uD83D\uDCB0 COINS UPDATE: ".concat(r," + ").concat(t.payload," = ").concat(n)),{...e,user:o};case"START_QUIZ":return{...e,currentQuiz:t.payload};case"END_QUIZ":if(!e.user)return e;let i=t.payload,l={...e.user,totalQuizzes:e.user.totalQuizzes+1,correctAnswers:e.user.correctAnswers+i.correctAnswers},c=i.coinsEarned||0;l.coins=e.user.coins+c,console.log("\uD83C\uDF89 Quiz completed! Earned ".concat(c," coins (").concat(i.correctAnswers," correct \xd7 25)"));let u=Math.floor(l.totalQuizzes/5)+1;return l.level=u,(0,a.Go)(e.user.id,i),(0,a.R1)(l),(0,a.z0)(l.id,l.coins),{...e,user:l,currentQuiz:null,quizHistory:[...e.quizHistory,i]};case"RESET_USER":return{...e,user:s.user};default:return e}}function u(e){let{children:t}=e,[r,u]=(0,o.useReducer)(c,s);return(0,o.useEffect)(()=>{(async()=>{console.log("\uD83D\uDE80 Initializing auth with session-based coins...");try{let e=(0,a.HW)();e?(console.log("\uD83D\uDC64 Found user: ".concat(e.name," with ").concat(e.coins," session coins")),u({type:"LOGIN_SUCCESS",payload:e})):console.log("\uD83D\uDC64 No authenticated user found - will let page components handle guest creation and onboarding")}catch(e){console.error("Auth initialization error:",e),u({type:"SET_LOADING",payload:!1})}u({type:"SET_LOADING",payload:!1})})()},[]),(0,n.jsx)(l.Provider,{value:{state:r,dispatch:u},children:(0,n.jsx)(i.X,{children:t})})}function d(){let e=(0,o.useContext)(l);if(void 0===e)throw Error("useApp must be used within a Providers");return e}},2302:(e,t,r)=>{async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.startsWith("http")?e:"".concat("").concat(e.startsWith("/")?"":"/").concat(e),n={method:"GET",headers:{"Content-Type":"application/json",...t.headers},signal:AbortSignal.timeout(1e4),...t};console.log("\uD83C\uDF10 API Request: ".concat(t.method||"GET"," ").concat(r));try{let e=await fetch(r,n);if(!e.ok)throw console.error("❌ API Error: ".concat(e.status," ").concat(e.statusText)),Error("HTTP ".concat(e.status,": ").concat(e.statusText));return console.log("✅ API Success: ".concat(t.method||"GET"," ").concat(r)),e}catch(e){throw console.error("❌ API Request Failed: ".concat(r),e),e}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await n(e,t)).json()}r.d(t,{AT:()=>n,cQ:()=>o})},2484:(e,t,r)=>{r.d(t,{d:()=>a});var n=r(2115),o=r(881);function a(){var e;let{state:t,dispatch:r}=(0,o.n)(),[a,i]=(0,n.useState)({totalCoinsEarned:0,totalCoinsSpent:0,adViews:0,referrals:0,dailyStreak:0,lastLoginDate:"",premiumFeatures:[],lifetimeValue:0}),[s,l]=(0,n.useState)([]),[c,u]=(0,n.useState)([]),[d,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=localStorage.getItem("techkwiz_revenue_metrics");if(e)try{i(JSON.parse(e))}catch(e){console.error("Error loading revenue metrics:",e)}let t=localStorage.getItem("techkwiz_multipliers");if(t)try{let e=JSON.parse(t).filter(e=>e.expiresAt>Date.now());l(e)}catch(e){console.error("Error loading multipliers:",e)}_(),E()},[]),(0,n.useEffect)(()=>{localStorage.setItem("techkwiz_revenue_metrics",JSON.stringify(a))},[a]),(0,n.useEffect)(()=>{localStorage.setItem("techkwiz_multipliers",JSON.stringify(s))},[s]);let g=(0,n.useCallback)(e=>{let t=1;return s.forEach(e=>{e.active&&e.expiresAt>Date.now()&&(t*=e.multiplier)}),Math.floor(e*t)},[s]),p=(0,n.useCallback)((e,t)=>{let n=g(e);return r({type:"UPDATE_COINS",payload:n}),i(e=>({...e,totalCoinsEarned:e.totalCoinsEarned+n,lifetimeValue:e.lifetimeValue+.01*n})),n},[g,r]),S=(0,n.useCallback)((e,t,r)=>{let n={type:e,multiplier:t,duration:r,expiresAt:Date.now()+60*r*1e3,active:!0};return l(e=>[...e,n]),n},[]),y=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=p(e,"ad");return i(e=>({...e,adViews:e.adViews+1})),a.adViews>0&&a.adViews%3==0&&S("streak",1.5,30),t},[p,a.adViews,S]),_=(0,n.useCallback)(()=>{let e=new Date().toDateString(),t=localStorage.getItem("techkwiz_last_login");if(t!==e){let r=new Date;r.setDate(r.getDate()-1);let n=t===r.toDateString()?a.dailyStreak+1:1;return i(t=>({...t,dailyStreak:n,lastLoginDate:e})),localStorage.setItem("techkwiz_last_login",e),m(!0),n}return a.dailyStreak},[a.dailyStreak]),E=(0,n.useCallback)(()=>{var e;let r=Date.now(),n=(null==(e=t.user)?void 0:e.coins)||0,o=[];n<50&&a.adViews<5&&o.push({id:"coin_boost_starter",title:"\uD83D\uDE80 Starter Coin Boost!",description:"Get 500 coins instantly + 2x multiplier for 1 hour",discount:60,originalPrice:250,finalPrice:100,endTime:r+72e5,icon:"\uD83D\uDCB0",shown:!1,claimed:!1}),a.dailyStreak>=3&&o.push({id:"streak_master_deal",title:"\uD83D\uDD25 Streak Master Deal!",description:"3x coin multiplier for 24 hours + 1000 bonus coins",discount:50,originalPrice:1e3,finalPrice:500,endTime:r+144e5,icon:"\uD83D\uDC51",shown:!1,claimed:!1});let i=new Date().getDay();(0===i||6===i)&&o.push({id:"weekend_special",title:"\uD83C\uDF89 Weekend Special!",description:"Unlimited quiz attempts + premium features for 48h",discount:70,originalPrice:800,finalPrice:240,endTime:r+216e5,icon:"\uD83C\uDF81",shown:!1,claimed:!1}),u(o)},[null==(e=t.user)?void 0:e.coins,a]),w=(0,n.useCallback)(e=>{let t=p(e,"daily");return m(!1),a.dailyStreak>=7&&S("daily_bonus",2,60),t},[p,a.dailyStreak,S]),I=(0,n.useCallback)(e=>{p(100,"referral"),i(e=>({...e,referrals:e.referrals+1})),S("referral",1.25,120)},[p,S]),k=(0,n.useCallback)(()=>s.reduce((e,t)=>t.active&&t.expiresAt>Date.now()?e*t.multiplier:e,1),[s]);(0,n.useEffect)(()=>{let e=setInterval(()=>{l(e=>e.filter(e=>e.expiresAt>Date.now()))},6e4);return()=>clearInterval(e)},[]);let v=(0,n.useCallback)(()=>{let e=[];return a.adViews<5&&e.push({type:"ad_engagement",message:"Watch ads to earn bonus coins and unlock multipliers!",priority:"high"}),a.dailyStreak<3&&e.push({type:"daily_engagement",message:"Build your daily streak for bigger bonuses!",priority:"medium"}),0===a.referrals&&e.push({type:"referral",message:"Invite friends to earn referral bonuses!",priority:"medium"}),e},[a]);return{revenueMetrics:a,activeMultipliers:s,currentOffers:c,showDailyBonus:d,showReferralModal:h,setShowReferralModal:f,awardCoins:p,trackAdView:y,claimDailyBonus:w,processReferral:I,addMultiplier:S,getCurrentMultiplier:k,calculateCoinsWithMultipliers:g,getRevenueRecommendations:v,generateLimitedTimeOffers:E}}},5431:(e,t,r)=>{r.d(t,{X:()=>s,z:()=>l});var n=r(5155),o=r(2115),a=r(2302);let i=(0,o.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,o.useState)(null),[l,c]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=localStorage.getItem("admin_token"),t=localStorage.getItem("admin_username");e&&t?(console.log("\uD83D\uDD04 Found stored credentials, setting admin user immediately"),s({username:t,token:e}),u(e,t).catch(console.error)):c(!1)},[]);let u=async(e,t)=>{try{console.log("\uD83D\uDD10 Verifying admin token for:",t),(await (0,a.AT)("/api/admin/verify",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})).ok?console.log("✅ Admin token verified successfully"):(console.log("❌ Admin token verification failed"),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),s(null)),c(!1)}catch(e){console.error("❌ Admin token verification error:",e),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),s(null),c(!1)}},d=async(e,t)=>{try{console.log("\uD83D\uDD0D Admin login attempt:",e);let r=(await (0,a.cQ)("/api/admin/login",{method:"POST",body:JSON.stringify({username:e,password:t})})).access_token;return console.log("✅ Admin login successful, token received"),localStorage.setItem("admin_token",r),localStorage.setItem("admin_username",e),s({username:e,token:r}),!0}catch(e){return console.error("❌ Admin login error:",e),!1}};return(0,n.jsx)(i.Provider,{value:{adminUser:r,isAuthenticated:!!r,login:d,logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),s(null)},loading:l},children:t})}let l=()=>{let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},5695:(e,t,r)=>{var n=r(8999);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}}]);