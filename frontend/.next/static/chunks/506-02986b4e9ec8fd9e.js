"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{210:(e,t,s)=>{s.d(t,{$5:()=>a,Go:()=>x,HW:()=>c,R1:()=>d,iD:()=>o,ri:()=>i,z0:()=>h});let r={USER:"techkwiz_user",AUTH_TOKEN:"techkwiz_auth",SESSION_COINS:"techkwiz_session_coins"},n=(e,t)=>({id:"user_"+Math.random().toString(36).substr(2,9),email:e.toLowerCase(),name:e.split("@")[0].replace(/[^a-zA-Z0-9]/g," ").trim()||"Tech Enthusiast",coins:0,level:1,totalQuizzes:0,correctAnswers:0,joinDate:new Date().toISOString(),quizHistory:[]}),o=(e,t)=>{let s=u(e);if(s)return localStorage.setItem(r.AUTH_TOKEN,"dummy_token_"+s.id),s;{let s=n(e,t);return d(s),localStorage.setItem(r.AUTH_TOKEN,"dummy_token_"+s.id),s}},a=(e,t,s)=>{let o=n(e,t);return s&&(o.name=s),d(o),localStorage.setItem(r.AUTH_TOKEN,"dummy_token_"+o.id),o},i=()=>{localStorage.removeItem(r.AUTH_TOKEN)},l=(e,t)=>{try{let s=sessionStorage.getItem(r.SESSION_COINS),n=s?JSON.parse(s):{};n[e]=Math.max(0,t),sessionStorage.setItem(r.SESSION_COINS,JSON.stringify(n)),console.log("\uD83D\uDCB0 Session coins updated for ".concat(e,": ").concat(t))}catch(e){console.error("Error setting session coins:",e)}},c=()=>{let e=localStorage.getItem(r.AUTH_TOKEN);if(!e)return null;let t=e.replace("dummy_token_",""),s=m().find(e=>e.id===t);return s&&(s.coins=(e=>{try{let t=sessionStorage.getItem(r.SESSION_COINS);if(!t)return 0;return JSON.parse(t)[e]||0}catch(e){return console.error("Error getting session coins:",e),0}})(t)),s||null},d=e=>{let t=m(),s=t.findIndex(t=>t.id===e.id||t.email===e.email);l(e.id,e.coins);let n={...e,coins:0};s>=0?t[s]=n:t.push(n),localStorage.setItem(r.USER,JSON.stringify(t))},u=e=>m().find(t=>t.email===e.toLowerCase())||null,m=()=>{try{let e=localStorage.getItem(r.USER);return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing stored users:",e),[]}},h=(e,t)=>{l(e,t)},x=(e,t)=>{let s=m(),n=s.findIndex(t=>t.id===e);if(n>=0){s[n].quizHistory.push(t),s[n].totalQuizzes+=1,s[n].correctAnswers+=t.correctAnswers||0;let e=Math.floor(s[n].totalQuizzes/5)+1;s[n].level=e,localStorage.setItem(r.USER,JSON.stringify(s))}}},881:(e,t,s)=>{s.d(t,{b:()=>d,n:()=>u});var r=s(5155),n=s(2115),o=s(210),a=s(5431);let i={user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[],loading:!0},l=(0,n.createContext)(void 0);function c(e,t){switch(t.type){case"SET_LOADING":return{...e,loading:t.payload};case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,loading:!1};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[]};case"UPDATE_COINS":if(!e.user)return e;let s=e.user.coins,r=s+t.payload;r=Math.min(500,r=Math.max(0,r));let n={...e.user,coins:r};return(0,o.R1)(n),(0,o.z0)(n.id,r),console.log("\uD83D\uDCB0 COINS UPDATE: ".concat(s," + ").concat(t.payload," = ").concat(r)),{...e,user:n};case"START_QUIZ":return{...e,currentQuiz:t.payload};case"END_QUIZ":if(!e.user)return e;let a=t.payload,l={...e.user,totalQuizzes:e.user.totalQuizzes+1,correctAnswers:e.user.correctAnswers+a.correctAnswers},c=a.coinsEarned||0;l.coins=e.user.coins+c,console.log("\uD83C\uDF89 Quiz completed! Earned ".concat(c," coins (").concat(a.correctAnswers," correct \xd7 25)"));let d=Math.floor(l.totalQuizzes/5)+1;return l.level=d,(0,o.Go)(e.user.id,a),(0,o.R1)(l),(0,o.z0)(l.id,l.coins),{...e,user:l,currentQuiz:null,quizHistory:[...e.quizHistory,a]};case"RESET_USER":return{...e,user:i.user};default:return e}}function d(e){let{children:t}=e,[s,d]=(0,n.useReducer)(c,i);return(0,n.useEffect)(()=>{(async()=>{console.log("\uD83D\uDE80 Initializing auth with session-based coins...");try{let e=(0,o.HW)();if(e)console.log("\uD83D\uDC64 Found user: ".concat(e.name," with ").concat(e.coins," session coins")),d({type:"LOGIN_SUCCESS",payload:e});else{console.log("\uD83D\uDC64 No authenticated user found - creating guest user");let e={id:"guest_".concat(Date.now()),name:"Guest User",email:"guest_".concat(Date.now(),"@techkwiz.com"),coins:0,level:1,totalQuizzes:0,correctAnswers:0,joinDate:new Date().toISOString(),quizHistory:[],achievements:[]};localStorage.setItem("techkwiz_auth","dummy_token_"+e.id);let t=JSON.parse(localStorage.getItem("techkwiz_user")||"[]");t.push(e),localStorage.setItem("techkwiz_user",JSON.stringify(t)),d({type:"LOGIN_SUCCESS",payload:e})}}catch(e){console.error("Auth initialization error:",e),d({type:"SET_LOADING",payload:!1})}d({type:"SET_LOADING",payload:!1})})()},[]),(0,r.jsx)(l.Provider,{value:{state:s,dispatch:d},children:(0,r.jsx)(a.X,{children:t})})}function u(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useApp must be used within a Providers");return e}},2302:(e,t,s)=>{async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.startsWith("http")?e:"".concat("").concat(e.startsWith("/")?"":"/").concat(e),r={method:"GET",headers:{"Content-Type":"application/json",...t.headers},signal:AbortSignal.timeout(1e4),...t};console.log("\uD83C\uDF10 API Request: ".concat(t.method||"GET"," ").concat(s));try{let e=await fetch(s,r);if(!e.ok)throw console.error("❌ API Error: ".concat(e.status," ").concat(e.statusText)),Error("HTTP ".concat(e.status,": ").concat(e.statusText));return console.log("✅ API Success: ".concat(t.method||"GET"," ").concat(s)),e}catch(e){throw console.error("❌ API Request Failed: ".concat(s),e),e}}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await r(e,t)).json()}s.d(t,{AT:()=>r,cQ:()=>n})},5431:(e,t,s)=>{s.d(t,{X:()=>i,z:()=>l});var r=s(5155),n=s(2115),o=s(2302);let a=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,n.useState)(null),[l,c]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=localStorage.getItem("admin_token"),t=localStorage.getItem("admin_username");e&&t?(console.log("\uD83D\uDD04 Found stored credentials, setting admin user immediately"),i({username:t,token:e}),d(e,t).catch(console.error)):c(!1)},[]);let d=async(e,t)=>{try{console.log("\uD83D\uDD10 Verifying admin token for:",t),(await (0,o.AT)("/api/admin/verify",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})).ok?console.log("✅ Admin token verified successfully"):(console.log("❌ Admin token verification failed"),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),i(null)),c(!1)}catch(e){console.error("❌ Admin token verification error:",e),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),i(null),c(!1)}},u=async(e,t)=>{try{console.log("\uD83D\uDD0D Admin login attempt:",e);let s=(await (0,o.cQ)("/api/admin/login",{method:"POST",body:JSON.stringify({username:e,password:t})})).access_token;return console.log("✅ Admin login successful, token received"),localStorage.setItem("admin_token",s),localStorage.setItem("admin_username",e),i({username:e,token:s}),!0}catch(e){return console.error("❌ Admin login error:",e),!1}};return(0,r.jsx)(a.Provider,{value:{adminUser:s,isAuthenticated:!!s,login:u,logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_username"),i(null)},loading:l},children:t})}let l=()=>{let e=(0,n.useContext)(a);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},5506:(e,t,s)=>{s.d(t,{V:()=>m});var r=s(5155),n=s(2115),o=s(6874),a=s.n(o),i=s(5695),l=s(3463),c=s(881),d=s(6313),u=s(210);function m(e){var t,s;let{hideHeaderElements:o=!1}=e,m=(0,i.useRouter)(),{state:h,dispatch:x}=(0,c.n)(),[g,p]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1);return(console.log("Navigation component: hideHeaderElements =",o),h.loading)?(0,r.jsx)("nav",{className:"bg-gray-800/90 backdrop-blur-sm border-b border-white/10 sticky top-0 z-50",children:(0,r.jsx)("div",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-xl font-bold text-white",children:[(0,r.jsx)("span",{className:"text-orange-400",children:"Tech"}),"Kwiz"]}),(0,r.jsx)("div",{className:"animate-pulse bg-white/10 rounded-full h-8 w-20"})]})})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("nav",{className:"bg-gray-800/90 backdrop-blur-sm border-b border-white/10 sticky top-0 z-50",children:(0,r.jsxs)("div",{className:"px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(a(),{href:"/",className:"flex items-center space-x-2",children:(0,r.jsxs)("div",{className:"text-xl font-bold text-white",children:[(0,r.jsx)("span",{className:"text-orange-400",children:"Tech"}),"Kwiz"]})}),(0,r.jsx)("div",{className:"flex items-center space-x-3",children:h.isAuthenticated?(0,r.jsxs)(r.Fragment,{children:[!o&&(0,r.jsxs)("div",{className:"bg-gray-700 px-3 py-1.5 rounded-full flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83E\uDE99"}),(0,r.jsx)("span",{className:"text-white font-semibold text-sm",children:(null==(t=h.user)?void 0:t.coins)||0})]}),!o&&(0,r.jsx)("button",{onClick:()=>p(!g),className:"p-2 rounded-lg text-white hover:bg-gray-700 transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:g?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]}):(0,r.jsx)("button",{onClick:()=>y(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-full font-semibold text-sm transition-colors",children:"Login"})})]}),h.isAuthenticated&&!o&&(0,r.jsx)("div",{className:"mt-2 pt-2 border-t border-white/10",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-gray-300 text-sm",children:["Hi, ",null==(s=h.user)?void 0:s.name,"!"]}),(0,r.jsx)("button",{onClick:()=>{(0,u.ri)(),x({type:"LOGOUT"}),m.push("/")},className:"text-orange-400 hover:text-orange-300 text-sm transition-colors",children:"Logout"})]})})]})}),g&&h.isAuthenticated&&(0,r.jsx)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-gray-800/95 backdrop-blur-sm border-b border-white/10 sticky top-[73px] z-40",children:(0,r.jsx)("div",{className:"px-4 py-3 space-y-1",children:[{name:"Home",href:"/",icon:"\uD83C\uDFE0"},{name:"Categories",href:"/start",icon:"\uD83D\uDCDA"},{name:"Leaderboard",href:"/leaderboard",icon:"\uD83C\uDFC6"},{name:"Profile",href:"/profile",icon:"\uD83D\uDC64"}].map(e=>(0,r.jsxs)(a(),{href:e.href,onClick:()=>p(!1),className:"flex items-center space-x-3 px-3 py-3 rounded-lg text-white hover:bg-gray-700/50 transition-colors",children:[(0,r.jsx)("span",{className:"text-lg",children:e.icon}),(0,r.jsx)("span",{className:"font-medium",children:e.name})]},e.name))})}),(0,r.jsx)(d.U,{isOpen:f,onClose:()=>y(!1),onSuccess:e=>{x({type:"LOGIN_SUCCESS",payload:e}),y(!1)}})]})}},5695:(e,t,s)=>{var r=s(8999);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},6313:(e,t,s)=>{s.d(t,{U:()=>i});var r=s(5155),n=s(2115),o=s(3463),a=s(210);function i(e){let{isOpen:t,onClose:s,onSuccess:i}=e,[l,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[x,g]=(0,n.useState)(""),[p,f]=(0,n.useState)(!1),[y,S]=(0,n.useState)("");if(!t)return null;let b=async e=>{e.preventDefault(),f(!0),S("");try{if(!d||!m){S("Please fill in all fields"),f(!1);return}if(!l&&x.trim().length<2){S("Name must be at least 2 characters"),f(!1);return}let e=l?(0,a.iD)(d,m):(0,a.$5)(d,m,x);i(e),s()}catch(e){S("Something went wrong. Please try again.")}finally{f(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)(o.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"glass-effect p-6 md:p-8 rounded-2xl w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:l?"Welcome Back!":"Join TechKwiz"}),(0,r.jsx)("button",{onClick:s,className:"text-white hover:text-orange-400 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"bg-blue-500/20 border border-blue-400/30 rounded-lg p-3 mb-6",children:(0,r.jsxs)("p",{className:"text-blue-200 text-sm text-center",children:["\uD83D\uDCA1 Demo Mode: Use any email and password to ",l?"login":"sign up"]})}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[!l&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Name"}),(0,r.jsx)("input",{type:"text",value:x,onChange:e=>g(e.target.value),placeholder:"Enter your name",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-orange-400 transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",value:d,onChange:e=>u(e.target.value),placeholder:"Enter any email (demo@example.com)",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-orange-400 transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Password"}),(0,r.jsx)("input",{type:"password",value:m,onChange:e=>h(e.target.value),placeholder:"Enter any password",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-orange-400 transition-colors"})]}),y&&(0,r.jsx)("div",{className:"text-red-400 text-sm text-center",children:y}),(0,r.jsx)("button",{type:"submit",disabled:p,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Processing...":l?"Login":"Sign Up"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-blue-200 text-sm",children:[l?"Don't have an account?":"Already have an account?",(0,r.jsx)("button",{onClick:()=>{c(!l),u(""),h(""),g(""),S("")},className:"ml-2 text-orange-400 hover:text-orange-300 font-semibold transition-colors",children:l?"Sign Up":"Login"})]})}),!l&&(0,r.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,r.jsx)("p",{className:"text-white text-sm font-medium text-center mb-3",children:"\uD83C\uDF81 New User Benefits:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-yellow-400",children:"\uD83E\uDE99 500"}),(0,r.jsx)("div",{className:"text-blue-200",children:"Starting Coins"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-purple-400",children:"\uD83C\uDFAF Level 1"}),(0,r.jsx)("div",{className:"text-blue-200",children:"Tech Enthusiast"})]})]})]})]})})}}}]);