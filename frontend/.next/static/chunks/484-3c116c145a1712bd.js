"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{210:(e,t,r)=>{r.d(t,{$5:()=>o,Go:()=>g,HW:()=>u,R1:()=>c,iD:()=>s,ri:()=>l,z0:()=>m});let i={USER:"techkwiz_user",AUTH_TOKEN:"techkwiz_auth",SESSION_COINS:"techkwiz_session_coins"},a=(e,t)=>({id:"user_"+Math.random().toString(36).substr(2,9),email:e.toLowerCase(),name:e.split("@")[0].replace(/[^a-zA-Z0-9]/g," ").trim()||"Tech Enthusiast",coins:0,level:1,totalQuizzes:0,correctAnswers:0,joinDate:new Date().toISOString(),quizHistory:[]}),s=(e,t)=>{let r=d(e);if(r)return localStorage.setItem(i.AUTH_TOKEN,"dummy_token_"+r.id),r;{let r=a(e,t);return c(r),localStorage.setItem(i.AUTH_TOKEN,"dummy_token_"+r.id),r}},o=(e,t,r)=>{let s=a(e,t);return r&&(s.name=r),c(s),localStorage.setItem(i.AUTH_TOKEN,"dummy_token_"+s.id),s},l=()=>{localStorage.removeItem(i.AUTH_TOKEN)},n=(e,t)=>{try{let r=sessionStorage.getItem(i.SESSION_COINS),a=r?JSON.parse(r):{};a[e]=Math.max(0,t),sessionStorage.setItem(i.SESSION_COINS,JSON.stringify(a)),console.log("\uD83D\uDCB0 Session coins updated for ".concat(e,": ").concat(t))}catch(e){console.error("Error setting session coins:",e)}},u=()=>{let e=localStorage.getItem(i.AUTH_TOKEN);if(!e)return null;let t=e.replace("dummy_token_",""),r=S().find(e=>e.id===t);return r&&(r.coins=(e=>{try{let t=sessionStorage.getItem(i.SESSION_COINS);if(!t)return 0;return JSON.parse(t)[e]||0}catch(e){return console.error("Error getting session coins:",e),0}})(t)),r||null},c=e=>{let t=S(),r=t.findIndex(t=>t.id===e.id||t.email===e.email);n(e.id,e.coins);let a={...e,coins:0};r>=0?t[r]=a:t.push(a),localStorage.setItem(i.USER,JSON.stringify(t))},d=e=>S().find(t=>t.email===e.toLowerCase())||null,S=()=>{try{let e=localStorage.getItem(i.USER);return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing stored users:",e),[]}},m=(e,t)=>{n(e,t)},g=(e,t)=>{let r=S(),a=r.findIndex(t=>t.id===e);if(a>=0){r[a].quizHistory.push(t),r[a].totalQuizzes+=1,r[a].correctAnswers+=t.correctAnswers||0;let e=Math.floor(r[a].totalQuizzes/5)+1;r[a].level=e,localStorage.setItem(i.USER,JSON.stringify(r))}}},881:(e,t,r)=>{r.d(t,{b:()=>u,n:()=>c});var i=r(5155),a=r(2115),s=r(210);let o={user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[],loading:!0},l=(0,a.createContext)(void 0);function n(e,t){switch(t.type){case"SET_LOADING":return{...e,loading:t.payload};case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,loading:!1};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,currentQuiz:null,quizHistory:[]};case"UPDATE_COINS":if(!e.user)return e;let r=e.user.coins,i=r+t.payload;i=Math.min(500,i=Math.max(0,i));let a={...e.user,coins:i};return(0,s.R1)(a),(0,s.z0)(a.id,i),console.log("\uD83D\uDCB0 COINS UPDATE: ".concat(r," + ").concat(t.payload," = ").concat(i)),{...e,user:a};case"START_QUIZ":return{...e,currentQuiz:t.payload};case"END_QUIZ":if(!e.user)return e;let l=t.payload,n={...e.user,totalQuizzes:e.user.totalQuizzes+1,correctAnswers:e.user.correctAnswers+l.correctAnswers},u=l.coinsEarned||0;n.coins=e.user.coins+u,console.log("\uD83C\uDF89 Quiz completed! Earned ".concat(u," coins (").concat(l.correctAnswers," correct \xd7 25)"));let c=Math.floor(n.totalQuizzes/5)+1;return n.level=c,(0,s.Go)(e.user.id,l),(0,s.R1)(n),(0,s.z0)(n.id,n.coins),{...e,user:n,currentQuiz:null,quizHistory:[...e.quizHistory,l]};case"RESET_USER":return{...e,user:o.user};default:return e}}function u(e){let{children:t}=e,[r,u]=(0,a.useReducer)(n,o);return(0,a.useEffect)(()=>{(async()=>{console.log("\uD83D\uDE80 Initializing auth with session-based coins...");try{let e=(0,s.HW)();e?(console.log("\uD83D\uDC64 Found user: ".concat(e.name," with ").concat(e.coins," session coins")),u({type:"LOGIN_SUCCESS",payload:e})):console.log("\uD83D\uDC64 No authenticated user found - will let page components handle guest creation and onboarding")}catch(e){console.error("Auth initialization error:",e),u({type:"SET_LOADING",payload:!1})}u({type:"SET_LOADING",payload:!1})})()},[]),(0,i.jsx)(l.Provider,{value:{state:r,dispatch:u},children:t})}function c(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useApp must be used within a Providers");return e}},2484:(e,t,r)=>{r.d(t,{d:()=>s});var i=r(2115),a=r(881);function s(){var e;let{state:t,dispatch:r}=(0,a.n)(),[s,o]=(0,i.useState)({totalCoinsEarned:0,totalCoinsSpent:0,adViews:0,referrals:0,dailyStreak:0,lastLoginDate:"",premiumFeatures:[],lifetimeValue:0}),[l,n]=(0,i.useState)([]),[u,c]=(0,i.useState)([]),[d,S]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=localStorage.getItem("techkwiz_revenue_metrics");if(e)try{o(JSON.parse(e))}catch(e){console.error("Error loading revenue metrics:",e)}let t=localStorage.getItem("techkwiz_multipliers");if(t)try{let e=JSON.parse(t).filter(e=>e.expiresAt>Date.now());n(e)}catch(e){console.error("Error loading multipliers:",e)}_(),w()},[]),(0,i.useEffect)(()=>{localStorage.setItem("techkwiz_revenue_metrics",JSON.stringify(s))},[s]),(0,i.useEffect)(()=>{localStorage.setItem("techkwiz_multipliers",JSON.stringify(l))},[l]);let p=(0,i.useCallback)(e=>{let t=1;return l.forEach(e=>{e.active&&e.expiresAt>Date.now()&&(t*=e.multiplier)}),Math.floor(e*t)},[l]),f=(0,i.useCallback)((e,t)=>{let i=p(e);return r({type:"UPDATE_COINS",payload:i}),o(e=>({...e,totalCoinsEarned:e.totalCoinsEarned+i,lifetimeValue:e.lifetimeValue+.01*i})),i},[p,r]),h=(0,i.useCallback)((e,t,r)=>{let i={type:e,multiplier:t,duration:r,expiresAt:Date.now()+60*r*1e3,active:!0};return n(e=>[...e,i]),i},[]),y=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=f(e,"ad");return o(e=>({...e,adViews:e.adViews+1})),s.adViews>0&&s.adViews%3==0&&h("streak",1.5,30),t},[f,s.adViews,h]),_=(0,i.useCallback)(()=>{let e=new Date().toDateString(),t=localStorage.getItem("techkwiz_last_login");if(t!==e){let r=new Date;r.setDate(r.getDate()-1);let i=t===r.toDateString()?s.dailyStreak+1:1;return o(t=>({...t,dailyStreak:i,lastLoginDate:e})),localStorage.setItem("techkwiz_last_login",e),S(!0),i}return s.dailyStreak},[s.dailyStreak]),w=(0,i.useCallback)(()=>{var e;let r=Date.now(),i=(null==(e=t.user)?void 0:e.coins)||0,a=[];i<50&&s.adViews<5&&a.push({id:"coin_boost_starter",title:"\uD83D\uDE80 Starter Coin Boost!",description:"Get 500 coins instantly + 2x multiplier for 1 hour",discount:60,originalPrice:250,finalPrice:100,endTime:r+72e5,icon:"\uD83D\uDCB0",shown:!1,claimed:!1}),s.dailyStreak>=3&&a.push({id:"streak_master_deal",title:"\uD83D\uDD25 Streak Master Deal!",description:"3x coin multiplier for 24 hours + 1000 bonus coins",discount:50,originalPrice:1e3,finalPrice:500,endTime:r+144e5,icon:"\uD83D\uDC51",shown:!1,claimed:!1});let o=new Date().getDay();(0===o||6===o)&&a.push({id:"weekend_special",title:"\uD83C\uDF89 Weekend Special!",description:"Unlimited quiz attempts + premium features for 48h",discount:70,originalPrice:800,finalPrice:240,endTime:r+216e5,icon:"\uD83C\uDF81",shown:!1,claimed:!1}),c(a)},[null==(e=t.user)?void 0:e.coins,s]),E=(0,i.useCallback)(e=>{let t=f(e,"daily");return S(!1),s.dailyStreak>=7&&h("daily_bonus",2,60),t},[f,s.dailyStreak,h]),k=(0,i.useCallback)(e=>{f(100,"referral"),o(e=>({...e,referrals:e.referrals+1})),h("referral",1.25,120)},[f,h]),I=(0,i.useCallback)(()=>l.reduce((e,t)=>t.active&&t.expiresAt>Date.now()?e*t.multiplier:e,1),[l]);(0,i.useEffect)(()=>{let e=setInterval(()=>{n(e=>e.filter(e=>e.expiresAt>Date.now()))},6e4);return()=>clearInterval(e)},[]);let z=(0,i.useCallback)(()=>{let e=[];return s.adViews<5&&e.push({type:"ad_engagement",message:"Watch ads to earn bonus coins and unlock multipliers!",priority:"high"}),s.dailyStreak<3&&e.push({type:"daily_engagement",message:"Build your daily streak for bigger bonuses!",priority:"medium"}),0===s.referrals&&e.push({type:"referral",message:"Invite friends to earn referral bonuses!",priority:"medium"}),e},[s]);return{revenueMetrics:s,activeMultipliers:l,currentOffers:u,showDailyBonus:d,showReferralModal:m,setShowReferralModal:g,awardCoins:f,trackAdView:y,claimDailyBonus:E,processReferral:k,addMultiplier:h,getCurrentMultiplier:I,calculateCoinsWithMultipliers:p,getRevenueRecommendations:z,generateLimitedTimeOffers:w}}}}]);